---
source_txt: fullstack_samples/payload-main
converted_utc: 2025-12-18T13:05:13Z
part: 640
parts_total: 695
---

# FULLSTACK CODE DATABASE SAMPLES payload-main

## Verbatim Content (Part 640 of 695)

````text
================================================================================
FULLSTACK SAMPLES CODE DATABASE (VERBATIM) - payload-main
================================================================================
Generated: December 18, 2025
Source: fullstack_samples/payload-main
================================================================================

NOTES:
- This output is verbatim because the source is user-owned.
- Large/binary files may be skipped by size/binary detection limits.

================================================================================

---[FILE: payload-types.ts]---
Location: payload-main/test/plugin-multi-tenant/payload-types.ts

```typescript
/* tslint:disable */
/* eslint-disable */
/**
 * This file was automatically generated by Payload.
 * DO NOT MODIFY IT BY HAND. Instead, modify your source Payload config,
 * and re-run `payload generate:types` to regenerate this file.
 */

/**
 * Supported timezones in IANA format.
 *
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "supportedTimezones".
 */
export type SupportedTimezones =
  | 'Pacific/Midway'
  | 'Pacific/Niue'
  | 'Pacific/Honolulu'
  | 'Pacific/Rarotonga'
  | 'America/Anchorage'
  | 'Pacific/Gambier'
  | 'America/Los_Angeles'
  | 'America/Tijuana'
  | 'America/Denver'
  | 'America/Phoenix'
  | 'America/Chicago'
  | 'America/Guatemala'
  | 'America/New_York'
  | 'America/Bogota'
  | 'America/Caracas'
  | 'America/Santiago'
  | 'America/Buenos_Aires'
  | 'America/Sao_Paulo'
  | 'Atlantic/South_Georgia'
  | 'Atlantic/Azores'
  | 'Atlantic/Cape_Verde'
  | 'Europe/London'
  | 'Europe/Berlin'
  | 'Africa/Lagos'
  | 'Europe/Athens'
  | 'Africa/Cairo'
  | 'Europe/Moscow'
  | 'Asia/Riyadh'
  | 'Asia/Dubai'
  | 'Asia/Baku'
  | 'Asia/Karachi'
  | 'Asia/Tashkent'
  | 'Asia/Calcutta'
  | 'Asia/Dhaka'
  | 'Asia/Almaty'
  | 'Asia/Jakarta'
  | 'Asia/Bangkok'
  | 'Asia/Shanghai'
  | 'Asia/Singapore'
  | 'Asia/Tokyo'
  | 'Asia/Seoul'
  | 'Australia/Brisbane'
  | 'Australia/Sydney'
  | 'Pacific/Guam'
  | 'Pacific/Noumea'
  | 'Pacific/Auckland'
  | 'Pacific/Fiji';

export interface Config {
  auth: {
    users: UserAuthOperations;
  };
  blocks: {};
  collections: {
    tenants: Tenant;
    users: User;
    'food-items': FoodItem;
    'food-menu': FoodMenu;
    'autosave-global': AutosaveGlobal;
    relationships: Relationship;
    notTenanted: NotTenanted;
    'payload-kv': PayloadKv;
    'payload-locked-documents': PayloadLockedDocument;
    'payload-preferences': PayloadPreference;
    'payload-migrations': PayloadMigration;
  };
  collectionsJoins: {
    tenants: {
      users: 'users';
    };
  };
  collectionsSelect: {
    tenants: TenantsSelect<false> | TenantsSelect<true>;
    users: UsersSelect<false> | UsersSelect<true>;
    'food-items': FoodItemsSelect<false> | FoodItemsSelect<true>;
    'food-menu': FoodMenuSelect<false> | FoodMenuSelect<true>;
    'autosave-global': AutosaveGlobalSelect<false> | AutosaveGlobalSelect<true>;
    relationships: RelationshipsSelect<false> | RelationshipsSelect<true>;
    notTenanted: NotTenantedSelect<false> | NotTenantedSelect<true>;
    'payload-kv': PayloadKvSelect<false> | PayloadKvSelect<true>;
    'payload-locked-documents': PayloadLockedDocumentsSelect<false> | PayloadLockedDocumentsSelect<true>;
    'payload-preferences': PayloadPreferencesSelect<false> | PayloadPreferencesSelect<true>;
    'payload-migrations': PayloadMigrationsSelect<false> | PayloadMigrationsSelect<true>;
  };
  db: {
    defaultIDType: string;
  };
  fallbackLocale: ('false' | 'none' | 'null') | false | null | ('en' | 'es' | 'fr') | ('en' | 'es' | 'fr')[];
  globals: {};
  globalsSelect: {};
  locale: 'en' | 'es' | 'fr';
  user: User & {
    collection: 'users';
  };
  jobs: {
    tasks: unknown;
    workflows: unknown;
  };
}
export interface UserAuthOperations {
  forgotPassword: {
    email: string;
    password: string;
  };
  login: {
    email: string;
    password: string;
  };
  registerFirstUser: {
    email: string;
    password: string;
  };
  unlock: {
    email: string;
    password: string;
  };
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "tenants".
 */
export interface Tenant {
  id: string;
  name: string;
  domain: string;
  users?: {
    docs?: (string | User)[];
    hasNextPage?: boolean;
    totalDocs?: number;
  };
  isPublic?: boolean | null;
  selectedLocales?: ('allLocales' | 'en' | 'es' | 'fr')[] | null;
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "users".
 */
export interface User {
  id: string;
  roles?: ('admin' | 'user')[] | null;
  tenants?:
    | {
        tenant: string | Tenant;
        id?: string | null;
      }[]
    | null;
  updatedAt: string;
  createdAt: string;
  email: string;
  resetPasswordToken?: string | null;
  resetPasswordExpiration?: string | null;
  salt?: string | null;
  hash?: string | null;
  loginAttempts?: number | null;
  lockUntil?: string | null;
  sessions?:
    | {
        id: string;
        createdAt?: string | null;
        expiresAt: string;
      }[]
    | null;
  password?: string | null;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "food-items".
 */
export interface FoodItem {
  id: string;
  tenant?: (string | null) | Tenant;
  name: string;
  localizedName?: string | null;
  content?: {
    root: {
      type: string;
      children: {
        type: any;
        version: number;
        [k: string]: unknown;
      }[];
      direction: ('ltr' | 'rtl') | null;
      format: 'left' | 'start' | 'center' | 'right' | 'end' | 'justify' | '';
      indent: number;
      version: number;
    };
    [k: string]: unknown;
  } | null;
  polymorphicRelationship?:
    | ({
        relationTo: 'relationships';
        value: string | Relationship;
      } | null)
    | ({
        relationTo: 'food-items';
        value: string | FoodItem;
      } | null)
    | ({
        relationTo: 'notTenanted';
        value: string | NotTenanted;
      } | null);
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "relationships".
 */
export interface Relationship {
  id: string;
  tenant?: (string | null) | Tenant;
  title: string;
  relationship?: (string | null) | Relationship;
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "notTenanted".
 */
export interface NotTenanted {
  id: string;
  name?: string | null;
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "food-menu".
 */
export interface FoodMenu {
  id: string;
  tenant?: (string | null) | Tenant;
  title: string;
  description?: string | null;
  menuItems?:
    | {
        /**
         * Automatically filtered by selected tenant
         */
        menuItem: string | FoodItem;
        active?: boolean | null;
        id?: string | null;
      }[]
    | null;
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "autosave-global".
 */
export interface AutosaveGlobal {
  id: string;
  tenant?: (string | null) | Tenant;
  title: string;
  description?: string | null;
  updatedAt: string;
  createdAt: string;
  _status?: ('draft' | 'published') | null;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-kv".
 */
export interface PayloadKv {
  id: string;
  key: string;
  data:
    | {
        [k: string]: unknown;
      }
    | unknown[]
    | string
    | number
    | boolean
    | null;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-locked-documents".
 */
export interface PayloadLockedDocument {
  id: string;
  document?:
    | ({
        relationTo: 'tenants';
        value: string | Tenant;
      } | null)
    | ({
        relationTo: 'users';
        value: string | User;
      } | null)
    | ({
        relationTo: 'food-items';
        value: string | FoodItem;
      } | null)
    | ({
        relationTo: 'food-menu';
        value: string | FoodMenu;
      } | null)
    | ({
        relationTo: 'autosave-global';
        value: string | AutosaveGlobal;
      } | null)
    | ({
        relationTo: 'relationships';
        value: string | Relationship;
      } | null)
    | ({
        relationTo: 'notTenanted';
        value: string | NotTenanted;
      } | null);
  globalSlug?: string | null;
  user: {
    relationTo: 'users';
    value: string | User;
  };
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-preferences".
 */
export interface PayloadPreference {
  id: string;
  user: {
    relationTo: 'users';
    value: string | User;
  };
  key?: string | null;
  value?:
    | {
        [k: string]: unknown;
      }
    | unknown[]
    | string
    | number
    | boolean
    | null;
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-migrations".
 */
export interface PayloadMigration {
  id: string;
  name?: string | null;
  batch?: number | null;
  updatedAt: string;
  createdAt: string;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "tenants_select".
 */
export interface TenantsSelect<T extends boolean = true> {
  name?: T;
  domain?: T;
  users?: T;
  isPublic?: T;
  selectedLocales?: T;
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "users_select".
 */
export interface UsersSelect<T extends boolean = true> {
  roles?: T;
  tenants?:
    | T
    | {
        tenant?: T;
        id?: T;
      };
  updatedAt?: T;
  createdAt?: T;
  email?: T;
  resetPasswordToken?: T;
  resetPasswordExpiration?: T;
  salt?: T;
  hash?: T;
  loginAttempts?: T;
  lockUntil?: T;
  sessions?:
    | T
    | {
        id?: T;
        createdAt?: T;
        expiresAt?: T;
      };
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "food-items_select".
 */
export interface FoodItemsSelect<T extends boolean = true> {
  tenant?: T;
  name?: T;
  localizedName?: T;
  content?: T;
  polymorphicRelationship?: T;
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "food-menu_select".
 */
export interface FoodMenuSelect<T extends boolean = true> {
  tenant?: T;
  title?: T;
  description?: T;
  menuItems?:
    | T
    | {
        menuItem?: T;
        active?: T;
        id?: T;
      };
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "autosave-global_select".
 */
export interface AutosaveGlobalSelect<T extends boolean = true> {
  tenant?: T;
  title?: T;
  description?: T;
  updatedAt?: T;
  createdAt?: T;
  _status?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "relationships_select".
 */
export interface RelationshipsSelect<T extends boolean = true> {
  tenant?: T;
  title?: T;
  relationship?: T;
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "notTenanted_select".
 */
export interface NotTenantedSelect<T extends boolean = true> {
  name?: T;
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-kv_select".
 */
export interface PayloadKvSelect<T extends boolean = true> {
  key?: T;
  data?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-locked-documents_select".
 */
export interface PayloadLockedDocumentsSelect<T extends boolean = true> {
  document?: T;
  globalSlug?: T;
  user?: T;
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-preferences_select".
 */
export interface PayloadPreferencesSelect<T extends boolean = true> {
  user?: T;
  key?: T;
  value?: T;
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "payload-migrations_select".
 */
export interface PayloadMigrationsSelect<T extends boolean = true> {
  name?: T;
  batch?: T;
  updatedAt?: T;
  createdAt?: T;
}
/**
 * This interface was referenced by `Config`'s JSON-Schema
 * via the `definition` "auth".
 */
export interface Auth {
  [k: string]: unknown;
}


declare module 'payload' {
  // @ts-ignore 
  export interface GeneratedTypes extends Config {}
}
```

--------------------------------------------------------------------------------

---[FILE: shared.ts]---
Location: payload-main/test/plugin-multi-tenant/shared.ts

```typescript
export const tenantsSlug = 'tenants'

export const usersSlug = 'users'

export const menuItemsSlug = 'food-items'

export const menuSlug = 'food-menu'

export const autosaveGlobalSlug = 'autosave-global'

export const relationshipsSlug = 'relationships'

export const notTenantedSlug = 'notTenanted'
```

--------------------------------------------------------------------------------

---[FILE: tsconfig.eslint.json]---
Location: payload-main/test/plugin-multi-tenant/tsconfig.eslint.json

```json
{
  // extend your base config to share compilerOptions, etc
  //"extends": "./tsconfig.json",
  "compilerOptions": {
    // ensure that nobody can accidentally use this config for a build
    "noEmit": true
  },
  "include": [
    // whatever paths you intend to lint
    "./**/*.ts",
    "./**/*.tsx"
  ]
}
```

--------------------------------------------------------------------------------

---[FILE: tsconfig.json]---
Location: payload-main/test/plugin-multi-tenant/tsconfig.json

```json
{
  "extends": "../tsconfig.json"
}
```

--------------------------------------------------------------------------------

---[FILE: AutosaveGlobal.ts]---
Location: payload-main/test/plugin-multi-tenant/collections/AutosaveGlobal.ts

```typescript
import type { CollectionConfig } from 'payload'

import { autosaveGlobalSlug } from '../shared.js'

export const AutosaveGlobal: CollectionConfig = {
  slug: autosaveGlobalSlug,
  admin: {
    useAsTitle: 'title',
    group: 'Tenant Globals',
  },
  fields: [
    {
      name: 'title',
      label: 'Title',
      type: 'text',
      required: true,
    },
    {
      name: 'description',
      type: 'textarea',
    },
  ],
  versions: {
    drafts: {
      autosave: {
        interval: 100,
      },
    },
  },
}
```

--------------------------------------------------------------------------------

---[FILE: Menu.ts]---
Location: payload-main/test/plugin-multi-tenant/collections/Menu.ts

```typescript
import type { CollectionConfig } from 'payload'

import { menuItemsSlug, menuSlug } from '../shared.js'

export const Menu: CollectionConfig = {
  slug: menuSlug,
  admin: {
    useAsTitle: 'title',
    group: 'Tenant Globals',
  },
  fields: [
    {
      name: 'title',
      label: 'Title',
      type: 'text',
      required: true,
    },
    {
      name: 'description',
      type: 'textarea',
    },
    {
      name: 'menuItems',
      label: 'Menu Items',
      type: 'array',
      fields: [
        {
          name: 'menuItem',
          label: 'Menu Item',
          type: 'relationship',
          relationTo: menuItemsSlug,
          required: true,
          admin: {
            description: 'Automatically filtered by selected tenant',
          },
        },
        {
          name: 'active',
          type: 'checkbox',
        },
      ],
    },
  ],
}
```

--------------------------------------------------------------------------------

---[FILE: MenuItems.ts]---
Location: payload-main/test/plugin-multi-tenant/collections/MenuItems.ts

```typescript
import type { Access, CollectionConfig, Where } from 'payload'

import { getUserTenantIDs } from '@payloadcms/plugin-multi-tenant/utilities'

import { menuItemsSlug, notTenantedSlug, relationshipsSlug } from '../shared.js'

const collectionTenantReadAccess: Access = ({ req }) => {
  // admins can access all tenants
  if (req?.user?.roles?.includes('admin')) {
    return true
  }

  if (req.user) {
    const assignedTenants = getUserTenantIDs(req.user, {
      tenantsArrayFieldName: 'tenants',
      tenantsArrayTenantFieldName: 'tenant',
    })

    // if the user has assigned tenants, add id constraint
    if (assignedTenants.length > 0) {
      return {
        or: [
          {
            tenant: {
              in: assignedTenants,
            },
          },
          {
            'tenant.isPublic': {
              equals: true,
            },
          },
        ],
      }
    }
  }

  // if the user has no assigned tenants, return a filter that allows access to public tenants
  return {
    'tenant.isPublic': {
      equals: true,
    },
  } as Where
}

const collectionTenantUpdateAndDeleteAccess: Access = ({ req }) => {
  // admins can update all tenants
  if (req?.user?.roles?.includes('admin')) {
    return true
  }

  if (req.user) {
    const assignedTenants = getUserTenantIDs(req.user, {
      tenantsArrayFieldName: 'tenants',
      tenantsArrayTenantFieldName: 'tenant',
    })

    // if the user has assigned tenants, add id constraint
    if (assignedTenants.length > 0) {
      return {
        tenant: {
          in: assignedTenants,
        },
      }
    }
  }

  return false
}

export const MenuItems: CollectionConfig = {
  slug: menuItemsSlug,
  access: {
    read: collectionTenantReadAccess,
    create: ({ req }) => {
      return Boolean(req?.user?.roles?.includes('admin') || req.user?.tenants?.length)
    },
    update: collectionTenantUpdateAndDeleteAccess,
    delete: collectionTenantUpdateAndDeleteAccess,
  },
  admin: {
    useAsTitle: 'name',
    group: 'Tenant Collections',
  },
  fields: [
    {
      name: 'name',
      type: 'text',
      required: true,
    },
    {
      name: 'localizedName',
      type: 'text',
      localized: true,
    },
    {
      name: 'content',
      type: 'richText',
    },
    {
      name: 'polymorphicRelationship',
      type: 'relationship',
      relationTo: [relationshipsSlug, menuItemsSlug, notTenantedSlug],
      admin: {
        appearance: 'drawer',
      },
    },
  ],
}
```

--------------------------------------------------------------------------------

---[FILE: Relationships.ts]---
Location: payload-main/test/plugin-multi-tenant/collections/Relationships.ts

```typescript
import type { CollectionConfig } from 'payload'

import { relationshipsSlug } from '../shared.js'

export const Relationships: CollectionConfig = {
  slug: relationshipsSlug,
  admin: {
    useAsTitle: 'title',
    group: 'Tenant Collections',
  },
  fields: [
    {
      name: 'title',
      type: 'text',
      required: true,
    },
    {
      name: 'relationship',
      type: 'relationship',
      relationTo: relationshipsSlug,
    },
  ],
}
```

--------------------------------------------------------------------------------

---[FILE: Tenants.ts]---
Location: payload-main/test/plugin-multi-tenant/collections/Tenants.ts

```typescript
import type { Access, CollectionConfig, Where } from 'payload'

import { getUserTenantIDs } from '@payloadcms/plugin-multi-tenant/utilities'

import { tenantsSlug } from '../shared.js'

const tenantAccess: Access = ({ req }) => {
  // admins can access all tenants
  if (req?.user?.roles?.includes('admin')) {
    return true
  }

  if (req.user) {
    const assignedTenants = getUserTenantIDs(req.user, {
      tenantsArrayFieldName: 'tenants',
      tenantsArrayTenantFieldName: 'tenant',
    })

    // if the user has assigned tenants, add id constraint
    if (assignedTenants.length > 0) {
      return {
        or: [
          {
            id: {
              in: assignedTenants,
            },
          },
          {
            isPublic: {
              equals: true,
            },
          },
        ],
      }
    }
  }

  // if the user has no assigned tenants, return a filter that allows access to public tenants
  return {
    isPublic: {
      equals: true,
    },
  } as Where
}

export const Tenants: CollectionConfig = {
  slug: tenantsSlug,
  access: {
    read: tenantAccess,
    create: tenantAccess,
    update: tenantAccess,
    delete: tenantAccess,
  },
  labels: {
    singular: 'Tenant',
    plural: 'Tenants',
  },
  admin: {
    useAsTitle: 'name',
    group: 'Administrative',
  },
  fields: [
    {
      name: 'name',
      label: 'Name',
      type: 'text',
      required: true,
    },
    {
      name: 'domain',
      type: 'text',
      required: true,
    },
    {
      type: 'join',
      name: 'users',
      collection: 'users',
      on: 'tenants.tenant',
    },
    {
      name: 'isPublic',
      type: 'checkbox',
      label: 'Public Tenant',
    },
    {
      name: 'selectedLocales',
      type: 'select',
      hasMany: true,
      defaultValue: ['allLocales'],
      options: [
        {
          label: 'All Locales',
          value: 'allLocales',
        },
        {
          label: 'English',
          value: 'en',
        },
        {
          label: 'Spanish',
          value: 'es',
        },
        {
          label: 'French',
          value: 'fr',
        },
      ],
    },
  ],
}
```

--------------------------------------------------------------------------------

---[FILE: filterOptions.ts]---
Location: payload-main/test/plugin-multi-tenant/collections/Users/filterOptions.ts

```typescript
import type { FilterOptions } from 'payload'

import { getTenantFromCookie } from '@payloadcms/plugin-multi-tenant/utilities'

export const userFilterOptions: FilterOptions = ({ req }) => {
  const selectedTenant = getTenantFromCookie(req.headers, req.payload.db.defaultIDType)
  if (!selectedTenant) {
    return false
  }

  return {
    'tenants.tenant': {
      equals: selectedTenant,
    },
  }
}
```

--------------------------------------------------------------------------------

---[FILE: index.ts]---
Location: payload-main/test/plugin-multi-tenant/collections/Users/index.ts

```typescript
import type { CollectionConfig } from 'payload'

import { usersSlug } from '../../shared.js'

export const Users: CollectionConfig = {
  slug: usersSlug,
  auth: true,
  admin: {
    useAsTitle: 'email',
    group: 'Administrative',
  },
  access: {
    read: () => true,
  },
  fields: [
    // Email added by default
    // Add more fields as needed
    {
      type: 'select',
      name: 'roles',
      hasMany: true,
      options: [
        {
          label: 'Admin',
          value: 'admin',
        },
        {
          label: 'User',
          value: 'user',
        },
      ],
      saveToJWT: true,
    },
  ],
}
```

--------------------------------------------------------------------------------

---[FILE: index.scss]---
Location: payload-main/test/plugin-multi-tenant/components/BeforeLogin/index.scss

```text
.before-login {
  margin-bottom: calc(var(--base) * 1.5);

  &__title {
    margin-bottom: calc(var(--base) / 2);
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--theme-elevation-800);
  }

  &__description {
    margin-bottom: var(--base);
    font-size: 0.9rem;
    color: var(--theme-elevation-600);
  }

  &__buttons {
    display: flex;
    flex-direction: column;
    gap: calc(var(--base) * 0.75);
  }

  &__button {
    padding: calc(var(--base) * 0.5) calc(var(--base) * 0.75);
    border: 1px solid var(--theme-elevation-150);
    border-radius: 4px;
    background-color: var(--theme-elevation-0);
    cursor: pointer;
    text-align: left;
    transition: all 0.2s;

    &:hover:not(:disabled) {
      background-color: var(--theme-success-50);
      border-color: var(--theme-success-250);
    }

    &:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }

    &--loading {
      background-color: var(--theme-elevation-50);
    }
  }

  &__button-name {
    font-weight: 600;
    margin-bottom: calc(var(--base) / 4);
    color: var(--theme-elevation-800);
  }

  &__button-details {
    font-size: 0.85rem;
    color: var(--theme-elevation-600);
  }

  &__error {
    margin-top: var(--base);
    padding: calc(var(--base) * 0.75);
    background-color: var(--theme-error-50);
    border: 1px solid var(--theme-error-200);
    border-radius: 4px;
    color: var(--theme-error-600);
    font-size: 0.9rem;
  }
}
```

--------------------------------------------------------------------------------

---[FILE: index.tsx]---
Location: payload-main/test/plugin-multi-tenant/components/BeforeLogin/index.tsx
Signals: React

```typescript
'use client'

import type { PayloadClientReactComponent, SanitizedConfig } from 'payload'

import { useAuth, useRouteCache } from '@payloadcms/ui'
import React, { useState } from 'react'

import { credentials } from '../../credentials.js'
import './index.scss'

const baseClass = 'before-login'

const testUsers = [
  {
    name: 'Admin (All Tenants)',
    ...credentials.admin,
  },
  {
    name: 'Blue Dog User',
    ...credentials.blueDog,
  },
  {
    name: 'Multi-Tenant Owner',
    ...credentials.owner,
  },
  {
    name: 'Steel Cat User',
    ...credentials.steelCat,
  },
]

export const BeforeLogin: PayloadClientReactComponent<
  SanitizedConfig['admin']['components']['beforeLogin'][0]
> = () => {
  const { setUser } = useAuth()
  const [loading, setLoading] = useState<null | string>(null)
  const [error, setError] = useState<null | string>(null)
  const { clearRouteCache } = useRouteCache()

  const login = React.useCallback(
    async (credentials: { email: string; password: string }) => {
      const response = await fetch('/api/users/login', {
        body: JSON.stringify(credentials),
        headers: {
          'Content-Type': 'application/json',
        },
        method: 'POST',
      })

      if (!response.ok) {
        throw new Error(`Login failed with status ${response.status}`)
      }

      const data = await response.json()
      setUser(data)
      clearRouteCache()
    },
    [setUser, clearRouteCache],
  )

  const handleQuickLogin = async (email: string, password: string) => {
    setLoading(email)
    setError(null)
    try {
      await login({ email, password })
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Login failed')
      setLoading(null)
    }
  }

  return (
    <div className={baseClass}>
      <h3 className={`${baseClass}__title`}>Multi-Tenant Test Users</h3>
      <p className={`${baseClass}__description`}>
        Quick login for testing different tenant access patterns
      </p>
      <div className={`${baseClass}__buttons`}>
        {testUsers.map((user) => (
          <button
            className={`${baseClass}__button ${loading === user.email ? `${baseClass}__button--loading` : ''}`}
            disabled={loading !== null}
            key={user.email}
            onClick={() => handleQuickLogin(user.email, user.password)}
            type="button"
          >
            <div className={`${baseClass}__button-name`}>
              {loading === user.email ? 'Logging in...' : user.email}
            </div>
            <div className={`${baseClass}__button-details`}>{user.name}</div>
          </button>
        ))}
      </div>
      {error && <div className={`${baseClass}__error`}>{error}</div>}
    </div>
  )
}
```

--------------------------------------------------------------------------------

---[FILE: index.tsx]---
Location: payload-main/test/plugin-multi-tenant/components/Icon/index.tsx

```typescript
import './styles.css'

export function Icon() {
  return <div id="tenant-icon" />
}
```

--------------------------------------------------------------------------------

---[FILE: styles.css]---
Location: payload-main/test/plugin-multi-tenant/components/Icon/styles.css

```text
#tenant-icon {
  border-radius: 100%;
  height: 18px;
  width: 18px;
  background-color: var(--theme-error-400);
}

[data-selected-tenant-title="Blue Dog"] #tenant-icon {
  background-color: var(--theme-success-300);
}

[data-selected-tenant-title="Steel Cat"] #tenant-icon {
  background-color: var(--theme-warning-300);
}
```

--------------------------------------------------------------------------------

---[FILE: index.tsx]---
Location: payload-main/test/plugin-multi-tenant/components/Logo/index.tsx

```typescript
import './styles.css'

export function Logo() {
  return <div id="tenant-logo" />
}
```

--------------------------------------------------------------------------------

---[FILE: styles.css]---
Location: payload-main/test/plugin-multi-tenant/components/Logo/styles.css

```text
#tenant-logo {
  border-radius: 100%;
  height: 18px;
  width: 18px;
  background-color: var(--theme-error-400);
}

[data-selected-tenant-title="Blue Dog"] #tenant-logo {
  background-color: var(--theme-success-300);
}

[data-selected-tenant-title="Steel Cat"] #tenant-logo {
  background-color: var(--theme-warning-300);
}
```

--------------------------------------------------------------------------------

---[FILE: index.ts]---
Location: payload-main/test/plugin-multi-tenant/seed/index.ts

```typescript
import type { Config, Payload } from 'payload'

import { credentials } from '../credentials.js'
import { menuItemsSlug, menuSlug, tenantsSlug, usersSlug } from '../shared.js'

const deleteAll = async (payload: Payload) => {
  await payload.delete({
    collection: tenantsSlug,
    where: {},
  })
  await payload.delete({
    collection: usersSlug,
    where: {},
  })
  await payload.delete({
    collection: menuItemsSlug,
    where: {},
  })
  await payload.delete({
    collection: menuSlug,
    where: {},
  })
}

export const seed: Config['onInit'] = async (payload) => {
  await deleteAll(payload)

  // create tenants
  const blueDogTenant = await payload.create({
    collection: tenantsSlug,
    data: {
      name: 'Blue Dog',
      domain: 'bluedog.com',
    },
  })
  const steelCatTenant = await payload.create({
    collection: tenantsSlug,
    data: {
      name: 'Steel Cat',
      domain: 'steelcat.com',
    },
  })
  const anchorBarTenant = await payload.create({
    collection: tenantsSlug,
    data: {
      name: 'Anchor Bar',
      domain: 'anchorbar.com',
      selectedLocales: ['en'],
    },
  })
  const publicTenant = await payload.create({
    collection: tenantsSlug,
    data: {
      name: 'Public Tenant',
      domain: 'public.com',
      isPublic: true,
    },
  })

  // Create blue dog menu items
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Chorizo Con Queso and Chips',
      tenant: blueDogTenant.id,
    },
  })
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Garlic Parmesan Tots',
      tenant: blueDogTenant.id,
    },
  })
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Spicy Mac',
      tenant: blueDogTenant.id,
    },
  })

  await payload.create({
    collection: 'relationships',
    data: {
      title: 'Owned by blue dog',
      tenant: blueDogTenant.id,
    },
  })

  await payload.create({
    collection: 'relationships',
    data: {
      title: 'Owned by steelcat',
      tenant: steelCatTenant.id,
    },
  })

  await payload.create({
    collection: 'relationships',
    data: {
      title: 'Owned by bar with no ac',
      tenant: anchorBarTenant.id,
    },
  })

  await payload.create({
    collection: 'relationships',
    data: {
      title: 'Owned by public tenant',
      tenant: publicTenant.id,
    },
  })

  // Create steel cat menu items
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Pretzel Bites',
      tenant: steelCatTenant.id,
    },
  })
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Buffalo Chicken Dip',
      tenant: steelCatTenant.id,
    },
  })
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Pulled Pork Nachos',
      tenant: steelCatTenant.id,
    },
  })

  // Create anchor bar menu items
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Peanuts',
      tenant: anchorBarTenant.id,
      localizedName: 'Peanuts EN',
    },
    locale: 'en',
  })
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Pretzels',
      tenant: anchorBarTenant.id,
      localizedName: 'Pretzels EN',
    },
    locale: 'en',
  })
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Popcorn',
      tenant: anchorBarTenant.id,
      localizedName: 'Popcorn EN',
    },
    locale: 'en',
  })

  // Public tenant menu items
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Free Pizza',
      tenant: publicTenant.id,
    },
  })
  await payload.create({
    collection: menuItemsSlug,
    data: {
      name: 'Free Dogs',
      tenant: publicTenant.id,
    },
  })

  // create users
  await payload.create({
    collection: usersSlug,
    data: {
      ...credentials.admin,
      roles: ['admin'],
    },
  })

  await payload.create({
    collection: usersSlug,
    data: {
      ...credentials.blueDog,
      roles: ['user'],
      tenants: [
        {
          tenant: blueDogTenant.id,
        },
      ],
    },
  })

  await payload.create({
    collection: usersSlug,
    data: {
      ...credentials.owner,
      roles: ['user'],
      tenants: [
        {
          tenant: anchorBarTenant.id,
        },
        {
          tenant: blueDogTenant.id,
        },
      ],
    },
  })

  // create menus
  await payload.create({
    collection: menuSlug,
    data: {
      description: 'This collection behaves like globals, 1 document per tenant. No list view.',
      title: 'Blue Dog Menu',
      tenant: blueDogTenant.id,
    },
  })
  await payload.create({
    collection: menuSlug,
    data: {
      description: 'This collection behaves like globals, 1 document per tenant. No list view.',
      title: 'Steel Cat Menu',
      tenant: steelCatTenant.id,
    },
  })

  await payload.create({
    collection: usersSlug,
    data: {
      ...credentials.steelCat,
      roles: ['user'],
      tenants: [
        {
          tenant: steelCatTenant.id,
        },
      ],
    },
  })
}
```

--------------------------------------------------------------------------------

---[FILE: config.ts]---
Location: payload-main/test/plugin-nested-docs/config.ts

```typescript
import { fileURLToPath } from 'node:url'
import path from 'path'
const filename = fileURLToPath(import.meta.url)
const dirname = path.dirname(filename)
import { nestedDocsPlugin } from '@payloadcms/plugin-nested-docs'

import { buildConfigWithDefaults } from '../buildConfigWithDefaults.js'
import { devUser } from '../credentials.js'
import { Categories } from './collections/Categories.js'
import { Pages } from './collections/Pages.js'
import { Users } from './collections/Users.js'
import { seed } from './seed/index.js'

export default buildConfigWithDefaults({
  admin: {
    importMap: {
      baseDir: path.resolve(dirname),
    },
  },
  collections: [Pages, Categories, Users],
  localization: {
    defaultLocale: 'en',
    fallback: true,
    locales: ['en', 'es', 'de'],
  },
  onInit: async (payload) => {
    await payload.create({
      collection: 'users',
      data: {
        email: devUser.email,
        password: devUser.password,
      },
    })

    await seed(payload)
  },
  plugins: [
    nestedDocsPlugin({
      collections: ['pages'],
      generateLabel: (_, doc) => doc.title as string,
      generateURL: (docs) => docs.reduce((url, doc) => `${url}/${doc.slug}`, ''),
    }),
    nestedDocsPlugin({
      breadcrumbsFieldSlug: 'categorization',
      collections: ['categories'],
      generateLabel: (_, doc) => doc.name as string,
      generateURL: (docs) => docs.reduce((url, doc) => `${url}/${doc.name}`, ''),
      parentFieldSlug: 'owner',
    }),
  ],
  typescript: {
    outputFile: path.resolve(dirname, 'payload-types.ts'),
  },
})
```

--------------------------------------------------------------------------------

````
