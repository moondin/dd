---
source_txt: user_created_projects/vscode-main
converted_utc: 2025-12-18T18:22:25Z
part: 7
parts_total: 552
---

# FULLSTACK CODE DATABASE USER CREATED vscode-main

## Verbatim Content (Part 7 of 552)

````text
================================================================================
FULLSTACK USER CREATED CODE DATABASE (VERBATIM) - vscode-main
================================================================================
Generated: December 18, 2025
Source: user_created_projects/vscode-main
================================================================================

NOTES:
- This output is verbatim because the source is user-owned.
- Large/binary files may be skipped by size/binary detection limits.

================================================================================

---[FILE: .vscode/searches/no-any-casts.code-search]---
Location: vscode-main/.vscode/searches/no-any-casts.code-search

```text
# Query: // eslint-disable-next-line (local/code-no-any-casts|@typescript-eslint/no-explicit-any)
# Flags: RegExp

727 results - 269 files

.eslint-plugin-local/code-policy-localization-key-match.ts:
  123: 					// eslint-disable-next-line local/code-no-any-casts

build/gulpfile.reh.ts:
  187: 	// eslint-disable-next-line local/code-no-any-casts

extensions/html-language-features/server/src/htmlServer.ts:
  544: 		// eslint-disable-next-line local/code-no-any-casts

extensions/markdown-language-features/notebook/index.ts:
  383: 		// eslint-disable-next-line local/code-no-any-casts

extensions/markdown-language-features/preview-src/index.ts:
   26: // eslint-disable-next-line local/code-no-any-casts
  253: 				// eslint-disable-next-line local/code-no-any-casts
  444: 				// eslint-disable-next-line local/code-no-any-casts

extensions/markdown-language-features/src/markdownEngine.ts:
  146: 				// eslint-disable-next-line local/code-no-any-casts

extensions/markdown-language-features/src/languageFeatures/diagnostics.ts:
  54: 					// eslint-disable-next-line local/code-no-any-casts

scripts/playground-server.ts:
  257: 		// eslint-disable-next-line local/code-no-any-casts
  336: 				// eslint-disable-next-line local/code-no-any-casts
  352: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/base/browser/dom.ts:
   718: 		// eslint-disable-next-line local/code-no-any-casts
  1325: 				// eslint-disable-next-line local/code-no-any-casts
  1520: 			// eslint-disable-next-line local/code-no-any-casts
  1660: 	// eslint-disable-next-line local/code-no-any-casts
  2013: 		// eslint-disable-next-line local/code-no-any-casts
  2116: 		// eslint-disable-next-line local/code-no-any-casts
  2128: 	// eslint-disable-next-line local/code-no-any-casts
  2291: 			// eslint-disable-next-line local/code-no-any-casts
  2297: 		// eslint-disable-next-line local/code-no-any-casts
  2325: 		// eslint-disable-next-line local/code-no-any-casts
  2437: 						// eslint-disable-next-line local/code-no-any-casts
  2444: 				// eslint-disable-next-line local/code-no-any-casts
  2566: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/browser/mouseEvent.ts:
  100: 		// eslint-disable-next-line local/code-no-any-casts
  138: 		// eslint-disable-next-line local/code-no-any-casts
  155: 			// eslint-disable-next-line local/code-no-any-casts
  157: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/browser/trustedTypes.ts:
  27: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/base/browser/ui/grid/grid.ts:
   66: 	// eslint-disable-next-line local/code-no-any-casts
  873: 	// eslint-disable-next-line local/code-no-any-casts
  875: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/browser/ui/grid/gridview.ts:
  196: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/browser/ui/sash/sash.ts:
  491: 		// eslint-disable-next-line local/code-no-any-casts
  497: 				// eslint-disable-next-line local/code-no-any-casts
  503: 		// eslint-disable-next-line local/code-no-any-casts
  505: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/console.ts:
  134: 	// eslint-disable-next-line local/code-no-any-casts
  138: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/decorators.ts:
  57: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/errors.ts:
  142: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/hotReload.ts:
  102: 							// eslint-disable-next-line local/code-no-any-casts
  109: 							// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/hotReloadHelpers.ts:
  39: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/lifecycle.ts:
  239: 				// eslint-disable-next-line local/code-no-any-casts
  249: 					// eslint-disable-next-line local/code-no-any-casts
  260: 					// eslint-disable-next-line local/code-no-any-casts
  320: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/marshalling.ts:
  53: 			// eslint-disable-next-line local/code-no-any-casts
  55: 			// eslint-disable-next-line local/code-no-any-casts
  57: 			// eslint-disable-next-line local/code-no-any-casts
  65: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/strings.ts:
  26: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/base/common/types.ts:
   65: 	// eslint-disable-next-line local/code-no-any-casts
   73: 	// eslint-disable-next-line local/code-no-any-casts
  275: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/validation.ts:
  149: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  165: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  285: 				// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/base/common/verifier.ts:
  82: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/marked/marked.js:
  2344:         // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/base/common/observableInternal/changeTracker.ts:
  34: 			// eslint-disable-next-line local/code-no-any-casts
  42: 					// eslint-disable-next-line local/code-no-any-casts
  69: 			// eslint-disable-next-line local/code-no-any-casts
  80: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/set.ts:
  51: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/experimental/reducer.ts:
  39: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/logging/consoleObservableLogger.ts:
  80: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/logging/debugger/debuggerRpc.ts:
  12: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/logging/debugger/rpc.ts:
  94: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/observables/derived.ts:
   38: 		// eslint-disable-next-line local/code-no-any-casts
   40: 		// eslint-disable-next-line local/code-no-any-casts
  124: 		// eslint-disable-next-line local/code-no-any-casts
  129: 		// eslint-disable-next-line local/code-no-any-casts
  160: 		// eslint-disable-next-line local/code-no-any-casts
  165: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/observables/derivedImpl.ts:
  313: 					// eslint-disable-next-line local/code-no-any-casts
  412: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/observables/observableFromEvent.ts:
  151: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/reactions/autorunImpl.ts:
  185: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/observableInternal/utils/utilsCancellation.ts:
  78: 		// eslint-disable-next-line local/code-no-any-casts
  83: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/common/worker/webWorker.ts:
  430: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/base/parts/ipc/test/node/ipc.net.test.ts:
   87: 		// eslint-disable-next-line local/code-no-any-casts
   92: 		// eslint-disable-next-line local/code-no-any-casts
  652: 		// eslint-disable-next-line local/code-no-any-casts
  785: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/buffer.test.ts:
  515: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/decorators.test.ts:
  130: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/filters.test.ts:
  28: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/glob.test.ts:
  497: 			// eslint-disable-next-line local/code-no-any-casts
  518: 			// eslint-disable-next-line local/code-no-any-casts
  763: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/json.test.ts:
  52: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/mock.ts:
  14: 	// eslint-disable-next-line local/code-no-any-casts
  23: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/oauth.test.ts:
  1100: 			// eslint-disable-next-line local/code-no-any-casts
  1743: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/snapshot.ts:
  123: 			// eslint-disable-next-line local/code-no-any-casts
  125: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/timeTravelScheduler.ts:
  276: 	// eslint-disable-next-line local/code-no-any-casts
  286: 	// eslint-disable-next-line local/code-no-any-casts
  319: 		// eslint-disable-next-line local/code-no-any-casts
  325: 			// eslint-disable-next-line local/code-no-any-casts
  341: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/base/test/common/troubleshooting.ts:
  50: 	// eslint-disable-next-line local/code-no-any-casts
  55: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/browser/config/editorConfiguration.ts:
  147: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/controller/mouseTarget.ts:
   993: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   997: 				// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  1001: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  1044: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  1097: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  1100: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  1120: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/controller/editContext/native/nativeEditContextUtils.ts:
  81: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  85: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/gpu/gpuUtils.ts:
  52: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/gpu/viewGpuContext.ts:
  226: 							// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/viewParts/contentWidgets/contentWidgets.ts:
  625: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/editor/browser/widget/diffEditor/diffEditorOptions.ts:
  179: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/widget/diffEditor/diffEditorWidget.ts:
  480: 				// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/widget/diffEditor/utils.ts:
  184: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  192: 			// eslint-disable-next-line @typescript-eslint/no-explicit-any
  195: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  303: 				// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  310: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/widget/diffEditor/components/diffEditorEditors.ts:
  75: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate.ts:
  100: 						// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  103: 						// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/common/textModelEditSource.ts:
  59: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  68: // eslint-disable-next-line @typescript-eslint/no-explicit-any
  70: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/common/config/editorOptions.ts:
  6812: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/editor/common/core/edits/edit.ts:
  10: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/editor/common/core/edits/stringEdit.ts:
   12: // eslint-disable-next-line @typescript-eslint/no-explicit-any
   24: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  193: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/length.ts:
   26: // eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   30: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   51: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   56: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   64: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   72: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   80: // eslint-disable-next-line @typescript-eslint/no-explicit-any
   99: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  101: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  126: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  131: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  136: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  141: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  153: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  158: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  175: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  177: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  196: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/smallImmutableSet.ts:
  13: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  30: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/editor/contrib/colorPicker/browser/colorDetector.ts:
  100: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/documentSymbols/test/browser/outlineModel.test.ts:
  200: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/editorState/test/browser/editorState.test.ts:
  97: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/find/browser/findModel.ts:
  556: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/find/test/browser/findController.test.ts:
  79: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/browser/structuredLogger.ts:
  56: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/browser/model/inlineCompletionsModel.ts:
  644: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/browser/view/ghostText/ghostTextView.ts:
  173: 						// eslint-disable-next-line local/code-no-any-casts
  195: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/components/gutterIndicatorView.ts:
  505: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/inlineEditsViews/debugVisualization.ts:
  15: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/test/browser/computeGhostText.test.ts:
  23: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/test/browser/suggestWidgetModel.test.ts:
  164: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/inlineCompletions/test/browser/utils.ts:
  244: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.ts:
  794: 		// eslint-disable-next-line local/code-no-any-casts
  813: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/standalone/browser/standaloneEditor.ts:
  505: 		// eslint-disable-next-line local/code-no-any-casts
  507: 		// eslint-disable-next-line local/code-no-any-casts
  509: 		// eslint-disable-next-line local/code-no-any-casts
  511: 		// eslint-disable-next-line local/code-no-any-casts
  513: 		// eslint-disable-next-line local/code-no-any-casts
  515: 		// eslint-disable-next-line local/code-no-any-casts
  518: 		// eslint-disable-next-line local/code-no-any-casts
  520: 		// eslint-disable-next-line local/code-no-any-casts
  522: 		// eslint-disable-next-line local/code-no-any-casts
  524: 		// eslint-disable-next-line local/code-no-any-casts
  527: 		// eslint-disable-next-line local/code-no-any-casts
  529: 		// eslint-disable-next-line local/code-no-any-casts
  531: 		// eslint-disable-next-line local/code-no-any-casts
  533: 		// eslint-disable-next-line local/code-no-any-casts
  536: 		// eslint-disable-next-line local/code-no-any-casts
  538: 		// eslint-disable-next-line local/code-no-any-casts
  540: 		// eslint-disable-next-line local/code-no-any-casts
  542: 		// eslint-disable-next-line local/code-no-any-casts
  544: 		// eslint-disable-next-line local/code-no-any-casts
  546: 		// eslint-disable-next-line local/code-no-any-casts
  550: 		// eslint-disable-next-line local/code-no-any-casts
  552: 		// eslint-disable-next-line local/code-no-any-casts
  554: 		// eslint-disable-next-line local/code-no-any-casts
  556: 		// eslint-disable-next-line local/code-no-any-casts
  558: 		// eslint-disable-next-line local/code-no-any-casts
  560: 		// eslint-disable-next-line local/code-no-any-casts
  562: 		// eslint-disable-next-line local/code-no-any-casts
  568: 		// eslint-disable-next-line local/code-no-any-casts
  600: 		// eslint-disable-next-line local/code-no-any-casts
  602: 		// eslint-disable-next-line local/code-no-any-casts
  604: 		// eslint-disable-next-line local/code-no-any-casts
  606: 		// eslint-disable-next-line local/code-no-any-casts
  608: 		// eslint-disable-next-line local/code-no-any-casts
  610: 		// eslint-disable-next-line local/code-no-any-casts
  612: 		// eslint-disable-next-line local/code-no-any-casts
  615: 		// eslint-disable-next-line local/code-no-any-casts
  620: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/standalone/browser/standaloneLanguages.ts:
  753: 		// eslint-disable-next-line local/code-no-any-casts
  755: 		// eslint-disable-next-line local/code-no-any-casts
  757: 		// eslint-disable-next-line local/code-no-any-casts
  759: 		// eslint-disable-next-line local/code-no-any-casts
  761: 		// eslint-disable-next-line local/code-no-any-casts
  765: 		// eslint-disable-next-line local/code-no-any-casts
  768: 		// eslint-disable-next-line local/code-no-any-casts
  770: 		// eslint-disable-next-line local/code-no-any-casts
  772: 		// eslint-disable-next-line local/code-no-any-casts
  774: 		// eslint-disable-next-line local/code-no-any-casts
  776: 		// eslint-disable-next-line local/code-no-any-casts
  778: 		// eslint-disable-next-line local/code-no-any-casts
  780: 		// eslint-disable-next-line local/code-no-any-casts
  782: 		// eslint-disable-next-line local/code-no-any-casts
  784: 		// eslint-disable-next-line local/code-no-any-casts
  786: 		// eslint-disable-next-line local/code-no-any-casts
  788: 		// eslint-disable-next-line local/code-no-any-casts
  790: 		// eslint-disable-next-line local/code-no-any-casts
  792: 		// eslint-disable-next-line local/code-no-any-casts
  794: 		// eslint-disable-next-line local/code-no-any-casts
  796: 		// eslint-disable-next-line local/code-no-any-casts
  798: 		// eslint-disable-next-line local/code-no-any-casts
  800: 		// eslint-disable-next-line local/code-no-any-casts
  802: 		// eslint-disable-next-line local/code-no-any-casts
  804: 		// eslint-disable-next-line local/code-no-any-casts
  806: 		// eslint-disable-next-line local/code-no-any-casts
  808: 		// eslint-disable-next-line local/code-no-any-casts
  810: 		// eslint-disable-next-line local/code-no-any-casts
  812: 		// eslint-disable-next-line local/code-no-any-casts
  814: 		// eslint-disable-next-line local/code-no-any-casts
  816: 		// eslint-disable-next-line local/code-no-any-casts
  818: 		// eslint-disable-next-line local/code-no-any-casts
  820: 		// eslint-disable-next-line local/code-no-any-casts
  822: 		// eslint-disable-next-line local/code-no-any-casts
  824: 		// eslint-disable-next-line local/code-no-any-casts
  849: 		// eslint-disable-next-line local/code-no-any-casts
  851: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/standalone/common/monarch/monarchCompile.ts:
  461: 	// eslint-disable-next-line local/code-no-any-casts
  539: 	// eslint-disable-next-line local/code-no-any-casts
  556: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/test/browser/testCodeEditor.ts:
  279: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/test/browser/config/editorConfiguration.test.ts:
  90: 			// eslint-disable-next-line local/code-no-any-casts
  99: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/test/common/model/textModel.test.ts:
  1167: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/editor/test/common/model/textModelWithTokens.test.ts:
  272: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/contextkey/common/contextkey.ts:
  939: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/contextkey/test/common/contextkey.test.ts:
  96: 			// eslint-disable-next-line local/code-no-any-casts
  98: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/domWidget/browser/domWidget.ts:
  132: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  152: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/platform/environment/test/node/argv.test.ts:
  47: 				// eslint-disable-next-line local/code-no-any-casts
  59: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/extensionManagement/common/extensionGalleryManifestServiceIpc.ts:
  37: 			// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/platform/extensionManagement/common/extensionManagementIpc.ts:
   64: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  113: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  348: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  353: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/platform/extensionRecommendations/common/extensionRecommendationsIpc.ts:
  36: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  41: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/platform/files/browser/htmlFileSystemProvider.ts:
  311: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/platform/files/test/node/diskFileService.integrationTest.ts:
  106: 			// eslint-disable-next-line local/code-no-any-casts
  109: 			// eslint-disable-next-line local/code-no-any-casts
  112: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/instantiation/common/instantiationService.ts:
  321: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/ipc/electron-browser/services.ts:
  13: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/platform/list/browser/listService.ts:
   877: 		// eslint-disable-next-line local/code-no-any-casts
   918: 		// eslint-disable-next-line local/code-no-any-casts
   965: 		// eslint-disable-next-line local/code-no-any-casts
  1012: 		// eslint-disable-next-line local/code-no-any-casts
  1057: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/observable/common/wrapInHotClass.ts:
  12: 		// eslint-disable-next-line local/code-no-any-casts
  40: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/observable/common/wrapInReloadableClass.ts:
  31: 	// eslint-disable-next-line local/code-no-any-casts
  58: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/profiling/common/profilingTelemetrySpec.ts:
  73: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/quickinput/browser/tree/quickTree.ts:
  82: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/platform/quickinput/common/quickAccess.ts:
  172: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/platform/quickinput/test/browser/quickinput.test.ts:
  69: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/remote/browser/browserSocketFactory.ts:
  89: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/remote/common/remoteAgentConnection.ts:
  801: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/remote/test/electron-browser/remoteAuthorityResolverService.test.ts:
  19: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/request/electron-utility/requestService.ts:
  15: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/storage/electron-main/storageIpc.ts:
   74: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  102: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/platform/terminal/node/terminalProcess.ts:
  547: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/platform/webContentExtractor/test/electron-main/cdpAccessibilityDomain.test.ts:
  22: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/platform/webContentExtractor/test/electron-main/webPageLoader.test.ts:
  95: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/server/node/extensionHostConnection.ts:
  243: 			// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/server/node/remoteExtensionHostAgentServer.ts:
  767: 	// eslint-disable-next-line local/code-no-any-casts
  769: 	// eslint-disable-next-line local/code-no-any-casts
  771: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/server/node/remoteTerminalChannel.ts:
  112: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/workbench.web.main.internal.ts:
  196: // eslint-disable-next-line local/code-no-any-casts
  221: 	// eslint-disable-next-line local/code-no-any-casts
  223: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/workbench.web.main.ts:
  58: 	// eslint-disable-next-line local/code-no-any-casts
  60: 	// eslint-disable-next-line local/code-no-any-casts
  82: 		// eslint-disable-next-line local/code-no-any-casts
  91: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/browser/mainThreadExtensionService.ts:
  57: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/api/browser/mainThreadLanguageFeatures.ts:
  912: 				// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  923: 				// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/api/browser/mainThreadQuickOpen.ts:
  242: 					// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/api/browser/viewsExtensionPoint.ts:
  545: 						// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/api/common/extHost.api.impl.ts:
  162: 	// eslint-disable-next-line local/code-no-any-casts
  317: 				// eslint-disable-next-line local/code-no-any-casts
  326: 				// eslint-disable-next-line local/code-no-any-casts
  565: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHost.protocol.ts:
  2209: 		// eslint-disable-next-line local/code-no-any-casts
  2211: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostDebugService.ts:
  243: 		// eslint-disable-next-line local/code-no-any-casts
  491: 			// eslint-disable-next-line local/code-no-any-casts
  493: 			// eslint-disable-next-line local/code-no-any-casts
  495: 			// eslint-disable-next-line local/code-no-any-casts
  666: 							// eslint-disable-next-line local/code-no-any-casts
  770: 							// eslint-disable-next-line local/code-no-any-casts
  778: 							// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostDocumentSaveParticipant.ts:
  114: 			// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/api/common/extHostExtensionActivator.ts:
  405: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostExtensionService.ts:
   566: 							// eslint-disable-next-line local/code-no-any-casts
  1009: 		// eslint-disable-next-line local/code-no-any-casts
  1050: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostLanguageFeatures.ts:
  197: 		// eslint-disable-next-line local/code-no-any-casts
  714: 		// eslint-disable-next-line local/code-no-any-casts
  735: 		// eslint-disable-next-line local/code-no-any-casts
  748: 		// eslint-disable-next-line local/code-no-any-casts
  771: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostLanguageModelTools.ts:
  221: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostMcp.ts:
  211: 		// eslint-disable-next-line local/code-no-any-casts
  213: 			// eslint-disable-next-line local/code-no-any-casts
  216: 		// eslint-disable-next-line local/code-no-any-casts
  218: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostSearch.ts:
  221: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostTimeline.ts:
  160: 				// eslint-disable-next-line local/code-no-any-casts
  163: 					// eslint-disable-next-line local/code-no-any-casts
  166: 				// eslint-disable-next-line local/code-no-any-casts
  169: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostTypeConverters.ts:
   465: 				// eslint-disable-next-line local/code-no-any-casts
   858: 			// eslint-disable-next-line local/code-no-any-casts
  3179: 			// eslint-disable-next-line local/code-no-any-casts
  3181: 			// eslint-disable-next-line local/code-no-any-casts
  3183: 			// eslint-disable-next-line local/code-no-any-casts
  3185: 			// eslint-disable-next-line local/code-no-any-casts
  3187: 			// eslint-disable-next-line local/code-no-any-casts
  3189: 			// eslint-disable-next-line local/code-no-any-casts
  3191: 			// eslint-disable-next-line local/code-no-any-casts
  3193: 			// eslint-disable-next-line local/code-no-any-casts
  3195: 			// eslint-disable-next-line local/code-no-any-casts
  3202: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/common/extHostTypes.ts:
  3190: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/node/extensionHostProcess.ts:
  108: 	// eslint-disable-next-line local/code-no-any-casts
  120: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/node/extHostConsoleForwarder.ts:
  31: 		// eslint-disable-next-line local/code-no-any-casts
  53: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/node/extHostMcpNode.ts:
  57: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/node/proxyResolver.ts:
  113: 	// eslint-disable-next-line local/code-no-any-casts
  136: 	// eslint-disable-next-line local/code-no-any-casts
  139: 		// eslint-disable-next-line local/code-no-any-casts
  142: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostApiCommands.test.ts:
  874: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostAuthentication.integrationTest.ts:
   75: 		// eslint-disable-next-line local/code-no-any-casts
  164: 		// eslint-disable-next-line local/code-no-any-casts
  173: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostCommands.test.ts:
  92: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostConfiguration.test.ts:
  750: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostDocumentData.test.ts:
  46: 		// eslint-disable-next-line local/code-no-any-casts
  48: 		// eslint-disable-next-line local/code-no-any-casts
  50: 		// eslint-disable-next-line local/code-no-any-casts
  52: 		// eslint-disable-next-line local/code-no-any-casts
  54: 		// eslint-disable-next-line local/code-no-any-casts
  56: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostDocumentSaveParticipant.test.ts:
  84: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostLanguageFeatures.test.ts:
  1068: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostNotebookKernel.test.ts:
  164: 		// eslint-disable-next-line local/code-no-any-casts
  166: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostTelemetry.test.ts:
  107: 		// eslint-disable-next-line local/code-no-any-casts
  109: 		// eslint-disable-next-line local/code-no-any-casts
  111: 		// eslint-disable-next-line local/code-no-any-casts
  114: 			// eslint-disable-next-line local/code-no-any-casts
  121: 			// eslint-disable-next-line local/code-no-any-casts
  128: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostTesting.test.ts:
  640: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostTextEditor.test.ts:
  265: 		// eslint-disable-next-line local/code-no-any-casts
  290: 		// eslint-disable-next-line local/code-no-any-casts
  327: 		// eslint-disable-next-line local/code-no-any-casts
  340: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostTypes.test.ts:
   87: 		// eslint-disable-next-line local/code-no-any-casts
   89: 		// eslint-disable-next-line local/code-no-any-casts
   91: 		// eslint-disable-next-line local/code-no-any-casts
  209: 		// eslint-disable-next-line local/code-no-any-casts
  211: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/extHostWorkspace.test.ts:
  541: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/mainThreadAuthentication.integrationTest.ts:
  119: 			// eslint-disable-next-line local/code-no-any-casts
  126: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/mainThreadDocumentsAndEditors.test.ts:
  86: 			// eslint-disable-next-line local/code-no-any-casts
  93: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/mainThreadEditors.test.ts:
  130: 			// eslint-disable-next-line local/code-no-any-casts
  137: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/browser/mainThreadTreeViews.test.ts:
  60: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/common/extensionHostMain.test.ts:
  80: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/common/extHostTerminalShellIntegration.test.ts:
  86: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/common/extHostTypeConverters.test.ts:
  34: 				// eslint-disable-next-line local/code-no-any-casts
  43: 				// eslint-disable-next-line local/code-no-any-casts
  66: 				// eslint-disable-next-line local/code-no-any-casts
  78: 				// eslint-disable-next-line local/code-no-any-casts
  85: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/common/testRPCProtocol.ts:
   36: 				// eslint-disable-next-line local/code-no-any-casts
  163: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/test/node/extHostSearch.test.ts:
   177: 				// eslint-disable-next-line local/code-no-any-casts
  1004: 			// eslint-disable-next-line local/code-no-any-casts
  1050: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/worker/extensionHostWorker.ts:
   83: // eslint-disable-next-line local/code-no-any-casts
   85: // eslint-disable-next-line local/code-no-any-casts
   87: // eslint-disable-next-line local/code-no-any-casts
   89: // eslint-disable-next-line local/code-no-any-casts
   91: // eslint-disable-next-line local/code-no-any-casts
   93: // eslint-disable-next-line local/code-no-any-casts
   95: // eslint-disable-next-line local/code-no-any-casts
   97: // eslint-disable-next-line local/code-no-any-casts
  100: // eslint-disable-next-line local/code-no-any-casts
  104: 	// eslint-disable-next-line local/code-no-any-casts
  106: 	// eslint-disable-next-line local/code-no-any-casts
  158: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/api/worker/extHostConsoleForwarder.ts:
  20: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/browser/actions/developerActions.ts:
  762: 			// eslint-disable-next-line @typescript-eslint/no-explicit-any
  764: 			// eslint-disable-next-line @typescript-eslint/no-explicit-any
  795: 						// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  798: 							// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/common/configuration.ts:
  63: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/accessibilitySignals/browser/commands.ts:
  54: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/bulkEdit/test/browser/bulkCellEdits.test.ts:
  29: 		// eslint-disable-next-line local/code-no-any-casts
  39: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/chat/browser/chatSessions.contribution.ts:
  923: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/chatWidget.ts:
  174: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/actions/chatCodeblockActions.ts:
   88: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  625: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any
  646: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any
  699: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/actions/chatContextActions.ts:
  261: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/chatEditing/chatEditingActions.ts:
   56: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
   63: // eslint-disable-next-line @typescript-eslint/no-explicit-any
  101: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/chatEditing/chatEditingServiceImpl.ts:
   85: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
   87: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  107: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any
  111: 			// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/chatSessions/common.ts:
   71: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  112: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  114: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/chatSessions/view/sessionsTreeRenderer.ts:
  89: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/browser/contrib/chatDynamicVariables.ts:
  180: // eslint-disable-next-line @typescript-eslint/no-explicit-any
  198: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/chatModel.ts:
   672: 			// eslint-disable-next-line @typescript-eslint/no-explicit-any
  1396: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any, local/code-no-any-casts
  1815: 				// eslint-disable-next-line @typescript-eslint/no-explicit-any, local/code-no-any-casts
  2108: 					// eslint-disable-next-line @typescript-eslint/no-explicit-any
  2128: 								// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/chatService.ts:
   45: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  277: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  324: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  375: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  860: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  928: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  930: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/chatServiceImpl.ts:
  553: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/chatSessionsService.ts:
  129: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any
  141: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any
  182: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/chatWidgetHistoryService.ts:
  24: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  87: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/languageModels.ts:
   55: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  135: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  143: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  209: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  216: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  223: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  286: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  557: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/languageModelToolsService.ts:
  129: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  150: // eslint-disable-next-line @typescript-eslint/no-explicit-any
  156: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  193: // eslint-disable-next-line @typescript-eslint/no-explicit-any
  198: // eslint-disable-next-line @typescript-eslint/no-explicit-any
  270: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/promptSyntax/service/promptsServiceImpl.ts:
  390: 				// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/common/tools/manageTodoListTool.ts:
   33: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  124: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/test/browser/chatEditingModifiedNotebookEntry.test.ts:
    30: 			// eslint-disable-next-line local/code-no-any-casts
    35: 			// eslint-disable-next-line local/code-no-any-casts
    63: 				// eslint-disable-next-line local/code-no-any-casts
   106: 				// eslint-disable-next-line local/code-no-any-casts
   161: 				// eslint-disable-next-line local/code-no-any-casts
   204: 			// eslint-disable-next-line local/code-no-any-casts
   209: 			// eslint-disable-next-line local/code-no-any-casts
   415: 			// eslint-disable-next-line local/code-no-any-casts
   420: 			// eslint-disable-next-line local/code-no-any-casts
   577: 			// eslint-disable-next-line local/code-no-any-casts
   582: 			// eslint-disable-next-line local/code-no-any-casts
   619: 				// eslint-disable-next-line local/code-no-any-casts
   668: 				// eslint-disable-next-line local/code-no-any-casts
   726: 				// eslint-disable-next-line local/code-no-any-casts
   774: 			// eslint-disable-next-line local/code-no-any-casts
   779: 			// eslint-disable-next-line local/code-no-any-casts
   790: 			// eslint-disable-next-line local/code-no-any-casts
  1532: 			// eslint-disable-next-line local/code-no-any-casts
  1537: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/chat/test/browser/chatEditingSessionStorage.test.ts:
  41: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/chat/test/common/chatRequestParser.test.ts:
   75: 		// eslint-disable-next-line local/code-no-any-casts
   87: 		// eslint-disable-next-line local/code-no-any-casts
   99: 		// eslint-disable-next-line local/code-no-any-casts
  111: 		// eslint-disable-next-line local/code-no-any-casts
  123: 		// eslint-disable-next-line local/code-no-any-casts
  135: 		// eslint-disable-next-line local/code-no-any-casts
  142: 		// eslint-disable-next-line local/code-no-any-casts
  154: 		// eslint-disable-next-line local/code-no-any-casts
  161: 		// eslint-disable-next-line local/code-no-any-casts
  173: 		// eslint-disable-next-line local/code-no-any-casts
  181: 		// eslint-disable-next-line local/code-no-any-casts
  193: 		// eslint-disable-next-line local/code-no-any-casts
  200: 		// eslint-disable-next-line local/code-no-any-casts
  245: 		// eslint-disable-next-line local/code-no-any-casts
  256: 		// eslint-disable-next-line local/code-no-any-casts
  267: 		// eslint-disable-next-line local/code-no-any-casts
  278: 		// eslint-disable-next-line local/code-no-any-casts
  289: 		// eslint-disable-next-line local/code-no-any-casts
  300: 		// eslint-disable-next-line local/code-no-any-casts
  311: 		// eslint-disable-next-line local/code-no-any-casts
  322: 		// eslint-disable-next-line local/code-no-any-casts
  338: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/chat/test/common/languageModels.ts:
  53: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/test/common/mockLanguageModelToolsService.ts:
  52: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/test/common/mockPromptsService.ts:
  36: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  38: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  41: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  44: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  47: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  50: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any
  52: 	// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/chat/test/common/tools/manageTodoListTool.test.ts:
  16: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/debug/browser/debugSession.ts:
  1193: 						// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/debug/test/browser/breakpoints.test.ts:
  450: 		// eslint-disable-next-line local/code-no-any-casts
  466: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/debug/test/browser/debugConfigurationManager.test.ts:
   92: 		// eslint-disable-next-line local/code-no-any-casts
  129: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/debug/test/browser/debugMemory.test.ts:
  76: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/debug/test/browser/rawDebugSession.test.ts:
  28: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/debug/test/browser/repl.test.ts:
  139: 		// eslint-disable-next-line local/code-no-any-casts
  142: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/debug/test/common/debugModel.test.ts:
  72: 				// eslint-disable-next-line local/code-no-any-casts
  77: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/editTelemetry/browser/helpers/utils.ts:
  15: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/editTelemetry/browser/telemetry/arcTelemetrySender.ts:
  142: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/extensions/browser/extensionsWorkbenchService.ts:
  1182: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/extensions/test/electron-browser/extensionsActions.test.ts:
   99: 		// eslint-disable-next-line local/code-no-any-casts
  101: 		// eslint-disable-next-line local/code-no-any-casts
  103: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/extensions/test/electron-browser/extensionsWorkbenchService.test.ts:
  100: 			// eslint-disable-next-line local/code-no-any-casts
  102: 			// eslint-disable-next-line local/code-no-any-casts
  104: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/files/test/browser/editorAutoSave.test.ts:
  46: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/files/test/browser/explorerView.test.ts:
  94: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/inlineChat/test/browser/inlineChatController.test.ts:
  163: 					// eslint-disable-next-line local/code-no-any-casts
  673: 				// eslint-disable-next-line local/code-no-any-casts
  722: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/markdown/test/browser/markdownSettingRenderer.test.ts:
  72: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/markers/test/browser/markersModel.test.ts:
  145: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/mcp/common/modelContextProtocol.ts:
  100: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any
  116: 		// eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/mergeEditor/browser/utils.ts:
   89: 	// eslint-disable-next-line local/code-no-any-casts
   99: 			// eslint-disable-next-line local/code-no-any-casts
  120: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/mergeEditor/browser/commands/commands.ts:
  69: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/notebook/browser/services/notebookEditorServiceImpl.ts:
  75: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/search/browser/searchActionsFind.ts:
  460: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/search/browser/searchMessage.ts:
  51: 						// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/search/browser/searchTreeModel/searchModel.ts:
  306: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/search/browser/searchTreeModel/searchTreeCommon.ts:
  299: 		// eslint-disable-next-line local/code-no-any-casts
  301: 		// eslint-disable-next-line local/code-no-any-casts
  318: 		// eslint-disable-next-line local/code-no-any-casts
  324: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/search/test/browser/searchModel.test.ts:
  201: 						// eslint-disable-next-line local/code-no-any-casts
  229: 							// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/searchEditor/browser/searchEditor.contribution.ts:
  205: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/searchEditor/browser/searchEditorActions.ts:
  155: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/searchEditor/browser/searchEditorInput.ts:
  328: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/tasks/browser/abstractTaskService.ts:
  1489: 		// eslint-disable-next-line local/code-no-any-casts
  1498: 			// eslint-disable-next-line local/code-no-any-casts
  1537: 			// eslint-disable-next-line local/code-no-any-casts
  1583: 			// eslint-disable-next-line local/code-no-any-casts
  1737: 			// eslint-disable-next-line local/code-no-any-casts
  1784: 				// eslint-disable-next-line local/code-no-any-casts
  1787: 					// eslint-disable-next-line local/code-no-any-casts
  2673: 		// eslint-disable-next-line local/code-no-any-casts
  2854: 		// eslint-disable-next-line local/code-no-any-casts
  3586: 				// eslint-disable-next-line local/code-no-any-casts
  3620: 		// eslint-disable-next-line local/code-no-any-casts
  3626: 		// eslint-disable-next-line local/code-no-any-casts
  3755: 					// eslint-disable-next-line local/code-no-any-casts
  3814: 								// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/tasks/common/problemMatcher.ts:
   361: 			// eslint-disable-next-line local/code-no-any-casts
   374: 				// eslint-disable-next-line local/code-no-any-casts
  1015: 				// eslint-disable-next-line local/code-no-any-casts
  1906: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/tasks/common/taskConfiguration.ts:
  1720: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/tasks/common/tasks.ts:
  667: 		// eslint-disable-next-line local/code-no-any-casts
  708: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/tasks/test/browser/taskTerminalStatus.test.ts:
  84: 		// eslint-disable-next-line local/code-no-any-casts
  86: 		// eslint-disable-next-line local/code-no-any-casts
  89: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/accessibility/test/browser/bufferContentTracker.test.ts:
  71: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/chatAgentTools/test/browser/outputMonitor.test.ts:
  45: 				// eslint-disable-next-line local/code-no-any-casts
  61: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/chatAgentTools/test/electron-browser/runInTerminalTool.test.ts:
  402: 			// eslint-disable-next-line local/code-no-any-casts
  924: 			// eslint-disable-next-line local/code-no-any-casts
  948: 			// eslint-disable-next-line local/code-no-any-casts
  953: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/history/test/common/history.test.ts:
  102: 			// eslint-disable-next-line local/code-no-any-casts
  108: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/links/browser/links.ts:
  168: // eslint-disable-next-line @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/terminalContrib/links/test/browser/terminalLinkHelpers.test.ts:
  242: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/links/test/browser/terminalLinkManager.test.ts:
  95: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/links/test/browser/terminalLinkOpeners.test.ts:
  151: 				// eslint-disable-next-line local/code-no-any-casts
  292: 					// eslint-disable-next-line local/code-no-any-casts
  556: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/links/test/browser/terminalWordLinkDetector.test.ts:
   49: 			// eslint-disable-next-line local/code-no-any-casts
   59: 			// eslint-disable-next-line local/code-no-any-casts
   69: 			// eslint-disable-next-line local/code-no-any-casts
   89: 		// eslint-disable-next-line local/code-no-any-casts
   98: 		// eslint-disable-next-line local/code-no-any-casts
  108: 		// eslint-disable-next-line local/code-no-any-casts
  118: 		// eslint-disable-next-line local/code-no-any-casts
  126: 		// eslint-disable-next-line local/code-no-any-casts
  136: 		// eslint-disable-next-line local/code-no-any-casts
  142: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/terminalContrib/typeAhead/test/browser/terminalTypeAhead.test.ts:
  40: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/testing/test/browser/testObjectTree.ts:
  123: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/contrib/themes/browser/themes.contribution.ts:
  614: 	// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/contrib/welcomeGettingStarted/browser/gettingStartedService.ts:
  600: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/authentication/test/browser/authenticationMcpAccessService.test.ts:
  236: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/configurationResolver/common/configurationResolverExpression.ts:
   81: 			// eslint-disable-next-line local/code-no-any-casts
  106: 		// eslint-disable-next-line local/code-no-any-casts
  306: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/driver/browser/driver.ts:
  199: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any
  222: 		// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any

src/vs/workbench/services/extensions/common/extensionsRegistry.ts:
  229: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/extensions/test/common/extensionManifestPropertiesService.test.ts:
   49: 		// eslint-disable-next-line local/code-no-any-casts
   54: 		// eslint-disable-next-line local/code-no-any-casts
   97: 		// eslint-disable-next-line local/code-no-any-casts
  102: 		// eslint-disable-next-line local/code-no-any-casts
  107: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/extensions/test/common/rpcProtocol.test.ts:
  185: 			// eslint-disable-next-line local/code-no-any-casts
  222: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/extensions/worker/polyfillNestedWorker.ts:
  47: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/search/common/search.ts:
  628: 	// eslint-disable-next-line local/code-no-any-casts
  631: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/search/node/rawSearchService.ts:
  438: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/textfile/test/node/encoding/encoding.test.ts:
  44: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/textMate/common/TMGrammarFactory.ts:
  147: 					// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/themes/browser/fileIconThemeData.ts:
  122: 						// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/themes/browser/productIconThemeData.ts:
  123: 						// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/themes/common/colorThemeData.ts:
  650: 						// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/views/test/browser/viewContainerModel.test.ts:
   67: 		// eslint-disable-next-line local/code-no-any-casts
   74: 		// eslint-disable-next-line local/code-no-any-casts
  102: 		// eslint-disable-next-line local/code-no-any-casts
  147: 		// eslint-disable-next-line local/code-no-any-casts
  171: 		// eslint-disable-next-line local/code-no-any-casts
  195: 		// eslint-disable-next-line local/code-no-any-casts
  241: 		// eslint-disable-next-line local/code-no-any-casts
  272: 		// eslint-disable-next-line local/code-no-any-casts
  293: 		// eslint-disable-next-line local/code-no-any-casts
  324: 		// eslint-disable-next-line local/code-no-any-casts
  370: 		// eslint-disable-next-line local/code-no-any-casts
  401: 		// eslint-disable-next-line local/code-no-any-casts
  429: 		// eslint-disable-next-line local/code-no-any-casts
  457: 		// eslint-disable-next-line local/code-no-any-casts
  489: 		// eslint-disable-next-line local/code-no-any-casts
  541: 		// eslint-disable-next-line local/code-no-any-casts
  573: 		// eslint-disable-next-line local/code-no-any-casts
  603: 		// eslint-disable-next-line local/code-no-any-casts
  627: 		// eslint-disable-next-line local/code-no-any-casts
  686: 		// eslint-disable-next-line local/code-no-any-casts
  755: 		// eslint-disable-next-line local/code-no-any-casts
  833: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/services/views/test/browser/viewDescriptorService.test.ts:
   25: // eslint-disable-next-line local/code-no-any-casts
   27: // eslint-disable-next-line local/code-no-any-casts
  335: 		// eslint-disable-next-line local/code-no-any-casts
  395: 		// eslint-disable-next-line local/code-no-any-casts
  531: 		// eslint-disable-next-line local/code-no-any-casts
  594: 		// eslint-disable-next-line local/code-no-any-casts
  645: 		// eslint-disable-next-line local/code-no-any-casts
  678: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/browser/part.test.ts:
  135: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/browser/window.test.ts:
  42: 				// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/browser/workbenchTestServices.ts:
   305: 	// eslint-disable-next-line local/code-no-any-casts
   698: // eslint-disable-next-line local/code-no-any-casts
  1065: 	// eslint-disable-next-line local/code-no-any-casts
  1970: 	// eslint-disable-next-line local/code-no-any-casts
  1988: 			// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/browser/parts/editor/editorInput.test.ts:
  98: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/browser/parts/editor/editorPane.test.ts:
  131: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/browser/parts/editor/resourceEditorInput.test.ts:
   95: 		// eslint-disable-next-line local/code-no-any-casts
  106: 		// eslint-disable-next-line local/code-no-any-casts
  113: 		// eslint-disable-next-line local/code-no-any-casts
  120: 		// eslint-disable-next-line local/code-no-any-casts
  127: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/common/resources.test.ts:
  51: 		// eslint-disable-next-line local/code-no-any-casts
  59: 		// eslint-disable-next-line local/code-no-any-casts
  72: 		// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/common/workbenchTestServices.ts:
  293: 	// eslint-disable-next-line local/code-no-any-casts

src/vs/workbench/test/electron-browser/workbenchTestServices.ts:
  257: 		// eslint-disable-next-line local/code-no-any-casts

test/automation/src/code.ts:
  128: 				// eslint-disable-next-line local/code-no-any-casts

test/automation/src/terminal.ts:
  315: 		// eslint-disable-next-line local/code-no-any-casts

test/mcp/src/application.ts:
  250: 		// eslint-disable-next-line local/code-no-any-casts

test/mcp/src/playwright.ts:
  17: 		// eslint-disable-next-line local/code-no-any-casts

test/mcp/src/automationTools/problems.ts:
  76: 			// eslint-disable-next-line local/code-no-any-casts
```

--------------------------------------------------------------------------------

---[FILE: .vscode/searches/ts36031.code-search]---
Location: vscode-main/.vscode/searches/ts36031.code-search

```text
# Query: \\w+\\?\\.\\w+![(.[]
# Flags: RegExp
# ContextLines: 2

8 results - 4 files

src/vs/base/browser/ui/tree/asyncDataTree.ts:
  241  			} : () => 'treeitem',
  242  			isChecked: options.accessibilityProvider!.isChecked ? (e) => {
  243: 				return !!(options.accessibilityProvider?.isChecked!(e.element as T));
  244  			} : undefined,
  245  			getAriaLabel(e) {

src/vs/platform/list/browser/listService.ts:
  463  
  464  		if (typeof options?.openOnSingleClick !== 'boolean' && options?.configurationService) {
  465: 			this.openOnSingleClick = options?.configurationService!.getValue(openModeSettingKey) !== 'doubleClick';
  466  			this._register(options?.configurationService.onDidChangeConfiguration(() => {
  467: 				this.openOnSingleClick = options?.configurationService!.getValue(openModeSettingKey) !== 'doubleClick';
  468  			}));
  469  		} else {

src/vs/workbench/contrib/notebook/browser/notebookEditorWidget.ts:
  1526  
  1527  		await this._ensureActiveKernel();
  1528: 		await this._activeKernel?.cancelNotebookCell!(this._notebookViewModel!.uri, undefined);
  1529  	}
  1530  

  1535  
  1536  		await this._ensureActiveKernel();
  1537: 		await this._activeKernel?.executeNotebookCell!(this._notebookViewModel!.uri, undefined);
  1538  	}
  1539  

  1553  
  1554  		await this._ensureActiveKernel();
  1555: 		await this._activeKernel?.cancelNotebookCell!(this._notebookViewModel!.uri, cell.handle);
  1556  	}
  1557  

  1567  
  1568  		await this._ensureActiveKernel();
  1569: 		await this._activeKernel?.executeNotebookCell!(this._notebookViewModel!.uri, cell.handle);
  1570  	}
  1571  

src/vs/workbench/contrib/webview/electron-browser/iframeWebviewElement.ts:
  89  			.then(() => this._resourceRequestManager.ensureReady())
  90  			.then(() => {
  91: 				this.element?.contentWindow!.postMessage({ channel, args: data }, '*');
  92  			});
  93  	}
```

--------------------------------------------------------------------------------

---[FILE: build/.cachesalt]---
Location: vscode-main/build/.cachesalt

```text
2025-12-10T20:11:58.882Z
```

--------------------------------------------------------------------------------

---[FILE: build/.gitattributes]---
Location: vscode-main/build/.gitattributes

```text
* text eol=lf
*.exe binary
*.dll binary
```

--------------------------------------------------------------------------------

---[FILE: build/.gitignore]---
Location: vscode-main/build/.gitignore

```text
*.js.map
lib/policies/policyDto.*
```

--------------------------------------------------------------------------------

---[FILE: build/.moduleignore]---
Location: vscode-main/build/.moduleignore

```text
# cleanup rules for node modules, .gitignore style

# native node modules

nan/**
*/node_modules/nan/**

fsevents/binding.gyp
fsevents/fsevents.cc
fsevents/build/**
fsevents/src/**
fsevents/test/**
!fsevents/**/*.node

@vscode/spdlog/binding.gyp
@vscode/spdlog/build/**
@vscode/spdlog/deps/**
@vscode/spdlog/src/**
@vscode/spdlog/test/**
@vscode/spdlog/*.yml
!@vscode/spdlog/build/Release/*.node

@vscode/deviceid/binding.gyp
@vscode/deviceid/build/**
@vscode/deviceid/deps/**
@vscode/deviceid/src/**
@vscode/deviceid/test/**
@vscode/deviceid/*.yml
!@vscode/deviceid/build/Release/*.node


@vscode/sqlite3/binding.gyp
@vscode/sqlite3/benchmark/**
@vscode/sqlite3/cloudformation/**
@vscode/sqlite3/deps/**
@vscode/sqlite3/test/**
@vscode/sqlite3/build/**
@vscode/sqlite3/src/**
!@vscode/sqlite3/build/Release/*.node

@vscode/windows-mutex/binding.gyp
@vscode/windows-mutex/build/**
@vscode/windows-mutex/src/**
!@vscode/windows-mutex/**/*.node

@vscode/windows-process-tree/binding.gyp
@vscode/windows-process-tree/build/**
@vscode/windows-process-tree/src/**
@vscode/windows-process-tree/tsconfig.json
@vscode/windows-process-tree/tslint.json
!@vscode/windows-process-tree/**/*.node

@vscode/windows-registry/binding.gyp
@vscode/windows-registry/src/**
@vscode/windows-registry/build/**
!@vscode/windows-registry/build/Release/*.node

@vscode/tree-sitter-wasm/wasm/tree-sitter-*.wasm
!@vscode/tree-sitter-wasm/wasm/tree-sitter-typescript.wasm
!@vscode/tree-sitter-wasm/wasm/tree-sitter-regex.wasm
!@vscode/tree-sitter-wasm/wasm/tree-sitter-ini.wasm
!@vscode/tree-sitter-wasm/wasm/tree-sitter-css.wasm
!@vscode/tree-sitter-wasm/wasm/tree-sitter-powershell.wasm
!@vscode/tree-sitter-wasm/wasm/tree-sitter-bash.wasm

native-keymap/binding.gyp
native-keymap/build/**
native-keymap/src/**
native-keymap/deps/**
!native-keymap/build/Release/*.node

native-is-elevated/binding.gyp
native-is-elevated/build/**
native-is-elevated/src/**
native-is-elevated/deps/**
!native-is-elevated/build/Release/*.node

native-watchdog/binding.gyp
native-watchdog/build/**
native-watchdog/src/**
!native-watchdog/build/Release/*.node

@vscode/vsce-sign/**
!@vscode/vsce-sign/src/main.d.ts
!@vscode/vsce-sign/src/main.js
!@vscode/vsce-sign/package.json
!@vscode/vsce-sign/bin/**

windows-foreground-love/binding.gyp
windows-foreground-love/build/**
windows-foreground-love/src/**
!windows-foreground-love/**/*.node

kerberos/binding.gyp
kerberos/build/**
kerberos/src/**
kerberos/node_modules/**
!kerberos/**/*.node

node-pty/binding.gyp
node-pty/build/**
node-pty/src/**
node-pty/lib/*.test.js
node-pty/tools/**
node-pty/deps/**
node-pty/scripts/**
node-pty/third_party/**
!node-pty/build/Release/spawn-helper
!node-pty/build/Release/*.exe
!node-pty/build/Release/*.dll
!node-pty/build/Release/*.node
!node-pty/build/Release/conpty/conpty.dll
!node-pty/build/Release/conpty/OpenConsole.exe

@parcel/watcher/binding.gyp
@parcel/watcher/build/**
@parcel/watcher/prebuilds/**
@parcel/watcher/src/**
!@parcel/watcher/build/Release/*.node

vsda/**
!vsda/index.js
!vsda/index.d.ts
!vsda/package.json
!vsda/build/Release/vsda.node
!vsda/rust/web/**
!vsda/rust/bundler/**

@vscode/policy-watcher/build/**
@vscode/policy-watcher/.husky/**
@vscode/policy-watcher/src/**
@vscode/policy-watcher/binding.gyp
@vscode/policy-watcher/README.md
@vscode/policy-watcher/index.d.ts
!@vscode/policy-watcher/build/Release/vscode-policy-watcher.node

@vscode/windows-ca-certs/**/*
!@vscode/windows-ca-certs/package.json
!@vscode/windows-ca-certs/**/*.node

@vscode/node-addon-api/**/*
node-addon-api/**/*
prebuild-install/**/*

# other node modules

**/docs/**
**/example/**
**/examples/**
**/test/**
**/tests/**

**/History.md
**/CHANGELOG.md
**/README.md
**/readme.md
**/readme.markdown
**/CODE_OF_CONDUCT.md
**/SUPPORT.md
**/CONTRIBUTING.md

**/*.ts

# Exclude TS files that aren't needed by TS extension
typescript/lib/tsc.js
typescript/lib/typescriptServices.js
typescript/lib/tsserverlibrary.js
# We still need to include stdlib d.ts
!typescript/lib/lib*.d.ts

jschardet/index.js
jschardet/src/**
jschardet/dist/jschardet.js

es6-promise/lib/**

vscode-textmate/webpack.config.js

zone.js/dist/**
!zone.js/dist/zone-node.js

# https://github.com/xtermjs/xterm.js/issues/3137
@xterm/xterm/src/**
@xterm/xterm/tsconfig.all.json

# https://github.com/xtermjs/xterm.js/issues/3138
@xterm/xterm-addon-*/src/**
@xterm/xterm-addon-*/fixtures/**
@xterm/xterm-addon-*/out/**
@xterm/xterm-addon-*/out-test/**
```

--------------------------------------------------------------------------------

---[FILE: build/.moduleignore.darwin]---
Location: vscode-main/build/.moduleignore.darwin

```text
@vscode/windows-mutex/index.js
@vscode/windows-mutex/**/*.node
@vscode/windows-mutex/*.md
@vscode/windows-mutex/package.json

@vscode/windows-process-tree/lib/**
@vscode/windows-process-tree/**/*.node
@vscode/windows-process-tree/LICENSE
@vscode/windows-process-tree/package.json
@vscode/windows-process-tree/*.md

@vscode/windows-registry/dist/**
@vscode/windows-registry/**/*.node
@vscode/windows-registry/*.md
@vscode/windows-registry/*.txt
@vscode/windows-registry/package.json
!@vscode/windows-registry/dist/index.d.ts
```

--------------------------------------------------------------------------------

---[FILE: build/.moduleignore.linux]---
Location: vscode-main/build/.moduleignore.linux

```text
@vscode/windows-mutex/index.js
@vscode/windows-mutex/**/*.node
@vscode/windows-mutex/*.md
@vscode/windows-mutex/package.json

@vscode/windows-process-tree/lib/**
@vscode/windows-process-tree/**/*.node
@vscode/windows-process-tree/LICENSE
@vscode/windows-process-tree/package.json
@vscode/windows-process-tree/*.md

@vscode/windows-registry/dist/**
@vscode/windows-registry/**/*.node
@vscode/windows-registry/*.md
@vscode/windows-registry/*.txt
@vscode/windows-registry/package.json
!@vscode/windows-registry/dist/index.d.ts
```

--------------------------------------------------------------------------------

---[FILE: build/.npmrc]---
Location: vscode-main/build/.npmrc

```text
disturl="https://nodejs.org/dist"
runtime="node"
build_from_source="true"
legacy-peer-deps="true"
force_process_config="true"
timeout=180000
```

--------------------------------------------------------------------------------

---[FILE: build/.webignore]---
Location: vscode-main/build/.webignore

```text
# cleanup rules for web node modules, .gitignore style

**/*.txt
**/*.json
**/*.md
**/*.ts
**/*.d.ts
**/*.js.map
**/*.mjs.map
**/LICENSE
**/CONTRIBUTORS

**/docs/**
**/example/**
**/examples/**

jschardet/index.js
jschardet/src/**
jschardet/dist/jschardet.js

vscode-textmate/webpack.config.js

@xterm/xterm/src/**

@xterm/addon-clipboard/src/**
@xterm/addon-clipboard/out/**

@xterm/addon-image/src/**
@xterm/addon-image/out/**

@xterm/addon-ligatures/src/**
@xterm/addon-ligatures/out/**

@xterm/addon-progress/src/**
@xterm/addon-progress/out/**

@xterm/addon-search/src/**
@xterm/addon-search/out/**
@xterm/addon-search/fixtures/**

@xterm/addon-unicode11/src/**
@xterm/addon-unicode11/out/**

@xterm/addon-webgl/src/**
@xterm/addon-webgl/out/**

# This makes sure the model is included in the package
!@vscode/vscode-languagedetection/model/**
!@vscode/tree-sitter-wasm/wasm/**

# Ensure only the required telemetry pieces are loaded in web to reduce bundle size
@microsoft/1ds-core-js/**
@microsoft/1ds-post-js/**
@microsoft/applicationinsights-core-js/**
@microsoft/applicationinsights-shims/**
!@microsoft/1ds-core-js/dist/ms.core.min.js
!@microsoft/1ds-core-js/bundle/ms.core.min.js
!@microsoft/1ds-post-js/dist/ms.post.min.js
!@microsoft/1ds-post-js/bundle/ms.post.min.js
!@microsoft/applicationinsights-core-js/browser/applicationinsights-core-js.min.js
!@microsoft/applicationinsights-shims/dist/umd/applicationinsights-shims.min.js

vsda/**
!vsda/rust/web/**
```

--------------------------------------------------------------------------------

---[FILE: build/buildfile.ts]---
Location: vscode-main/build/buildfile.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import type { IEntryPoint } from './lib/bundle.ts';

function createModuleDescription(name: string): IEntryPoint {
	return {
		name
	};
}

export const workerEditor = createModuleDescription('vs/editor/common/services/editorWebWorkerMain');
export const workerExtensionHost = createModuleDescription('vs/workbench/api/worker/extensionHostWorkerMain');
export const workerNotebook = createModuleDescription('vs/workbench/contrib/notebook/common/services/notebookWebWorkerMain');
export const workerLanguageDetection = createModuleDescription('vs/workbench/services/languageDetection/browser/languageDetectionWebWorkerMain');
export const workerLocalFileSearch = createModuleDescription('vs/workbench/services/search/worker/localFileSearchMain');
export const workerProfileAnalysis = createModuleDescription('vs/platform/profiling/electron-browser/profileAnalysisWorkerMain');
export const workerOutputLinks = createModuleDescription('vs/workbench/contrib/output/common/outputLinkComputerMain');
export const workerBackgroundTokenization = createModuleDescription('vs/workbench/services/textMate/browser/backgroundTokenization/worker/textMateTokenizationWorker.workerMain');

export const workbenchDesktop = [
	createModuleDescription('vs/workbench/contrib/debug/node/telemetryApp'),
	createModuleDescription('vs/platform/files/node/watcher/watcherMain'),
	createModuleDescription('vs/platform/terminal/node/ptyHostMain'),
	createModuleDescription('vs/workbench/api/node/extensionHostProcess'),
	createModuleDescription('vs/workbench/workbench.desktop.main')
];

export const workbenchWeb = createModuleDescription('vs/workbench/workbench.web.main');

export const keyboardMaps = [
	createModuleDescription('vs/workbench/services/keybinding/browser/keyboardLayouts/layout.contribution.linux'),
	createModuleDescription('vs/workbench/services/keybinding/browser/keyboardLayouts/layout.contribution.darwin'),
	createModuleDescription('vs/workbench/services/keybinding/browser/keyboardLayouts/layout.contribution.win')
];

export const code = [
	// 'vs/code/electron-main/main' is not included here because it comes in via ./src/main.js
	// 'vs/code/node/cli' is not included here because it comes in via ./src/cli.js
	createModuleDescription('vs/code/node/cliProcessMain'),
	createModuleDescription('vs/code/electron-utility/sharedProcess/sharedProcessMain'),
	createModuleDescription('vs/code/electron-browser/workbench/workbench'),
];

export const codeWeb = createModuleDescription('vs/code/browser/workbench/workbench');

export const codeServer = [
	// 'vs/server/node/server.main' is not included here because it gets inlined via ./src/server-main.js
	// 'vs/server/node/server.cli' is not included here because it gets inlined via ./src/server-cli.js
	createModuleDescription('vs/workbench/api/node/extensionHostProcess'),
	createModuleDescription('vs/platform/files/node/watcher/watcherMain'),
	createModuleDescription('vs/platform/terminal/node/ptyHostMain')
];

export const entrypoint = createModuleDescription;

const buildfile = {
	workerEditor,
	workerExtensionHost,
	workerNotebook,
	workerLanguageDetection,
	workerLocalFileSearch,
	workerProfileAnalysis,
	workerOutputLinks,
	workerBackgroundTokenization,
	workbenchDesktop,
	workbenchWeb,
	keyboardMaps,
	code,
	codeWeb,
	codeServer,
	entrypoint: createModuleDescription
};

export default buildfile;
```

--------------------------------------------------------------------------------

---[FILE: build/eslint.ts]---
Location: vscode-main/build/eslint.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import eventStream from 'event-stream';
import vfs from 'vinyl-fs';
import { eslintFilter } from './filters.ts';
import gulpEslint from './gulp-eslint.ts';

function eslint(): NodeJS.ReadWriteStream {
	return vfs
		.src(Array.from(eslintFilter), { base: '.', follow: true, allowEmpty: true })
		.pipe(
			gulpEslint((results) => {
				if (results.warningCount > 0 || results.errorCount > 0) {
					throw new Error(`eslint failed with ${results.warningCount + results.errorCount} warnings and/or errors`);
				}
			})
		).pipe(eventStream.through(function () { /* noop, important for the stream to end */ }));
}

if (import.meta.main) {
	eslint().on('error', (err) => {
		console.error();
		console.error(err);
		process.exit(1);
	});
}
```

--------------------------------------------------------------------------------

---[FILE: build/filters.ts]---
Location: vscode-main/build/filters.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import { readFileSync } from 'fs';
import { join } from 'path';

/**
 * Hygiene works by creating cascading subsets of all our files and
 * passing them through a sequence of checks. Here are the current subsets,
 * named according to the checks performed on them. Each subset contains
 * the following one, as described in mathematical notation:
 *
 * all  eol  indentation  copyright  typescript
 */

export const all = Object.freeze<string[]>([
	'*',
	'build/**/*',
	'extensions/**/*',
	'scripts/**/*',
	'src/**/*',
	'test/**/*',
	'!cli/**/*',
	'!out*/**',
	'!extensions/**/out*/**',
	'!test/**/out/**',
	'!**/node_modules/**',
	'!**/*.js.map',
]);

export const unicodeFilter = Object.freeze<string[]>([
	'**',

	'!**/ThirdPartyNotices.txt',
	'!**/ThirdPartyNotices.cli.txt',
	'!**/LICENSE.{txt,rtf}',
	'!LICENSES.chromium.html',
	'!**/LICENSE',

	'!**/*.{dll,exe,png,bmp,jpg,scpt,cur,ttf,woff,eot,template,ico,icns,opus,wasm}',
	'!**/test/**',
	'!**/*.test.ts',
	'!**/*.{d.ts,json,md}',
	'!**/*.mp3',

	'!build/win32/**',
	'!extensions/markdown-language-features/notebook-out/*.js',
	'!extensions/markdown-math/notebook-out/**',
	'!extensions/mermaid-chat-features/chat-webview-out/**',
	'!extensions/ipynb/notebook-out/**',
	'!extensions/notebook-renderers/renderer-out/**',
	'!extensions/php-language-features/src/features/phpGlobalFunctions.ts',
	'!extensions/terminal-suggest/src/completions/upstream/**',
	'!extensions/typescript-language-features/test-workspace/**',
	'!extensions/vscode-api-tests/testWorkspace/**',
	'!extensions/vscode-api-tests/testWorkspace2/**',
	'!extensions/**/dist/**',
	'!extensions/**/out/**',
	'!extensions/**/snippets/**',
	'!extensions/**/colorize-fixtures/**',
	'!extensions/terminal-suggest/src/shell/fishBuiltinsCache.ts',

	'!src/vs/base/browser/dompurify/**',
	'!src/vs/workbench/services/keybinding/browser/keyboardLayouts/**',
	'!src/vs/workbench/contrib/terminal/common/scripts/psreadline/**',
]);

export const indentationFilter = Object.freeze<string[]>([
	'**',

	// except specific files
	'!**/ThirdPartyNotices.txt',
	'!**/ThirdPartyNotices.cli.txt',
	'!**/LICENSE.{txt,rtf}',
	'!LICENSES.chromium.html',
	'!**/LICENSE',
	'!**/*.mp3',
	'!src/vs/loader.js',
	'!src/vs/base/browser/dompurify/*',
	'!src/vs/base/common/marked/marked.js',
	'!src/vs/base/common/semver/semver.js',
	'!src/vs/base/node/terminateProcess.sh',
	'!src/vs/base/node/cpuUsage.sh',
	'!src/vs/editor/common/languages/highlights/*.scm',
	'!src/vs/editor/common/languages/injections/*.scm',
	'!test/unit/assert.js',
	'!resources/linux/snap/electron-launch',
	'!build/ext.js',
	'!build/npm/gyp/patches/gyp_spectre_mitigation_support.patch',
	'!product.overrides.json',

	// except specific folders
	'!test/automation/out/**',
	'!test/monaco/out/**',
	'!test/smoke/out/**',
	'!extensions/terminal-suggest/src/shell/zshBuiltinsCache.ts',
	'!extensions/terminal-suggest/src/shell/fishBuiltinsCache.ts',
	'!extensions/terminal-suggest/src/completions/upstream/**',
	'!extensions/typescript-language-features/test-workspace/**',
	'!extensions/typescript-language-features/resources/walkthroughs/**',
	'!extensions/typescript-language-features/package-manager/node-maintainer/**',
	'!extensions/markdown-math/notebook-out/**',
	'!extensions/ipynb/notebook-out/**',
	'!extensions/vscode-api-tests/testWorkspace/**',
	'!extensions/vscode-api-tests/testWorkspace2/**',
	'!build/monaco/**',
	'!build/win32/**',
	'!build/checker/**',
	'!src/vs/workbench/contrib/terminal/common/scripts/psreadline/**',

	// except multiple specific files
	'!**/package.json',
	'!**/package-lock.json',

	// except multiple specific folders
	'!**/codicon/**',
	'!**/fixtures/**',
	'!**/lib/**',
	'!extensions/**/dist/**',
	'!extensions/**/out/**',
	'!extensions/**/snippets/**',
	'!extensions/**/syntaxes/**',
	'!extensions/**/themes/**',
	'!extensions/**/colorize-fixtures/**',

	// except specific file types
	'!src/vs/*/**/*.d.ts',
	'!src/typings/**/*.d.ts',
	'!extensions/**/*.d.ts',
	'!**/*.{svg,exe,png,bmp,jpg,scpt,bat,cmd,cur,ttf,woff,eot,md,ps1,psm1,template,yaml,yml,d.ts.recipe,ico,icns,plist,opus,admx,adml,wasm}',
	'!build/{lib,download,linux,darwin}/**/*.js',
	'!build/**/*.sh',
	'!build/azure-pipelines/**/*.js',
	'!build/azure-pipelines/**/*.config',
	'!build/npm/gyp/custom-headers/*.patch',
	'!**/Dockerfile',
	'!**/Dockerfile.*',
	'!**/*.Dockerfile',
	'!**/*.dockerfile',

	// except for built files
	'!extensions/mermaid-chat-features/chat-webview-out/*.js',
	'!extensions/markdown-language-features/media/*.js',
	'!extensions/markdown-language-features/notebook-out/*.js',
	'!extensions/markdown-math/notebook-out/*.js',
	'!extensions/ipynb/notebook-out/**',
	'!extensions/notebook-renderers/renderer-out/*.js',
	'!extensions/simple-browser/media/*.js',
]);

export const copyrightFilter = Object.freeze<string[]>([
	'**',
	'!**/*.desktop',
	'!**/*.json',
	'!**/*.html',
	'!**/*.template',
	'!**/*.md',
	'!**/*.bat',
	'!**/*.cmd',
	'!**/*.ico',
	'!**/*.opus',
	'!**/*.mp3',
	'!**/*.icns',
	'!**/*.xml',
	'!**/*.sh',
	'!**/*.zsh',
	'!**/*.fish',
	'!**/*.txt',
	'!**/*.xpm',
	'!**/*.opts',
	'!**/*.disabled',
	'!**/*.code-workspace',
	'!**/*.js.map',
	'!**/*.wasm',
	'!build/**/*.init',
	'!build/linux/libcxx-fetcher.*',
	'!build/npm/gyp/custom-headers/*.patch',
	'!resources/linux/snap/snapcraft.yaml',
	'!resources/win32/bin/code.js',
	'!resources/completions/**',
	'!extensions/configuration-editing/build/inline-allOf.ts',
	'!extensions/markdown-language-features/media/highlight.css',
	'!extensions/markdown-math/notebook-out/**',
	'!extensions/ipynb/notebook-out/**',
	'!extensions/simple-browser/media/codicon.css',
	'!extensions/terminal-suggest/src/completions/upstream/**',
	'!extensions/typescript-language-features/node-maintainer/**',
	'!extensions/html-language-features/server/src/modes/typescript/*',
	'!extensions/*/server/bin/*',
	'!src/vs/workbench/contrib/terminal/common/scripts/psreadline/**',
]);

export const tsFormattingFilter = Object.freeze<string[]>([
	'src/**/*.ts',
	'test/**/*.ts',
	'extensions/**/*.ts',
	'!src/vs/*/**/*.d.ts',
	'!src/typings/**/*.d.ts',
	'!extensions/**/*.d.ts',
	'!**/fixtures/**',
	'!**/typings/**',
	'!**/node_modules/**',
	'!extensions/**/colorize-fixtures/**',
	'!extensions/vscode-api-tests/testWorkspace/**',
	'!extensions/vscode-api-tests/testWorkspace2/**',
	'!extensions/**/*.test.ts',
	'!extensions/html-language-features/server/lib/jquery.d.ts',
	'!extensions/terminal-suggest/src/shell/zshBuiltinsCache.ts',
	'!extensions/terminal-suggest/src/shell/fishBuiltinsCache.ts',
]);

export const eslintFilter = Object.freeze<string[]>([
	'**/*.js',
	'**/*.cjs',
	'**/*.mjs',
	'**/*.ts',
	'.eslint-plugin-local/**/*.ts',
	...readFileSync(join(import.meta.dirname, '..', '.eslint-ignore'))
		.toString()
		.split(/\r\n|\n/)
		.filter(line => line && !line.startsWith('#'))
		.map(line => line.startsWith('!') ? line.slice(1) : `!${line}`)
]);

export const stylelintFilter = Object.freeze<string[]>([
	'src/**/*.css'
]);
```

--------------------------------------------------------------------------------

---[FILE: build/gulp-eslint.ts]---
Location: vscode-main/build/gulp-eslint.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import { ESLint } from 'eslint';
import fancyLog from 'fancy-log';
import { relative } from 'path';
import { Transform, type TransformOptions } from 'stream';

interface ESLintResults extends Array<ESLint.LintResult> {
	errorCount: number;
	warningCount: number;
}

interface EslintAction {
	(results: ESLintResults): void;
}

export default function eslint(action: EslintAction) {
	const linter = new ESLint({});
	const formatter = linter.loadFormatter('compact');

	const results: ESLintResults = Object.assign([], { errorCount: 0, warningCount: 0 });

	return createTransform(
		async (file, _enc, cb) => {
			const filePath = relative(process.cwd(), file.path);

			if (file.isNull()) {
				cb(null, file);
				return;
			}

			if (file.isStream()) {
				cb(new Error('vinyl files with Stream contents are not supported'));
				return;
			}

			try {
				// TODO: Should this be checked?
				if (await linter.isPathIgnored(filePath)) {
					cb(null, file);
					return;
				}

				const result = (await linter.lintText(file.contents.toString(), { filePath }))[0];
				results.push(result);
				results.errorCount += result.errorCount;
				results.warningCount += result.warningCount;

				const message = (await formatter).format([result]);
				if (message) {
					fancyLog(message);
				}
				cb(null, file);
			} catch (error) {
				cb(error);
			}
		},
		(done) => {
			try {
				action(results);
				done();
			} catch (error) {
				done(error);
			}
		});
}

function createTransform(
	transform: TransformOptions['transform'],
	flush: TransformOptions['flush']
): Transform {
	return new Transform({
		objectMode: true,
		transform,
		flush
	});
}
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.cli.ts]---
Location: vscode-main/build/gulpfile.cli.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import es from 'event-stream';
import gulp from 'gulp';
import * as path from 'path';
import fancyLog from 'fancy-log';
import ansiColors from 'ansi-colors';
import * as cp from 'child_process';
import { tmpdir } from 'os';
import { existsSync, mkdirSync, rmSync } from 'fs';
import * as task from './lib/task.ts';
import watcher from './lib/watch/index.ts';
import { debounce } from './lib/util.ts';
import { createReporter } from './lib/reporter.ts';
import untar from 'gulp-untar';
import gunzip from 'gulp-gunzip';

const root = 'cli';
const rootAbs = path.resolve(import.meta.dirname, '..', root);
const src = `${root}/src`;

const platformOpensslDirName =
	process.platform === 'win32' ? (
		process.arch === 'arm64'
			? 'arm64-windows-static-md'
			: 'x64-windows-static-md')
		: process.platform === 'darwin' ? (
			process.arch === 'arm64'
				? 'arm64-osx'
				: 'x64-osx')
			: (process.arch === 'arm64'
				? 'arm64-linux'
				: process.arch === 'arm'
					? 'arm-linux'
					: 'x64-linux');
const platformOpensslDir = path.join(rootAbs, 'openssl', 'package', 'out', platformOpensslDirName);

const hasLocalRust = (() => {
	let result: boolean | undefined = undefined;
	return () => {
		if (result !== undefined) {
			return result;
		}

		try {
			const r = cp.spawnSync('cargo', ['--version']);
			result = r.status === 0;
		} catch (e) {
			result = false;
		}

		return result;
	};
})();

const compileFromSources = (callback: (err?: string) => void) => {
	const proc = cp.spawn('cargo', ['--color', 'always', 'build'], {
		cwd: root,
		stdio: ['ignore', 'pipe', 'pipe'],
		env: existsSync(platformOpensslDir) ? { OPENSSL_DIR: platformOpensslDir, ...process.env } : process.env
	});

	const stdoutErr: Buffer[] = [];
	proc.stdout.on('data', d => stdoutErr.push(d));
	proc.stderr.on('data', d => stdoutErr.push(d));
	proc.on('error', callback);
	proc.on('exit', code => {
		if (code !== 0) {
			callback(Buffer.concat(stdoutErr).toString());
		} else {
			callback();
		}
	});
};

const acquireBuiltOpenSSL = (callback: (err?: unknown) => void) => {
	const dir = path.join(tmpdir(), 'vscode-openssl-download');
	mkdirSync(dir, { recursive: true });

	cp.spawnSync(
		process.platform === 'win32' ? 'npm.cmd' : 'npm',
		['pack', '@vscode/openssl-prebuilt'],
		{ stdio: ['ignore', 'ignore', 'inherit'], cwd: dir }
	);

	gulp.src('*.tgz', { cwd: dir })
		.pipe(gunzip())
		.pipe(untar())
		.pipe(gulp.dest(`${root}/openssl`))
		.on('error', callback)
		.on('end', () => {
			rmSync(dir, { recursive: true, force: true });
			callback();
		});
};

const compileWithOpenSSLCheck = (reporter: import('./lib/reporter.ts').IReporter) => es.map((_, callback) => {
	compileFromSources(err => {
		if (!err) {
			// no-op
		} else if (err.toString().includes('Could not find directory of OpenSSL installation') && !existsSync(platformOpensslDir)) {
			fancyLog(ansiColors.yellow(`[cli]`), 'OpenSSL libraries not found, acquiring prebuilt bits...');
			acquireBuiltOpenSSL(err => {
				if (err) {
					callback(err as Error);
				} else {
					compileFromSources(err => {
						if (err) {
							reporter(err.toString());
						}
						callback(undefined, '');
					});
				}
			});
		} else {
			reporter(err.toString());
		}
		callback(undefined, '');
	});
});

const warnIfRustNotInstalled = () => {
	if (!hasLocalRust()) {
		fancyLog(ansiColors.yellow(`[cli]`), 'No local Rust install detected, compilation may fail.');
		fancyLog(ansiColors.yellow(`[cli]`), 'Get rust from: https://rustup.rs/');
	}
};

const compileCliTask = task.define('compile-cli', () => {
	warnIfRustNotInstalled();
	const reporter = createReporter('cli');
	return gulp.src(`${root}/Cargo.toml`)
		.pipe(compileWithOpenSSLCheck(reporter))
		.pipe(reporter.end(true));
});


const watchCliTask = task.define('watch-cli', () => {
	warnIfRustNotInstalled();
	return watcher(`${src}/**`, { read: false })
		.pipe(debounce(compileCliTask as task.StreamTask));
});

gulp.task(compileCliTask);
gulp.task(watchCliTask);
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.compile.ts]---
Location: vscode-main/build/gulpfile.compile.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import gulp from 'gulp';
import * as util from './lib/util.ts';
import * as date from './lib/date.ts';
import * as task from './lib/task.ts';
import * as compilation from './lib/compilation.ts';

function makeCompileBuildTask(disableMangle: boolean) {
	return task.series(
		util.rimraf('out-build'),
		date.writeISODate('out-build'),
		compilation.compileApiProposalNamesTask,
		compilation.compileTask('src', 'out-build', true, { disableMangle })
	);
}

// Local/PR compile, including nls and inline sources in sourcemaps, minification, no mangling
export const compileBuildWithoutManglingTask = task.define('compile-build-without-mangling', makeCompileBuildTask(true));
gulp.task(compileBuildWithoutManglingTask);

// CI compile, including nls and inline sources in sourcemaps, mangling, minification, for build
export const compileBuildWithManglingTask = task.define('compile-build-with-mangling', makeCompileBuildTask(false));
gulp.task(compileBuildWithManglingTask);
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.editor.ts]---
Location: vscode-main/build/gulpfile.editor.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import gulp from 'gulp';
import path from 'path';
import * as util from './lib/util.ts';
import { getVersion } from './lib/getVersion.ts';
import * as task from './lib/task.ts';
import es from 'event-stream';
import File from 'vinyl';
import * as i18n from './lib/i18n.ts';
import * as standalone from './lib/standalone.ts';
import * as cp from 'child_process';
import * as compilation from './lib/compilation.ts';
import * as monacoapi from './lib/monaco-api.ts';
import * as fs from 'fs';
import filter from 'gulp-filter';
import { createReporter } from './lib/reporter.ts';
import monacoPackage from './monaco/package.json' with { type: 'json' };

const root = path.dirname(import.meta.dirname);
const sha1 = getVersion(root);
const semver = monacoPackage.version;
const headerVersion = semver + '(' + sha1 + ')';

const BUNDLED_FILE_HEADER = [
	'/*!-----------------------------------------------------------',
	' * Copyright (c) Microsoft Corporation. All rights reserved.',
	' * Version: ' + headerVersion,
	' * Released under the MIT license',
	' * https://github.com/microsoft/vscode/blob/main/LICENSE.txt',
	' *-----------------------------------------------------------*/',
	''
].join('\n');

const extractEditorSrcTask = task.define('extract-editor-src', () => {
	const apiusages = monacoapi.execute().usageContent;
	const extrausages = fs.readFileSync(path.join(root, 'build', 'monaco', 'monaco.usage.recipe')).toString();
	standalone.extractEditor({
		sourcesRoot: path.join(root, 'src'),
		entryPoints: [
			'vs/editor/editor.main.ts',
			'vs/editor/editor.worker.start.ts',
			'vs/editor/common/services/editorWebWorkerMain.ts',
		],
		inlineEntryPoints: [
			apiusages,
			extrausages
		],
		typings: [],
		additionalFilesToCopyOut: [
			'vs/base/browser/dompurify/dompurify.js',
			'vs/base/common/marked/marked.js',
		],
		shakeLevel: 2, // 0-Files, 1-InnerFile, 2-ClassMembers
		importIgnorePattern: /\.css$/,
		destRoot: path.join(root, 'out-editor-src'),
		tsOutDir: '../out-monaco-editor-core/esm/vs',
	});
});

const compileEditorESMTask = task.define('compile-editor-esm', () => {

	const src = 'out-editor-src';
	const out = 'out-monaco-editor-core/esm';

	const compile = compilation.createCompile(src, { build: true, emitError: true, transpileOnly: false, preserveEnglish: true });
	const srcPipe = gulp.src(`${src}/**`, { base: `${src}` });

	return (
		srcPipe
			.pipe(compile())
			.pipe(i18n.processNlsFiles({
				out,
				fileHeader: BUNDLED_FILE_HEADER,
				languages: [...i18n.defaultLanguages, ...i18n.extraLanguages],
			}))
			.pipe(filter(['**', '!**/inlineEntryPoint*', '!**/tsconfig.json', '!**/loader.js']))
			.pipe(gulp.dest(out))
	);
});

function toExternalDTS(contents: string) {
	const lines = contents.split(/\r\n|\r|\n/);
	let killNextCloseCurlyBrace = false;
	for (let i = 0; i < lines.length; i++) {
		const line = lines[i];

		if (killNextCloseCurlyBrace) {
			if ('}' === line) {
				lines[i] = '';
				killNextCloseCurlyBrace = false;
				continue;
			}

			if (line.indexOf('    ') === 0) {
				lines[i] = line.substr(4);
			} else if (line.charAt(0) === '\t') {
				lines[i] = line.substr(1);
			}

			continue;
		}

		if ('declare namespace monaco {' === line) {
			lines[i] = '';
			killNextCloseCurlyBrace = true;
			continue;
		}

		if (line.indexOf('declare namespace monaco.') === 0) {
			lines[i] = line.replace('declare namespace monaco.', 'export namespace ');
		}

		if (line.indexOf('declare var MonacoEnvironment') === 0) {
			lines[i] = `declare global {\n    var MonacoEnvironment: Environment | undefined;\n}`;
		}
	}
	return lines.join('\n').replace(/\n\n\n+/g, '\n\n');
}

const finalEditorResourcesTask = task.define('final-editor-resources', () => {
	return es.merge(
		// other assets
		es.merge(
			gulp.src('build/monaco/LICENSE'),
			gulp.src('build/monaco/ThirdPartyNotices.txt'),
			gulp.src('src/vs/monaco.d.ts')
		).pipe(gulp.dest('out-monaco-editor-core')),

		// place the .d.ts in the esm folder
		gulp.src('src/vs/monaco.d.ts')
			.pipe(es.through(function (data) {
				this.emit('data', new File({
					path: data.path.replace(/monaco\.d\.ts/, 'editor.api.d.ts'),
					base: data.base,
					contents: Buffer.from(toExternalDTS(data.contents.toString()))
				}));
			}))
			.pipe(gulp.dest('out-monaco-editor-core/esm/vs/editor')),

		// package.json
		gulp.src('build/monaco/package.json')
			.pipe(es.through(function (data) {
				const json = JSON.parse(data.contents.toString());
				json.private = false;

				let markedVersion;
				let dompurifyVersion;
				try {
					const markedManifestPath = path.join(root, 'src/vs/base/common/marked/cgmanifest.json');
					const dompurifyManifestPath = path.join(root, 'src/vs/base/browser/dompurify/cgmanifest.json');

					const markedManifest = JSON.parse(fs.readFileSync(markedManifestPath, 'utf8'));
					const dompurifyManifest = JSON.parse(fs.readFileSync(dompurifyManifestPath, 'utf8'));

					markedVersion = markedManifest.registrations[0].version;
					dompurifyVersion = dompurifyManifest.registrations[0].version;

					if (!markedVersion || !dompurifyVersion) {
						throw new Error('Unable to read versions from cgmanifest.json files');
					}
				} catch (error) {
					throw new Error(`Failed to read cgmanifest.json files for monaco-editor-core dependencies: ${error.message}`);
				}

				setUnsetField(json, 'dependencies', {
					'marked': markedVersion,
					'dompurify': dompurifyVersion
				});

				data.contents = Buffer.from(JSON.stringify(json, null, '  '));
				this.emit('data', data);
			}))
			.pipe(gulp.dest('out-monaco-editor-core')),

		// version.txt
		gulp.src('build/monaco/version.txt')
			.pipe(es.through(function (data) {
				data.contents = Buffer.from(`monaco-editor-core: https://github.com/microsoft/vscode/tree/${sha1}`);
				this.emit('data', data);
			}))
			.pipe(gulp.dest('out-monaco-editor-core')),

		// README.md
		gulp.src('build/monaco/README-npm.md')
			.pipe(es.through(function (data) {
				this.emit('data', new File({
					path: data.path.replace(/README-npm\.md/, 'README.md'),
					base: data.base,
					contents: data.contents
				}));
			}))
			.pipe(gulp.dest('out-monaco-editor-core')),
	);
});

gulp.task('extract-editor-src',
	task.series(
		util.rimraf('out-editor-src'),
		extractEditorSrcTask
	)
);

gulp.task('editor-distro',
	task.series(
		task.parallel(
			util.rimraf('out-editor-src'),
			util.rimraf('out-monaco-editor-core'),
		),
		extractEditorSrcTask,
		compileEditorESMTask,
		finalEditorResourcesTask
	)
);

gulp.task('monacodts', task.define('monacodts', () => {
	const result = monacoapi.execute();
	fs.writeFileSync(result.filePath, result.content);
	fs.writeFileSync(path.join(root, 'src/vs/editor/common/standalone/standaloneEnums.ts'), result.enums);
	return Promise.resolve(true);
}));

//#region monaco type checking

function createTscCompileTask(watch: boolean) {
	return () => {
		return new Promise((resolve, reject) => {
			const args = ['./node_modules/.bin/tsc', '-p', './src/tsconfig.monaco.json', '--noEmit'];
			if (watch) {
				args.push('-w');
			}
			const child = cp.spawn(`node`, args, {
				cwd: path.join(import.meta.dirname, '..'),
				// stdio: [null, 'pipe', 'inherit']
			});
			const errors: string[] = [];
			const reporter = createReporter('monaco');

			let report: NodeJS.ReadWriteStream | undefined;
			const magic = /[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g; // https://stackoverflow.com/questions/25245716/remove-all-ansi-colors-styles-from-strings

			child.stdout.on('data', data => {
				let str = String(data);
				str = str.replace(magic, '').trim();
				if (str.indexOf('Starting compilation') >= 0 || str.indexOf('File change detected') >= 0) {
					errors.length = 0;
					report = reporter.end(false);

				} else if (str.indexOf('Compilation complete') >= 0) {
					// @ts-ignore
					report.end();

				} else if (str) {
					const match = /(.*\(\d+,\d+\): )(.*: )(.*)/.exec(str);
					if (match) {
						// trying to massage the message so that it matches the gulp-tsb error messages
						// e.g. src/vs/base/common/strings.ts(663,5): error TS2322: Type '1234' is not assignable to type 'string'.
						const fullpath = path.join(root, match[1]);
						const message = match[3];
						reporter(fullpath + message);
					} else {
						reporter(str);
					}
				}
			});
			child.on('exit', resolve);
			child.on('error', reject);
		});
	};
}

export const monacoTypecheckWatchTask = task.define('monaco-typecheck-watch', createTscCompileTask(true));

export const monacoTypecheckTask = task.define('monaco-typecheck', createTscCompileTask(false));

//#endregion
/**
 * Sets a field on an object only if it's not already set, otherwise throws an error
 * @param obj The object to modify
 * @param field The field name to set
 * @param value The value to set
 */
function setUnsetField(obj: Record<string, unknown>, field: string, value: unknown) {
	if (obj[field] !== undefined) {
		throw new Error(`Field "${field}" is already set (but was expected to not be).`);
	}
	obj[field] = value;
}
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.extensions.ts]---
Location: vscode-main/build/gulpfile.extensions.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

// Increase max listeners for event emitters
import { EventEmitter } from 'events';
EventEmitter.defaultMaxListeners = 100;

import gulp from 'gulp';
import * as path from 'path';
import * as nodeUtil from 'util';
import es from 'event-stream';
import filter from 'gulp-filter';
import * as util from './lib/util.ts';
import { getVersion } from './lib/getVersion.ts';
import * as task from './lib/task.ts';
import watcher from './lib/watch/index.ts';
import { createReporter } from './lib/reporter.ts';
import glob from 'glob';
import plumber from 'gulp-plumber';
import * as ext from './lib/extensions.ts';
import * as tsb from './lib/tsb/index.ts';
import sourcemaps from 'gulp-sourcemaps';

const root = path.dirname(import.meta.dirname);
const commit = getVersion(root);

// To save 250ms for each gulp startup, we are caching the result here
// const compilations = glob.sync('**/tsconfig.json', {
// 	cwd: extensionsPath,
// 	ignore: ['**/out/**', '**/node_modules/**']
// });
const compilations = [
	'extensions/configuration-editing/tsconfig.json',
	'extensions/css-language-features/client/tsconfig.json',
	'extensions/css-language-features/server/tsconfig.json',
	'extensions/debug-auto-launch/tsconfig.json',
	'extensions/debug-server-ready/tsconfig.json',
	'extensions/emmet/tsconfig.json',
	'extensions/extension-editing/tsconfig.json',
	'extensions/git/tsconfig.json',
	'extensions/git-base/tsconfig.json',
	'extensions/github/tsconfig.json',
	'extensions/github-authentication/tsconfig.json',
	'extensions/grunt/tsconfig.json',
	'extensions/gulp/tsconfig.json',
	'extensions/html-language-features/client/tsconfig.json',
	'extensions/html-language-features/server/tsconfig.json',
	'extensions/ipynb/tsconfig.json',
	'extensions/jake/tsconfig.json',
	'extensions/json-language-features/client/tsconfig.json',
	'extensions/json-language-features/server/tsconfig.json',
	'extensions/markdown-language-features/tsconfig.json',
	'extensions/markdown-math/tsconfig.json',
	'extensions/media-preview/tsconfig.json',
	'extensions/merge-conflict/tsconfig.json',
	'extensions/mermaid-chat-features/tsconfig.json',
	'extensions/terminal-suggest/tsconfig.json',
	'extensions/microsoft-authentication/tsconfig.json',
	'extensions/notebook-renderers/tsconfig.json',
	'extensions/npm/tsconfig.json',
	'extensions/php-language-features/tsconfig.json',
	'extensions/references-view/tsconfig.json',
	'extensions/search-result/tsconfig.json',
	'extensions/simple-browser/tsconfig.json',
	'extensions/tunnel-forwarding/tsconfig.json',
	'extensions/typescript-language-features/web/tsconfig.json',
	'extensions/typescript-language-features/tsconfig.json',
	'extensions/vscode-api-tests/tsconfig.json',
	'extensions/vscode-colorize-tests/tsconfig.json',
	'extensions/vscode-colorize-perf-tests/tsconfig.json',
	'extensions/vscode-test-resolver/tsconfig.json',

	'.vscode/extensions/vscode-selfhost-test-provider/tsconfig.json',
	'.vscode/extensions/vscode-selfhost-import-aid/tsconfig.json',
];

const getBaseUrl = (out: string) => `https://main.vscode-cdn.net/sourcemaps/${commit}/${out}`;

const tasks = compilations.map(function (tsconfigFile) {
	const absolutePath = path.join(root, tsconfigFile);
	const relativeDirname = path.dirname(tsconfigFile.replace(/^(.*\/)?extensions\//i, ''));

	const overrideOptions: { sourceMap?: boolean; inlineSources?: boolean; base?: string } = {};
	overrideOptions.sourceMap = true;

	const name = relativeDirname.replace(/\//g, '-');

	const srcRoot = path.dirname(tsconfigFile);
	const srcBase = path.join(srcRoot, 'src');
	const src = path.join(srcBase, '**');
	const srcOpts = { cwd: root, base: srcBase, dot: true };

	const out = path.join(srcRoot, 'out');
	const baseUrl = getBaseUrl(out);

	function createPipeline(build: boolean, emitError?: boolean, transpileOnly?: boolean) {
		const reporter = createReporter('extensions');

		overrideOptions.inlineSources = Boolean(build);
		overrideOptions.base = path.dirname(absolutePath);

		const compilation = tsb.create(absolutePath, overrideOptions, { verbose: false, transpileOnly, transpileOnlyIncludesDts: transpileOnly, transpileWithEsbuild: true }, err => reporter(err.toString()));

		const pipeline = function () {
			const input = es.through();
			const tsFilter = filter(['**/*.ts', '!**/lib/lib*.d.ts', '!**/node_modules/**'], { restore: true, dot: true });
			const output = input
				.pipe(plumber({
					errorHandler: function (err) {
						if (err && !err.__reporter__) {
							reporter(err);
						}
					}
				}))
				.pipe(tsFilter)
				.pipe(util.loadSourcemaps())
				.pipe(compilation())
				.pipe(build ? util.stripSourceMappingURL() : es.through())
				.pipe(sourcemaps.write('.', {
					sourceMappingURL: !build ? undefined : f => `${baseUrl}/${f.relative}.map`,
					addComment: !!build,
					includeContent: !!build,
					// note: trailing slash is important, else the source URLs in V8's file coverage are incorrect
					sourceRoot: '../src/',
				}))
				.pipe(tsFilter.restore)
				.pipe(reporter.end(!!emitError));

			return es.duplex(input, output);
		};

		// add src-stream for project files
		pipeline.tsProjectSrc = () => {
			return compilation.src(srcOpts);
		};
		return pipeline;
	}

	const cleanTask = task.define(`clean-extension-${name}`, util.rimraf(out));

	const transpileTask = task.define(`transpile-extension:${name}`, task.series(cleanTask, () => {
		const pipeline = createPipeline(false, true, true);
		const nonts = gulp.src(src, srcOpts).pipe(filter(['**', '!**/*.ts']));
		const input = es.merge(nonts, pipeline.tsProjectSrc());

		return input
			.pipe(pipeline())
			.pipe(gulp.dest(out));
	}));

	const compileTask = task.define(`compile-extension:${name}`, task.series(cleanTask, () => {
		const pipeline = createPipeline(false, true);
		const nonts = gulp.src(src, srcOpts).pipe(filter(['**', '!**/*.ts']));
		const input = es.merge(nonts, pipeline.tsProjectSrc());

		return input
			.pipe(pipeline())
			.pipe(gulp.dest(out));
	}));

	const watchTask = task.define(`watch-extension:${name}`, task.series(cleanTask, () => {
		const pipeline = createPipeline(false);
		const nonts = gulp.src(src, srcOpts).pipe(filter(['**', '!**/*.ts']));
		const input = es.merge(nonts, pipeline.tsProjectSrc());
		const watchInput = watcher(src, { ...srcOpts, ...{ readDelay: 200 } });

		return watchInput
			.pipe(util.incremental(pipeline, input))
			.pipe(gulp.dest(out));
	}));

	// Tasks
	gulp.task(transpileTask);
	gulp.task(compileTask);
	gulp.task(watchTask);

	return { transpileTask, compileTask, watchTask };
});

const transpileExtensionsTask = task.define('transpile-extensions', task.parallel(...tasks.map(t => t.transpileTask)));
gulp.task(transpileExtensionsTask);

export const compileExtensionsTask = task.define('compile-extensions', task.parallel(...tasks.map(t => t.compileTask)));
gulp.task(compileExtensionsTask);

export const watchExtensionsTask = task.define('watch-extensions', task.parallel(...tasks.map(t => t.watchTask)));
gulp.task(watchExtensionsTask);

//#region Extension media

export const compileExtensionMediaTask = task.define('compile-extension-media', () => ext.buildExtensionMedia(false));
gulp.task(compileExtensionMediaTask);

export const watchExtensionMedia = task.define('watch-extension-media', () => ext.buildExtensionMedia(true));
gulp.task(watchExtensionMedia);

export const compileExtensionMediaBuildTask = task.define('compile-extension-media-build', () => ext.buildExtensionMedia(false, '.build/extensions'));
gulp.task(compileExtensionMediaBuildTask);

//#endregion

//#region Azure Pipelines

/**
 * Cleans the build directory for extensions
 */
export const cleanExtensionsBuildTask = task.define('clean-extensions-build', util.rimraf('.build/extensions'));

/**
 * brings in the marketplace extensions for the build
 */
const bundleMarketplaceExtensionsBuildTask = task.define('bundle-marketplace-extensions-build', () => ext.packageMarketplaceExtensionsStream(false).pipe(gulp.dest('.build')));

/**
 * Compiles the non-native extensions for the build
 * @note this does not clean the directory ahead of it. See {@link cleanExtensionsBuildTask} for that.
 */
export const compileNonNativeExtensionsBuildTask = task.define('compile-non-native-extensions-build', task.series(
	bundleMarketplaceExtensionsBuildTask,
	task.define('bundle-non-native-extensions-build', () => ext.packageNonNativeLocalExtensionsStream(false, false).pipe(gulp.dest('.build')))
));
gulp.task(compileNonNativeExtensionsBuildTask);

/**
 * Compiles the native extensions for the build
 * @note this does not clean the directory ahead of it. See {@link cleanExtensionsBuildTask} for that.
 */
export const compileNativeExtensionsBuildTask = task.define('compile-native-extensions-build', () => ext.packageNativeLocalExtensionsStream(false, false).pipe(gulp.dest('.build')));
gulp.task(compileNativeExtensionsBuildTask);

/**
 * Compiles the extensions for the build.
 * This is essentially a helper task that combines {@link cleanExtensionsBuildTask}, {@link compileNonNativeExtensionsBuildTask} and {@link compileNativeExtensionsBuildTask}
 */
export const compileAllExtensionsBuildTask = task.define('compile-extensions-build', task.series(
	cleanExtensionsBuildTask,
	bundleMarketplaceExtensionsBuildTask,
	task.define('bundle-extensions-build', () => ext.packageAllLocalExtensionsStream(false, false).pipe(gulp.dest('.build'))),
));
gulp.task(compileAllExtensionsBuildTask);

// This task is run in the compilation stage of the CI pipeline. We only compile the non-native extensions since those can be fully built regardless of platform.
// This defers the native extensions to the platform specific stage of the CI pipeline.
gulp.task(task.define('extensions-ci', task.series(compileNonNativeExtensionsBuildTask, compileExtensionMediaBuildTask)));

const compileExtensionsBuildPullRequestTask = task.define('compile-extensions-build-pr', task.series(
	cleanExtensionsBuildTask,
	bundleMarketplaceExtensionsBuildTask,
	task.define('bundle-extensions-build-pr', () => ext.packageAllLocalExtensionsStream(false, true).pipe(gulp.dest('.build'))),
));
gulp.task(compileExtensionsBuildPullRequestTask);

// This task is run in the compilation stage of the PR pipeline. We compile all extensions in it to verify compilation.
gulp.task(task.define('extensions-ci-pr', task.series(compileExtensionsBuildPullRequestTask, compileExtensionMediaBuildTask)));

//#endregion

export const compileWebExtensionsTask = task.define('compile-web', () => buildWebExtensions(false));
gulp.task(compileWebExtensionsTask);

export const watchWebExtensionsTask = task.define('watch-web', () => buildWebExtensions(true));
gulp.task(watchWebExtensionsTask);

async function buildWebExtensions(isWatch: boolean) {
	const extensionsPath = path.join(root, 'extensions');
	const webpackConfigLocations = await nodeUtil.promisify(glob)(
		path.join(extensionsPath, '**', 'extension-browser.webpack.config.js'),
		{ ignore: ['**/node_modules'] }
	);
	return ext.webpackExtensions('packaging web extension', isWatch, webpackConfigLocations.map(configPath => ({ configPath })));
}
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.hygiene.ts]---
Location: vscode-main/build/gulpfile.hygiene.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import gulp from 'gulp';
import es from 'event-stream';
import path from 'path';
import fs from 'fs';
import * as task from './lib/task.ts';
import { hygiene } from './hygiene.ts';

const dirName = path.dirname(new URL(import.meta.url).pathname);

function checkPackageJSON(this: NodeJS.ReadWriteStream, actualPath: string) {
	const actual = JSON.parse(fs.readFileSync(path.join(dirName, '..', actualPath), 'utf8'));
	const rootPackageJSON = JSON.parse(fs.readFileSync(path.join(dirName, '..', 'package.json'), 'utf8'));
	const checkIncluded = (set1: Record<string, string>, set2: Record<string, string>) => {
		for (const depName in set1) {
			const depVersion = set1[depName];
			const rootDepVersion = set2[depName];
			if (!rootDepVersion) {
				// missing in root is allowed
				continue;
			}
			if (depVersion !== rootDepVersion) {
				this.emit(
					'error',
					`The dependency ${depName} in '${actualPath}' (${depVersion}) is different than in the root package.json (${rootDepVersion})`
				);
			}
		}
	};

	checkIncluded(actual.dependencies, rootPackageJSON.dependencies);
	checkIncluded(actual.devDependencies, rootPackageJSON.devDependencies);
}

const checkPackageJSONTask = task.define('check-package-json', () => {
	return gulp.src('package.json').pipe(
		es.through(function () {
			checkPackageJSON.call(this, 'remote/package.json');
			checkPackageJSON.call(this, 'remote/web/package.json');
			checkPackageJSON.call(this, 'build/package.json');
		})
	);
});
gulp.task(checkPackageJSONTask);

const hygieneTask = task.define('hygiene', task.series(checkPackageJSONTask, () => hygiene(undefined, false)));
gulp.task(hygieneTask);
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.reh.ts]---
Location: vscode-main/build/gulpfile.reh.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import gulp from 'gulp';
import * as path from 'path';
import es from 'event-stream';
import * as util from './lib/util.ts';
import { getVersion } from './lib/getVersion.ts';
import * as task from './lib/task.ts';
import * as optimize from './lib/optimize.ts';
import { inlineMeta } from './lib/inlineMeta.ts';
import product from '../product.json' with { type: 'json' };
import rename from 'gulp-rename';
import replace from 'gulp-replace';
import filter from 'gulp-filter';
import { getProductionDependencies } from './lib/dependencies.ts';
import { readISODate } from './lib/date.ts';
import vfs from 'vinyl-fs';
import packageJson from '../package.json' with { type: 'json' };
import flatmap from 'gulp-flatmap';
import gunzip from 'gulp-gunzip';
import untar from 'gulp-untar';
import File from 'vinyl';
import * as fs from 'fs';
import glob from 'glob';
import { compileBuildWithManglingTask } from './gulpfile.compile.ts';
import { cleanExtensionsBuildTask, compileNonNativeExtensionsBuildTask, compileNativeExtensionsBuildTask, compileExtensionMediaBuildTask } from './gulpfile.extensions.ts';
import { vscodeWebResourceIncludes, createVSCodeWebFileContentMapper } from './gulpfile.vscode.web.ts';
import * as cp from 'child_process';
import log from 'fancy-log';
import buildfile from './buildfile.ts';
import { fetchUrls, fetchGithub } from './lib/fetch.ts';
import jsonEditor from 'gulp-json-editor';


const REPO_ROOT = path.dirname(import.meta.dirname);
const commit = getVersion(REPO_ROOT);
const BUILD_ROOT = path.dirname(REPO_ROOT);
const REMOTE_FOLDER = path.join(REPO_ROOT, 'remote');

// Targets

const BUILD_TARGETS = [
	{ platform: 'win32', arch: 'x64' },
	{ platform: 'win32', arch: 'arm64' },
	{ platform: 'darwin', arch: 'x64' },
	{ platform: 'darwin', arch: 'arm64' },
	{ platform: 'linux', arch: 'x64' },
	{ platform: 'linux', arch: 'armhf' },
	{ platform: 'linux', arch: 'arm64' },
	{ platform: 'alpine', arch: 'arm64' },
	// legacy: we use to ship only one alpine so it was put in the arch, but now we ship
	// multiple alpine images and moved to a better model (alpine as the platform)
	{ platform: 'linux', arch: 'alpine' },
];

const serverResourceIncludes = [

	// NLS
	'out-build/nls.messages.json',
	'out-build/nls.keys.json',

	// Process monitor
	'out-build/vs/base/node/cpuUsage.sh',
	'out-build/vs/base/node/ps.sh',

	// External Terminal
	'out-build/vs/workbench/contrib/externalTerminal/**/*.scpt',

	// Terminal shell integration
	'out-build/vs/workbench/contrib/terminal/common/scripts/shellIntegration.ps1',
	'out-build/vs/workbench/contrib/terminal/common/scripts/CodeTabExpansion.psm1',
	'out-build/vs/workbench/contrib/terminal/common/scripts/GitTabExpansion.psm1',
	'out-build/vs/workbench/contrib/terminal/common/scripts/shellIntegration-bash.sh',
	'out-build/vs/workbench/contrib/terminal/common/scripts/shellIntegration-env.zsh',
	'out-build/vs/workbench/contrib/terminal/common/scripts/shellIntegration-profile.zsh',
	'out-build/vs/workbench/contrib/terminal/common/scripts/shellIntegration-rc.zsh',
	'out-build/vs/workbench/contrib/terminal/common/scripts/shellIntegration-login.zsh',
	'out-build/vs/workbench/contrib/terminal/common/scripts/shellIntegration.fish',

];

const serverResourceExcludes = [
	'!out-build/vs/**/{electron-browser,electron-main,electron-utility}/**',
	'!out-build/vs/editor/standalone/**',
	'!out-build/vs/workbench/**/*-tb.png',
	'!**/test/**'
];

const serverResources = [
	...serverResourceIncludes,
	...serverResourceExcludes
];

const serverWithWebResourceIncludes = [
	...serverResourceIncludes,
	'out-build/vs/code/browser/workbench/*.html',
	...vscodeWebResourceIncludes
];

const serverWithWebResourceExcludes = [
	...serverResourceExcludes,
	'!out-build/vs/code/**/*-dev.html'
];

const serverWithWebResources = [
	...serverWithWebResourceIncludes,
	...serverWithWebResourceExcludes
];
const serverEntryPoints = buildfile.codeServer;

const webEntryPoints = [
	buildfile.workerEditor,
	buildfile.workerExtensionHost,
	buildfile.workerNotebook,
	buildfile.workerLanguageDetection,
	buildfile.workerLocalFileSearch,
	buildfile.workerOutputLinks,
	buildfile.workerBackgroundTokenization,
	buildfile.keyboardMaps,
	buildfile.codeWeb
].flat();

const serverWithWebEntryPoints = [

	// Include all of server
	...serverEntryPoints,

	// Include all of web
	...webEntryPoints,
].flat();

const bootstrapEntryPoints = [
	'out-build/server-main.js',
	'out-build/server-cli.js',
	'out-build/bootstrap-fork.js'
];

function getNodeVersion() {
	const npmrc = fs.readFileSync(path.join(REPO_ROOT, 'remote', '.npmrc'), 'utf8');
	const nodeVersion = /^target="(.*)"$/m.exec(npmrc)![1];
	const internalNodeVersion = /^ms_build_id="(.*)"$/m.exec(npmrc)![1];
	return { nodeVersion, internalNodeVersion };
}

function getNodeChecksum(expectedName: string): string | undefined {
	const nodeJsChecksums = fs.readFileSync(path.join(REPO_ROOT, 'build', 'checksums', 'nodejs.txt'), 'utf8');
	for (const line of nodeJsChecksums.split('\n')) {
		const [checksum, name] = line.split(/\s+/);
		if (name === expectedName) {
			return checksum;
		}
	}
	return undefined;
}

function extractAlpinefromDocker(nodeVersion: string, platform: string, arch: string) {
	const imageName = arch === 'arm64' ? 'arm64v8/node' : 'node';
	log(`Downloading node.js ${nodeVersion} ${platform} ${arch} from docker image ${imageName}`);
	const contents = cp.execSync(`docker run --rm ${imageName}:${nodeVersion}-alpine /bin/sh -c 'cat \`which node\`'`, { maxBuffer: 100 * 1024 * 1024, encoding: 'buffer' });
	// eslint-disable-next-line local/code-no-dangerous-type-assertions
	return es.readArray([new File({ path: 'node', contents, stat: { mode: parseInt('755', 8) } as fs.Stats })]);
}

const { nodeVersion, internalNodeVersion } = getNodeVersion();

BUILD_TARGETS.forEach(({ platform, arch }) => {
	gulp.task(task.define(`node-${platform}-${arch}`, () => {
		const nodePath = path.join('.build', 'node', `v${nodeVersion}`, `${platform}-${arch}`);

		if (!fs.existsSync(nodePath)) {
			util.rimraf(nodePath);

			return nodejs(platform, arch)!
				.pipe(vfs.dest(nodePath));
		}

		return Promise.resolve(null);
	}));
});

const defaultNodeTask = gulp.task(`node-${process.platform}-${process.arch}`);

if (defaultNodeTask) {
	// eslint-disable-next-line local/code-no-any-casts
	gulp.task(task.define('node', defaultNodeTask as any));
}

function nodejs(platform: string, arch: string): NodeJS.ReadWriteStream | undefined {

	if (arch === 'armhf') {
		arch = 'armv7l';
	} else if (arch === 'alpine') {
		platform = 'alpine';
		arch = 'x64';
	}

	log(`Downloading node.js ${nodeVersion} ${platform} ${arch} from ${product.nodejsRepository}...`);

	const glibcPrefix = process.env['VSCODE_NODE_GLIBC'] ?? '';
	let expectedName: string | undefined;
	switch (platform) {
		case 'win32':
			expectedName = product.nodejsRepository !== 'https://nodejs.org' ?
				`win-${arch}-node.exe` : `win-${arch}/node.exe`;
			break;

		case 'darwin':
			expectedName = `node-v${nodeVersion}-${platform}-${arch}.tar.gz`;
			break;
		case 'linux':
			expectedName = `node-v${nodeVersion}${glibcPrefix}-${platform}-${arch}.tar.gz`;
			break;
		case 'alpine':
			expectedName = `node-v${nodeVersion}-linux-${arch}-musl.tar.gz`;
			break;
	}
	const checksumSha256 = expectedName ? getNodeChecksum(expectedName) : undefined;

	if (checksumSha256) {
		log(`Using SHA256 checksum for checking integrity: ${checksumSha256}`);
	} else {
		log.warn(`Unable to verify integrity of downloaded node.js binary because no SHA256 checksum was found!`);
	}

	switch (platform) {
		case 'win32':
			return (product.nodejsRepository !== 'https://nodejs.org' ?
				fetchGithub(product.nodejsRepository, { version: `${nodeVersion}-${internalNodeVersion}`, name: expectedName!, checksumSha256 }) :
				fetchUrls(`/dist/v${nodeVersion}/win-${arch}/node.exe`, { base: 'https://nodejs.org', checksumSha256 }))
				.pipe(rename('node.exe'));
		case 'darwin':
		case 'linux':
			return (product.nodejsRepository !== 'https://nodejs.org' ?
				fetchGithub(product.nodejsRepository, { version: `${nodeVersion}-${internalNodeVersion}`, name: expectedName!, checksumSha256 }) :
				fetchUrls(`/dist/v${nodeVersion}/node-v${nodeVersion}-${platform}-${arch}.tar.gz`, { base: 'https://nodejs.org', checksumSha256 })
			).pipe(flatmap(stream => stream.pipe(gunzip()).pipe(untar())))
				.pipe(filter('**/node'))
				.pipe(util.setExecutableBit('**'))
				.pipe(rename('node'));
		case 'alpine':
			return product.nodejsRepository !== 'https://nodejs.org' ?
				fetchGithub(product.nodejsRepository, { version: `${nodeVersion}-${internalNodeVersion}`, name: expectedName!, checksumSha256 })
					.pipe(flatmap(stream => stream.pipe(gunzip()).pipe(untar())))
					.pipe(filter('**/node'))
					.pipe(util.setExecutableBit('**'))
					.pipe(rename('node'))
				: extractAlpinefromDocker(nodeVersion, platform, arch);
	}
}

function packageTask(type: string, platform: string, arch: string, sourceFolderName: string, destinationFolderName: string) {
	const destination = path.join(BUILD_ROOT, destinationFolderName);

	return () => {
		const src = gulp.src(sourceFolderName + '/**', { base: '.' })
			.pipe(rename(function (path) { path.dirname = path.dirname!.replace(new RegExp('^' + sourceFolderName), 'out'); }))
			.pipe(util.setExecutableBit(['**/*.sh']))
			.pipe(filter(['**', '!**/*.{js,css}.map']));

		const workspaceExtensionPoints = ['debuggers', 'jsonValidation'];
		const isUIExtension = (manifest: { extensionKind?: string; main?: string; contributes?: Record<string, unknown> }) => {
			switch (manifest.extensionKind) {
				case 'ui': return true;
				case 'workspace': return false;
				default: {
					if (manifest.main) {
						return false;
					}
					if (manifest.contributes && Object.keys(manifest.contributes).some(key => workspaceExtensionPoints.indexOf(key) !== -1)) {
						return false;
					}
					// Default is UI Extension
					return true;
				}
			}
		};
		const localWorkspaceExtensions = glob.sync('extensions/*/package.json')
			.filter((extensionPath) => {
				if (type === 'reh-web') {
					return true; // web: ship all extensions for now
				}

				// Skip shipping UI extensions because the client side will have them anyways
				// and they'd just increase the download without being used
				const manifest = JSON.parse(fs.readFileSync(path.join(REPO_ROOT, extensionPath)).toString());
				return !isUIExtension(manifest);
			}).map((extensionPath) => path.basename(path.dirname(extensionPath)))
			.filter(name => name !== 'vscode-api-tests' && name !== 'vscode-test-resolver'); // Do not ship the test extensions
		const builtInExtensions: Array<{ name: string; platforms?: string[]; clientOnly?: boolean }> = JSON.parse(fs.readFileSync(path.join(REPO_ROOT, 'product.json'), 'utf8')).builtInExtensions;
		const marketplaceExtensions = builtInExtensions
			.filter(entry => !entry.platforms || new Set(entry.platforms).has(platform))
			.filter(entry => !entry.clientOnly)
			.map(entry => entry.name);
		const extensionPaths = [...localWorkspaceExtensions, ...marketplaceExtensions]
			.map(name => `.build/extensions/${name}/**`);

		const extensions = gulp.src(extensionPaths, { base: '.build', dot: true });
		const extensionsCommonDependencies = gulp.src('.build/extensions/node_modules/**', { base: '.build', dot: true });
		const sources = es.merge(src, extensions, extensionsCommonDependencies)
			.pipe(filter(['**', '!**/*.{js,css}.map'], { dot: true }));

		let version = packageJson.version;
		const quality = (product as typeof product & { quality?: string }).quality;

		if (quality && quality !== 'stable') {
			version += '-' + quality;
		}

		const name = product.nameShort;

		let packageJsonContents = '';
		const packageJsonStream = gulp.src(['remote/package.json'], { base: 'remote' })
			.pipe(jsonEditor({ name, version, dependencies: undefined, optionalDependencies: undefined, type: 'module' }))
			.pipe(es.through(function (file) {
				packageJsonContents = file.contents.toString();
				this.emit('data', file);
			}));

		let productJsonContents = '';
		const productJsonStream = gulp.src(['product.json'], { base: '.' })
			.pipe(jsonEditor({ commit, date: readISODate('out-build'), version }))
			.pipe(es.through(function (file) {
				productJsonContents = file.contents.toString();
				this.emit('data', file);
			}));

		const license = gulp.src(['remote/LICENSE'], { base: 'remote', allowEmpty: true });

		const jsFilter = util.filter(data => !data.isDirectory() && /\.js$/.test(data.path));

		const productionDependencies = getProductionDependencies(REMOTE_FOLDER);
		const dependenciesSrc = productionDependencies.map(d => path.relative(REPO_ROOT, d)).map(d => [`${d}/**`, `!${d}/**/{test,tests}/**`, `!${d}/.bin/**`]).flat();
		const deps = gulp.src(dependenciesSrc, { base: 'remote', dot: true })
			// filter out unnecessary files, no source maps in server build
			.pipe(filter(['**', '!**/package-lock.json', '!**/*.{js,css}.map']))
			.pipe(util.cleanNodeModules(path.join(import.meta.dirname, '.moduleignore')))
			.pipe(util.cleanNodeModules(path.join(import.meta.dirname, `.moduleignore.${process.platform}`)))
			.pipe(jsFilter)
			.pipe(util.stripSourceMappingURL())
			.pipe(jsFilter.restore);

		const nodePath = `.build/node/v${nodeVersion}/${platform}-${arch}`;
		const node = gulp.src(`${nodePath}/**`, { base: nodePath, dot: true });

		let web: NodeJS.ReadWriteStream[] = [];
		if (type === 'reh-web') {
			web = [
				'resources/server/favicon.ico',
				'resources/server/code-192.png',
				'resources/server/code-512.png',
				'resources/server/manifest.json'
			].map(resource => gulp.src(resource, { base: '.' }).pipe(rename(resource)));
		}

		const all = es.merge(
			packageJsonStream,
			productJsonStream,
			license,
			sources,
			deps,
			node,
			...web
		);

		let result = all
			.pipe(util.skipDirectories())
			.pipe(util.fixWin32DirectoryPermissions());

		if (platform === 'win32') {
			result = es.merge(result,
				gulp.src('resources/server/bin/remote-cli/code.cmd', { base: '.' })
					.pipe(replace('@@VERSION@@', version))
					.pipe(replace('@@COMMIT@@', commit || ''))
					.pipe(replace('@@APPNAME@@', product.applicationName))
					.pipe(rename(`bin/remote-cli/${product.applicationName}.cmd`)),
				gulp.src('resources/server/bin/helpers/browser.cmd', { base: '.' })
					.pipe(replace('@@VERSION@@', version))
					.pipe(replace('@@COMMIT@@', commit || ''))
					.pipe(replace('@@APPNAME@@', product.applicationName))
					.pipe(rename(`bin/helpers/browser.cmd`)),
				gulp.src('resources/server/bin/code-server.cmd', { base: '.' })
					.pipe(rename(`bin/${product.serverApplicationName}.cmd`)),
			);
		} else if (platform === 'linux' || platform === 'alpine' || platform === 'darwin') {
			result = es.merge(result,
				gulp.src(`resources/server/bin/remote-cli/${platform === 'darwin' ? 'code-darwin.sh' : 'code-linux.sh'}`, { base: '.' })
					.pipe(replace('@@VERSION@@', version))
					.pipe(replace('@@COMMIT@@', commit || ''))
					.pipe(replace('@@APPNAME@@', product.applicationName))
					.pipe(rename(`bin/remote-cli/${product.applicationName}`))
					.pipe(util.setExecutableBit()),
				gulp.src(`resources/server/bin/helpers/${platform === 'darwin' ? 'browser-darwin.sh' : 'browser-linux.sh'}`, { base: '.' })
					.pipe(replace('@@VERSION@@', version))
					.pipe(replace('@@COMMIT@@', commit || ''))
					.pipe(replace('@@APPNAME@@', product.applicationName))
					.pipe(rename(`bin/helpers/browser.sh`))
					.pipe(util.setExecutableBit()),
				gulp.src(`resources/server/bin/${platform === 'darwin' ? 'code-server-darwin.sh' : 'code-server-linux.sh'}`, { base: '.' })
					.pipe(rename(`bin/${product.serverApplicationName}`))
					.pipe(util.setExecutableBit())
			);
		}

		if (platform === 'linux' || platform === 'alpine') {
			result = es.merge(result,
				gulp.src(`resources/server/bin/helpers/check-requirements-linux.sh`, { base: '.' })
					.pipe(rename(`bin/helpers/check-requirements.sh`))
					.pipe(util.setExecutableBit())
			);
		}

		result = inlineMeta(result, {
			targetPaths: bootstrapEntryPoints,
			packageJsonFn: () => packageJsonContents,
			productJsonFn: () => productJsonContents
		});

		return result.pipe(vfs.dest(destination));
	};
}

/**
 * @param product The parsed product.json file contents
 */
function tweakProductForServerWeb(product: typeof import('../product.json')) {
	const result: typeof product & { webEndpointUrlTemplate?: string } = { ...product };
	delete result.webEndpointUrlTemplate;
	return result;
}

['reh', 'reh-web'].forEach(type => {
	const bundleTask = task.define(`bundle-vscode-${type}`, task.series(
		util.rimraf(`out-vscode-${type}`),
		optimize.bundleTask(
			{
				out: `out-vscode-${type}`,
				esm: {
					src: 'out-build',
					entryPoints: [
						...(type === 'reh' ? serverEntryPoints : serverWithWebEntryPoints),
						...bootstrapEntryPoints
					],
					resources: type === 'reh' ? serverResources : serverWithWebResources,
					fileContentMapper: createVSCodeWebFileContentMapper('.build/extensions', type === 'reh-web' ? tweakProductForServerWeb(product) : product)
				}
			}
		)
	));

	const minifyTask = task.define(`minify-vscode-${type}`, task.series(
		bundleTask,
		util.rimraf(`out-vscode-${type}-min`),
		optimize.minifyTask(`out-vscode-${type}`, `https://main.vscode-cdn.net/sourcemaps/${commit}/core`)
	));
	gulp.task(minifyTask);

	BUILD_TARGETS.forEach(buildTarget => {
		const dashed = (str: string) => (str ? `-${str}` : ``);
		const platform = buildTarget.platform;
		const arch = buildTarget.arch;

		['', 'min'].forEach(minified => {
			const sourceFolderName = `out-vscode-${type}${dashed(minified)}`;
			const destinationFolderName = `vscode-${type}${dashed(platform)}${dashed(arch)}`;

			const serverTaskCI = task.define(`vscode-${type}${dashed(platform)}${dashed(arch)}${dashed(minified)}-ci`, task.series(
				compileNativeExtensionsBuildTask,
				gulp.task(`node-${platform}-${arch}`) as task.Task,
				util.rimraf(path.join(BUILD_ROOT, destinationFolderName)),
				packageTask(type, platform, arch, sourceFolderName, destinationFolderName)
			));
			gulp.task(serverTaskCI);

			const serverTask = task.define(`vscode-${type}${dashed(platform)}${dashed(arch)}${dashed(minified)}`, task.series(
				compileBuildWithManglingTask,
				cleanExtensionsBuildTask,
				compileNonNativeExtensionsBuildTask,
				compileExtensionMediaBuildTask,
				minified ? minifyTask : bundleTask,
				serverTaskCI
			));
			gulp.task(serverTask);
		});
	});
});
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.scan.ts]---
Location: vscode-main/build/gulpfile.scan.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import gulp from 'gulp';
import * as path from 'path';
import * as task from './lib/task.ts';
import * as util from './lib/util.ts';
import electron from '@vscode/gulp-electron';
import { config } from './lib/electron.ts';
import filter from 'gulp-filter';
import * as deps from './lib/dependencies.ts';
import { existsSync, readdirSync } from 'fs';

const root = path.dirname(import.meta.dirname);

const BUILD_TARGETS = [
	{ platform: 'win32', arch: 'x64' },
	{ platform: 'win32', arch: 'arm64' },
	{ platform: 'darwin', arch: null, opts: { stats: true } },
	{ platform: 'linux', arch: 'x64' },
	{ platform: 'linux', arch: 'armhf' },
	{ platform: 'linux', arch: 'arm64' },
];

// The following files do not have PDBs downloaded for them during the download symbols process.
const excludedCheckList = [
	'd3dcompiler_47.dll',
	'dxil.dll',
	'dxcompiler.dll',
];

BUILD_TARGETS.forEach(buildTarget => {
	const dashed = (str: string | null) => (str ? `-${str}` : ``);
	const platform = buildTarget.platform;
	const arch = buildTarget.arch;

	const destinationExe = path.join(path.dirname(root), 'scanbin', `VSCode${dashed(platform)}${dashed(arch)}`, 'bin');
	const destinationPdb = path.join(path.dirname(root), 'scanbin', `VSCode${dashed(platform)}${dashed(arch)}`, 'pdb');

	const tasks: task.Task[] = [];

	// removal tasks
	tasks.push(util.rimraf(destinationExe), util.rimraf(destinationPdb));

	// electron
	tasks.push(() => electron.dest(destinationExe, { ...config, platform, arch: arch === 'armhf' ? 'arm' : arch }));

	// pdbs for windows
	if (platform === 'win32') {
		tasks.push(
			() => electron.dest(destinationPdb, { ...config, platform, arch: arch === 'armhf' ? 'arm' : arch, pdbs: true }),
			() => confirmPdbsExist(destinationExe, destinationPdb)
		);
	}

	if (platform === 'linux') {
		tasks.push(
			() => electron.dest(destinationPdb, { ...config, platform, arch: arch === 'armhf' ? 'arm' : arch, symbols: true })
		);
	}

	// node modules
	tasks.push(
		nodeModules(destinationExe, destinationPdb, platform)
	);

	const setupSymbolsTask = task.define(`vscode-symbols${dashed(platform)}${dashed(arch)}`,
		task.series(...tasks)
	);

	gulp.task(setupSymbolsTask);
});

function getProductionDependencySources() {
	const productionDependencies = deps.getProductionDependencies(root);
	return productionDependencies.map(d => path.relative(root, d)).map(d => [`${d}/**`, `!${d}/**/{test,tests}/**`]).flat();
}

function nodeModules(destinationExe: string, destinationPdb: string, platform: string): task.CallbackTask {

	const exe = () => {
		return gulp.src(getProductionDependencySources(), { base: '.', dot: true })
			.pipe(filter([
				'**/*.node',
				// Exclude these paths.
				// We don't build the prebuilt node files so we don't scan them
				'!**/prebuilds/**/*.node'
			]))
			.pipe(gulp.dest(destinationExe));
	};

	if (platform === 'win32') {
		const pdb = () => {
			return gulp.src(getProductionDependencySources(), { base: '.', dot: true })
				.pipe(filter(['**/*.pdb']))
				.pipe(gulp.dest(destinationPdb));
		};

		return gulp.parallel(exe, pdb) as task.CallbackTask;
	}

	if (platform === 'linux') {
		const pdb = () => {
			return gulp.src(getProductionDependencySources(), { base: '.', dot: true })
				.pipe(filter(['**/*.sym']))
				.pipe(gulp.dest(destinationPdb));
		};

		return gulp.parallel(exe, pdb) as task.CallbackTask;
	}

	return exe;
}

function confirmPdbsExist(destinationExe: string, destinationPdb: string) {
	readdirSync(destinationExe).forEach(file => {
		if (excludedCheckList.includes(file)) {
			return;
		}

		if (file.endsWith('.dll') || file.endsWith('.exe')) {
			const pdb = `${file}.pdb`;
			if (!existsSync(path.join(destinationPdb, pdb))) {
				throw new Error(`Missing pdb file for ${file}. Tried searching for ${pdb} in ${destinationPdb}.`);
			}
		}
	});
	return Promise.resolve();
}
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.ts]---
Location: vscode-main/build/gulpfile.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import { EventEmitter } from 'events';
import glob from 'glob';
import gulp from 'gulp';
import { createRequire } from 'node:module';
import { monacoTypecheckTask /* , monacoTypecheckWatchTask */ } from './gulpfile.editor.ts';
import { compileExtensionMediaTask, compileExtensionsTask, watchExtensionsTask } from './gulpfile.extensions.ts';
import * as compilation from './lib/compilation.ts';
import * as task from './lib/task.ts';
import * as util from './lib/util.ts';

EventEmitter.defaultMaxListeners = 100;

const require = createRequire(import.meta.url);

const { transpileTask, compileTask, watchTask, compileApiProposalNamesTask, watchApiProposalNamesTask } = compilation;

// API proposal names
gulp.task(compileApiProposalNamesTask);
gulp.task(watchApiProposalNamesTask);

// SWC Client Transpile
const transpileClientSWCTask = task.define('transpile-client-esbuild', task.series(util.rimraf('out'), transpileTask('src', 'out', true)));
gulp.task(transpileClientSWCTask);

// Transpile only
const transpileClientTask = task.define('transpile-client', task.series(util.rimraf('out'), transpileTask('src', 'out')));
gulp.task(transpileClientTask);

// Fast compile for development time
const compileClientTask = task.define('compile-client', task.series(util.rimraf('out'), compileApiProposalNamesTask, compileTask('src', 'out', false)));
gulp.task(compileClientTask);

const watchClientTask = task.define('watch-client', task.series(util.rimraf('out'), task.parallel(watchTask('out', false), watchApiProposalNamesTask)));
gulp.task(watchClientTask);

// All
const _compileTask = task.define('compile', task.parallel(monacoTypecheckTask, compileClientTask, compileExtensionsTask, compileExtensionMediaTask));
gulp.task(_compileTask);

gulp.task(task.define('watch', task.parallel(/* monacoTypecheckWatchTask, */ watchClientTask, watchExtensionsTask)));

// Default
gulp.task('default', _compileTask);

process.on('unhandledRejection', (reason, p) => {
	console.log('Unhandled Rejection at: Promise', p, 'reason:', reason);
	process.exit(1);
});

// Load all the gulpfiles only if running tasks other than the editor tasks
glob.sync('gulpfile.*.ts', { cwd: import.meta.dirname })
	.forEach(f => {
		return require(`./${f}`);
	});
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.vscode.linux.ts]---
Location: vscode-main/build/gulpfile.vscode.linux.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import gulp from 'gulp';
import replace from 'gulp-replace';
import rename from 'gulp-rename';
import es from 'event-stream';
import vfs from 'vinyl-fs';
import { rimraf } from './lib/util.ts';
import { getVersion } from './lib/getVersion.ts';
import * as task from './lib/task.ts';
import packageJson from '../package.json' with { type: 'json' };
import product from '../product.json' with { type: 'json' };
import { getDependencies } from './linux/dependencies-generator.ts';
import { recommendedDeps as debianRecommendedDependencies } from './linux/debian/dep-lists.ts';
import * as path from 'path';
import * as cp from 'child_process';
import { promisify } from 'util';

const exec = promisify(cp.exec);
const root = path.dirname(import.meta.dirname);
const commit = getVersion(root);

const linuxPackageRevision = Math.floor(new Date().getTime() / 1000);

function getDebPackageArch(arch: string): string {
	switch (arch) {
		case 'x64': return 'amd64';
		case 'armhf': return 'armhf';
		case 'arm64': return 'arm64';
		default: throw new Error(`Unknown arch: ${arch}`);
	}
}

function prepareDebPackage(arch: string) {
	const binaryDir = '../VSCode-linux-' + arch;
	const debArch = getDebPackageArch(arch);
	const destination = '.build/linux/deb/' + debArch + '/' + product.applicationName + '-' + debArch;

	return async function () {
		const dependencies = await getDependencies('deb', binaryDir, product.applicationName, debArch);

		const desktop = gulp.src('resources/linux/code.desktop', { base: '.' })
			.pipe(rename('usr/share/applications/' + product.applicationName + '.desktop'));

		const desktopUrlHandler = gulp.src('resources/linux/code-url-handler.desktop', { base: '.' })
			.pipe(rename('usr/share/applications/' + product.applicationName + '-url-handler.desktop'));

		const desktops = es.merge(desktop, desktopUrlHandler)
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@NAME_SHORT@@', product.nameShort))
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@EXEC@@', `/usr/share/${product.applicationName}/${product.applicationName}`))
			.pipe(replace('@@ICON@@', product.linuxIconName))
			.pipe(replace('@@URLPROTOCOL@@', product.urlProtocol));

		const appdata = gulp.src('resources/linux/code.appdata.xml', { base: '.' })
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@LICENSE@@', product.licenseName))
			.pipe(rename('usr/share/appdata/' + product.applicationName + '.appdata.xml'));

		const workspaceMime = gulp.src('resources/linux/code-workspace.xml', { base: '.' })
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(rename('usr/share/mime/packages/' + product.applicationName + '-workspace.xml'));

		const icon = gulp.src('resources/linux/code.png', { base: '.' })
			.pipe(rename('usr/share/pixmaps/' + product.linuxIconName + '.png'));

		const bash_completion = gulp.src('resources/completions/bash/code')
			.pipe(replace('@@APPNAME@@', product.applicationName))
			.pipe(rename('usr/share/bash-completion/completions/' + product.applicationName));

		const zsh_completion = gulp.src('resources/completions/zsh/_code')
			.pipe(replace('@@APPNAME@@', product.applicationName))
			.pipe(rename('usr/share/zsh/vendor-completions/_' + product.applicationName));

		const code = gulp.src(binaryDir + '/**/*', { base: binaryDir })
			.pipe(rename(function (p) { p.dirname = 'usr/share/' + product.applicationName + '/' + p.dirname; }));

		let size = 0;
		const control = code.pipe(es.through(
			function (f) { size += f.isDirectory() ? 4096 : f.contents.length; },
			function () {
				const that = this;
				gulp.src('resources/linux/debian/control.template', { base: '.' })
					.pipe(replace('@@NAME@@', product.applicationName))
					.pipe(replace('@@VERSION@@', packageJson.version + '-' + linuxPackageRevision))
					.pipe(replace('@@ARCHITECTURE@@', debArch))
					.pipe(replace('@@DEPENDS@@', dependencies.join(', ')))
					.pipe(replace('@@RECOMMENDS@@', debianRecommendedDependencies.join(', ')))
					.pipe(replace('@@INSTALLEDSIZE@@', Math.ceil(size / 1024).toString()))
					.pipe(rename('DEBIAN/control'))
					.pipe(es.through(function (f) { that.emit('data', f); }, function () { that.emit('end'); }));
			}));

		const prerm = gulp.src('resources/linux/debian/prerm.template', { base: '.' })
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(rename('DEBIAN/prerm'));

		const postrm = gulp.src('resources/linux/debian/postrm.template', { base: '.' })
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(rename('DEBIAN/postrm'));

		const postinst = gulp.src('resources/linux/debian/postinst.template', { base: '.' })
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@ARCHITECTURE@@', debArch))
			.pipe(rename('DEBIAN/postinst'));

		const templates = gulp.src('resources/linux/debian/templates.template', { base: '.' })
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(rename('DEBIAN/templates'));

		const all = es.merge(control, templates, postinst, postrm, prerm, desktops, appdata, workspaceMime, icon, bash_completion, zsh_completion, code);

		return all.pipe(vfs.dest(destination));
	};
}

function buildDebPackage(arch: string) {
	const debArch = getDebPackageArch(arch);
	const cwd = `.build/linux/deb/${debArch}`;

	return async () => {
		await exec(`chmod 755 ${product.applicationName}-${debArch}/DEBIAN/postinst ${product.applicationName}-${debArch}/DEBIAN/prerm ${product.applicationName}-${debArch}/DEBIAN/postrm`, { cwd });
		await exec('mkdir -p deb', { cwd });
		await exec(`fakeroot dpkg-deb -Zxz -b ${product.applicationName}-${debArch} deb`, { cwd });
	};
}

function getRpmBuildPath(rpmArch: string): string {
	return '.build/linux/rpm/' + rpmArch + '/rpmbuild';
}

function getRpmPackageArch(arch: string): string {
	switch (arch) {
		case 'x64': return 'x86_64';
		case 'armhf': return 'armv7hl';
		case 'arm64': return 'aarch64';
		default: throw new Error(`Unknown arch: ${arch}`);
	}
}

function prepareRpmPackage(arch: string) {
	const binaryDir = '../VSCode-linux-' + arch;
	const rpmArch = getRpmPackageArch(arch);
	const stripBinary = process.env['STRIP'] ?? '/usr/bin/strip';

	return async function () {
		const dependencies = await getDependencies('rpm', binaryDir, product.applicationName, rpmArch);

		const desktop = gulp.src('resources/linux/code.desktop', { base: '.' })
			.pipe(rename('BUILD/usr/share/applications/' + product.applicationName + '.desktop'));

		const desktopUrlHandler = gulp.src('resources/linux/code-url-handler.desktop', { base: '.' })
			.pipe(rename('BUILD/usr/share/applications/' + product.applicationName + '-url-handler.desktop'));

		const desktops = es.merge(desktop, desktopUrlHandler)
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@NAME_SHORT@@', product.nameShort))
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@EXEC@@', `/usr/share/${product.applicationName}/${product.applicationName}`))
			.pipe(replace('@@ICON@@', product.linuxIconName))
			.pipe(replace('@@URLPROTOCOL@@', product.urlProtocol));

		const appdata = gulp.src('resources/linux/code.appdata.xml', { base: '.' })
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@LICENSE@@', product.licenseName))
			.pipe(rename('BUILD/usr/share/appdata/' + product.applicationName + '.appdata.xml'));

		const workspaceMime = gulp.src('resources/linux/code-workspace.xml', { base: '.' })
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(rename('BUILD/usr/share/mime/packages/' + product.applicationName + '-workspace.xml'));

		const icon = gulp.src('resources/linux/code.png', { base: '.' })
			.pipe(rename('BUILD/usr/share/pixmaps/' + product.linuxIconName + '.png'));

		const bash_completion = gulp.src('resources/completions/bash/code')
			.pipe(replace('@@APPNAME@@', product.applicationName))
			.pipe(rename('BUILD/usr/share/bash-completion/completions/' + product.applicationName));

		const zsh_completion = gulp.src('resources/completions/zsh/_code')
			.pipe(replace('@@APPNAME@@', product.applicationName))
			.pipe(rename('BUILD/usr/share/zsh/site-functions/_' + product.applicationName));

		const code = gulp.src(binaryDir + '/**/*', { base: binaryDir })
			.pipe(rename(function (p) { p.dirname = 'BUILD/usr/share/' + product.applicationName + '/' + p.dirname; }));

		const spec = gulp.src('resources/linux/rpm/code.spec.template', { base: '.' })
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@ICON@@', product.linuxIconName))
			.pipe(replace('@@VERSION@@', packageJson.version))
			.pipe(replace('@@RELEASE@@', linuxPackageRevision.toString()))
			.pipe(replace('@@ARCHITECTURE@@', rpmArch))
			.pipe(replace('@@LICENSE@@', product.licenseName))
			.pipe(replace('@@QUALITY@@', (product as typeof product & { quality?: string }).quality || '@@QUALITY@@'))
			.pipe(replace('@@UPDATEURL@@', (product as typeof product & { updateUrl?: string }).updateUrl || '@@UPDATEURL@@'))
			.pipe(replace('@@DEPENDENCIES@@', dependencies.join(', ')))
			.pipe(replace('@@STRIP@@', stripBinary))
			.pipe(rename('SPECS/' + product.applicationName + '.spec'));

		const specIcon = gulp.src('resources/linux/rpm/code.xpm', { base: '.' })
			.pipe(rename('SOURCES/' + product.applicationName + '.xpm'));

		const all = es.merge(code, desktops, appdata, workspaceMime, icon, bash_completion, zsh_completion, spec, specIcon);

		return all.pipe(vfs.dest(getRpmBuildPath(rpmArch)));
	};
}

function buildRpmPackage(arch: string) {
	const rpmArch = getRpmPackageArch(arch);
	const rpmBuildPath = getRpmBuildPath(rpmArch);
	const rpmOut = `${rpmBuildPath}/RPMS/${rpmArch}`;
	const destination = `.build/linux/rpm/${rpmArch}`;

	return async () => {
		await exec(`mkdir -p ${destination}`);
		await exec(`HOME="$(pwd)/${destination}" rpmbuild -bb ${rpmBuildPath}/SPECS/${product.applicationName}.spec --target=${rpmArch}`);
		await exec(`cp "${rpmOut}/$(ls ${rpmOut})" ${destination}/`);
	};
}

function getSnapBuildPath(arch: string): string {
	return `.build/linux/snap/${arch}/${product.applicationName}-${arch}`;
}

function prepareSnapPackage(arch: string) {
	const binaryDir = '../VSCode-linux-' + arch;
	const destination = getSnapBuildPath(arch);

	return function () {
		// A desktop file that is placed in snap/gui will be placed into meta/gui verbatim.
		const desktop = gulp.src('resources/linux/code.desktop', { base: '.' })
			.pipe(rename(`snap/gui/${product.applicationName}.desktop`));

		// A desktop file that is placed in snap/gui will be placed into meta/gui verbatim.
		const desktopUrlHandler = gulp.src('resources/linux/code-url-handler.desktop', { base: '.' })
			.pipe(rename(`snap/gui/${product.applicationName}-url-handler.desktop`));

		const desktops = es.merge(desktop, desktopUrlHandler)
			.pipe(replace('@@NAME_LONG@@', product.nameLong))
			.pipe(replace('@@NAME_SHORT@@', product.nameShort))
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@EXEC@@', `${product.applicationName} --force-user-env`))
			.pipe(replace('@@ICON@@', `\${SNAP}/meta/gui/${product.linuxIconName}.png`))
			.pipe(replace('@@URLPROTOCOL@@', product.urlProtocol));

		// An icon that is placed in snap/gui will be placed into meta/gui verbatim.
		const icon = gulp.src('resources/linux/code.png', { base: '.' })
			.pipe(rename(`snap/gui/${product.linuxIconName}.png`));

		const code = gulp.src(binaryDir + '/**/*', { base: binaryDir })
			.pipe(rename(function (p) { p.dirname = `usr/share/${product.applicationName}/${p.dirname}`; }));

		const snapcraft = gulp.src('resources/linux/snap/snapcraft.yaml', { base: '.' })
			.pipe(replace('@@NAME@@', product.applicationName))
			.pipe(replace('@@VERSION@@', commit!.substr(0, 8)))
			// Possible run-on values https://snapcraft.io/docs/architectures
			.pipe(replace('@@ARCHITECTURE@@', arch === 'x64' ? 'amd64' : arch))
			.pipe(rename('snap/snapcraft.yaml'));

		const electronLaunch = gulp.src('resources/linux/snap/electron-launch', { base: '.' })
			.pipe(rename('electron-launch'));

		const all = es.merge(desktops, icon, code, snapcraft, electronLaunch);

		return all.pipe(vfs.dest(destination));
	};
}

function buildSnapPackage(arch: string) {
	const cwd = getSnapBuildPath(arch);
	return () => exec('snapcraft', { cwd });
}

const BUILD_TARGETS = [
	{ arch: 'x64' },
	{ arch: 'armhf' },
	{ arch: 'arm64' },
];

BUILD_TARGETS.forEach(({ arch }) => {
	const debArch = getDebPackageArch(arch);
	const prepareDebTask = task.define(`vscode-linux-${arch}-prepare-deb`, task.series(rimraf(`.build/linux/deb/${debArch}`), prepareDebPackage(arch)));
	gulp.task(prepareDebTask);
	const buildDebTask = task.define(`vscode-linux-${arch}-build-deb`, buildDebPackage(arch));
	gulp.task(buildDebTask);

	const rpmArch = getRpmPackageArch(arch);
	const prepareRpmTask = task.define(`vscode-linux-${arch}-prepare-rpm`, task.series(rimraf(`.build/linux/rpm/${rpmArch}`), prepareRpmPackage(arch)));
	gulp.task(prepareRpmTask);
	const buildRpmTask = task.define(`vscode-linux-${arch}-build-rpm`, buildRpmPackage(arch));
	gulp.task(buildRpmTask);

	const prepareSnapTask = task.define(`vscode-linux-${arch}-prepare-snap`, task.series(rimraf(`.build/linux/snap/${arch}`), prepareSnapPackage(arch)));
	gulp.task(prepareSnapTask);
	const buildSnapTask = task.define(`vscode-linux-${arch}-build-snap`, task.series(prepareSnapTask, buildSnapPackage(arch)));
	gulp.task(buildSnapTask);
});
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.vscode.ts]---
Location: vscode-main/build/gulpfile.vscode.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import gulp from 'gulp';
import * as fs from 'fs';
import * as path from 'path';
import es from 'event-stream';
import vfs from 'vinyl-fs';
import rename from 'gulp-rename';
import replace from 'gulp-replace';
import filter from 'gulp-filter';
import electron from '@vscode/gulp-electron';
import jsonEditor from 'gulp-json-editor';
import * as util from './lib/util.ts';
import { getVersion } from './lib/getVersion.ts';
import { readISODate } from './lib/date.ts';
import * as task from './lib/task.ts';
import buildfile from './buildfile.ts';
import * as optimize from './lib/optimize.ts';
import { inlineMeta } from './lib/inlineMeta.ts';
import packageJson from '../package.json' with { type: 'json' };
import product from '../product.json' with { type: 'json' };
import * as crypto from 'crypto';
import * as i18n from './lib/i18n.ts';
import { getProductionDependencies } from './lib/dependencies.ts';
import { config } from './lib/electron.ts';
import { createAsar } from './lib/asar.ts';
import minimist from 'minimist';
import { compileBuildWithoutManglingTask, compileBuildWithManglingTask } from './gulpfile.compile.ts';
import { compileNonNativeExtensionsBuildTask, compileNativeExtensionsBuildTask, compileAllExtensionsBuildTask, compileExtensionMediaBuildTask, cleanExtensionsBuildTask } from './gulpfile.extensions.ts';
import { promisify } from 'util';
import globCallback from 'glob';
import rceditCallback from 'rcedit';


const glob = promisify(globCallback);
const rcedit = promisify(rceditCallback);
const root = path.dirname(import.meta.dirname);
const commit = getVersion(root);
const versionedResourcesFolder = (product as typeof product & { quality?: string })?.quality === 'insider' ? commit!.substring(0, 10) : '';

// Build
const vscodeEntryPoints = [
	buildfile.workerEditor,
	buildfile.workerExtensionHost,
	buildfile.workerNotebook,
	buildfile.workerLanguageDetection,
	buildfile.workerLocalFileSearch,
	buildfile.workerProfileAnalysis,
	buildfile.workerOutputLinks,
	buildfile.workerBackgroundTokenization,
	buildfile.workbenchDesktop,
	buildfile.code
].flat();

const vscodeResourceIncludes = [

	// NLS
	'out-build/nls.messages.json',
	'out-build/nls.keys.json',

	// Workbench
	'out-build/vs/code/electron-browser/workbench/workbench.html',

	// Electron Preload
	'out-build/vs/base/parts/sandbox/electron-browser/preload.js',
	'out-build/vs/base/parts/sandbox/electron-browser/preload-aux.js',

	// Node Scripts
	'out-build/vs/base/node/{terminateProcess.sh,cpuUsage.sh,ps.sh}',

	// Touchbar
	'out-build/vs/workbench/browser/parts/editor/media/*.png',
	'out-build/vs/workbench/contrib/debug/browser/media/*.png',

	// External Terminal
	'out-build/vs/workbench/contrib/externalTerminal/**/*.scpt',

	// Terminal shell integration
	'out-build/vs/workbench/contrib/terminal/common/scripts/*.fish',
	'out-build/vs/workbench/contrib/terminal/common/scripts/*.ps1',
	'out-build/vs/workbench/contrib/terminal/common/scripts/*.psm1',
	'out-build/vs/workbench/contrib/terminal/common/scripts/*.sh',
	'out-build/vs/workbench/contrib/terminal/common/scripts/*.zsh',

	// Accessibility Signals
	'out-build/vs/platform/accessibilitySignal/browser/media/*.mp3',

	// Welcome
	'out-build/vs/workbench/contrib/welcomeGettingStarted/common/media/**/*.{svg,png}',

	// Extensions
	'out-build/vs/workbench/contrib/extensions/browser/media/{theme-icon.png,language-icon.svg}',
	'out-build/vs/workbench/services/extensionManagement/common/media/*.{svg,png}',

	// Webview
	'out-build/vs/workbench/contrib/webview/browser/pre/*.{js,html}',

	// Extension Host Worker
	'out-build/vs/workbench/services/extensions/worker/webWorkerExtensionHostIframe.html',

	// Tree Sitter highlights
	'out-build/vs/editor/common/languages/highlights/*.scm',

	// Tree Sitter injection queries
	'out-build/vs/editor/common/languages/injections/*.scm'
];

const vscodeResources = [

	// Includes
	...vscodeResourceIncludes,

	// Excludes
	'!out-build/vs/code/browser/**',
	'!out-build/vs/editor/standalone/**',
	'!out-build/vs/code/**/*-dev.html',
	'!out-build/vs/workbench/contrib/issue/**/*-dev.html',
	'!**/test/**'
];

const bootstrapEntryPoints = [
	'out-build/main.js',
	'out-build/cli.js',
	'out-build/bootstrap-fork.js'
];

const bundleVSCodeTask = task.define('bundle-vscode', task.series(
	util.rimraf('out-vscode'),
	// Optimize: bundles source files automatically based on
	// import statements based on the passed in entry points.
	// In addition, concat window related bootstrap files into
	// a single file.
	optimize.bundleTask(
		{
			out: 'out-vscode',
			esm: {
				src: 'out-build',
				entryPoints: [
					...vscodeEntryPoints,
					...bootstrapEntryPoints
				],
				resources: vscodeResources,
				skipTSBoilerplateRemoval: entryPoint => entryPoint === 'vs/code/electron-browser/workbench/workbench'
			}
		}
	)
));
gulp.task(bundleVSCodeTask);

const sourceMappingURLBase = `https://main.vscode-cdn.net/sourcemaps/${commit}`;
const minifyVSCodeTask = task.define('minify-vscode', task.series(
	bundleVSCodeTask,
	util.rimraf('out-vscode-min'),
	optimize.minifyTask('out-vscode', `${sourceMappingURLBase}/core`)
));
gulp.task(minifyVSCodeTask);

const coreCI = task.define('core-ci', task.series(
	gulp.task('compile-build-with-mangling') as task.Task,
	task.parallel(
		gulp.task('minify-vscode') as task.Task,
		gulp.task('minify-vscode-reh') as task.Task,
		gulp.task('minify-vscode-reh-web') as task.Task,
	)
));
gulp.task(coreCI);

const coreCIPR = task.define('core-ci-pr', task.series(
	gulp.task('compile-build-without-mangling') as task.Task,
	task.parallel(
		gulp.task('minify-vscode') as task.Task,
		gulp.task('minify-vscode-reh') as task.Task,
		gulp.task('minify-vscode-reh-web') as task.Task,
	)
));
gulp.task(coreCIPR);

/**
 * Compute checksums for some files.
 *
 * @param out The out folder to read the file from.
 * @param filenames The paths to compute a checksum for.
 * @return A map of paths to checksums.
 */
function computeChecksums(out: string, filenames: string[]): Record<string, string> {
	const result: Record<string, string> = {};
	filenames.forEach(function (filename) {
		const fullPath = path.join(process.cwd(), out, filename);
		result[filename] = computeChecksum(fullPath);
	});
	return result;
}

/**
 * Compute checksums for a file.
 *
 * @param filename The absolute path to a filename.
 * @return The checksum for `filename`.
 */
function computeChecksum(filename: string): string {
	const contents = fs.readFileSync(filename);

	const hash = crypto
		.createHash('sha256')
		.update(contents)
		.digest('base64')
		.replace(/=+$/, '');

	return hash;
}

function packageTask(platform: string, arch: string, sourceFolderName: string, destinationFolderName: string, _opts?: { stats?: boolean }) {
	const destination = path.join(path.dirname(root), destinationFolderName);
	platform = platform || process.platform;

	const task = () => {
		const out = sourceFolderName;

		const checksums = computeChecksums(out, [
			'vs/base/parts/sandbox/electron-browser/preload.js',
			'vs/workbench/workbench.desktop.main.js',
			'vs/workbench/workbench.desktop.main.css',
			'vs/workbench/api/node/extensionHostProcess.js',
			'vs/code/electron-browser/workbench/workbench.html',
			'vs/code/electron-browser/workbench/workbench.js'
		]);

		const src = gulp.src(out + '/**', { base: '.' })
			.pipe(rename(function (path) { path.dirname = path.dirname!.replace(new RegExp('^' + out), 'out'); }))
			.pipe(util.setExecutableBit(['**/*.sh']));

		const platformSpecificBuiltInExtensionsExclusions = product.builtInExtensions.filter(ext => {
			if (!(ext as { platforms?: string[] }).platforms) {
				return false;
			}

			const set = new Set((ext as { platforms?: string[] }).platforms);
			return !set.has(platform);
		}).map(ext => `!.build/extensions/${ext.name}/**`);

		const extensions = gulp.src(['.build/extensions/**', ...platformSpecificBuiltInExtensionsExclusions], { base: '.build', dot: true });

		const sources = es.merge(src, extensions)
			.pipe(filter(['**', '!**/*.{js,css}.map'], { dot: true }));

		let version = packageJson.version;
		const quality = (product as { quality?: string }).quality;

		if (quality && quality !== 'stable') {
			version += '-' + quality;
		}

		const name = product.nameShort;
		const packageJsonUpdates: Record<string, unknown> = { name, version };

		if (platform === 'linux') {
			packageJsonUpdates.desktopName = `${product.applicationName}.desktop`;
		}

		let packageJsonContents: string;
		const packageJsonStream = gulp.src(['package.json'], { base: '.' })
			.pipe(jsonEditor(packageJsonUpdates))
			.pipe(es.through(function (file) {
				packageJsonContents = file.contents.toString();
				this.emit('data', file);
			}));

		let productJsonContents: string;
		const productJsonStream = gulp.src(['product.json'], { base: '.' })
			.pipe(jsonEditor({ commit, date: readISODate('out-build'), checksums, version }))
			.pipe(es.through(function (file) {
				productJsonContents = file.contents.toString();
				this.emit('data', file);
			}));

		const license = gulp.src([product.licenseFileName, 'ThirdPartyNotices.txt', 'licenses/**'], { base: '.', allowEmpty: true });

		// TODO the API should be copied to `out` during compile, not here
		const api = gulp.src('src/vscode-dts/vscode.d.ts').pipe(rename('out/vscode-dts/vscode.d.ts'));

		const telemetry = gulp.src('.build/telemetry/**', { base: '.build/telemetry', dot: true });

		const jsFilter = util.filter(data => !data.isDirectory() && /\.js$/.test(data.path));
		const root = path.resolve(path.join(import.meta.dirname, '..'));
		const productionDependencies = getProductionDependencies(root);
		const dependenciesSrc = productionDependencies.map(d => path.relative(root, d)).map(d => [`${d}/**`, `!${d}/**/{test,tests}/**`]).flat().concat('!**/*.mk');

		const deps = gulp.src(dependenciesSrc, { base: '.', dot: true })
			.pipe(filter(['**', `!**/${config.version}/**`, '!**/bin/darwin-arm64-87/**', '!**/package-lock.json', '!**/yarn.lock', '!**/*.{js,css}.map']))
			.pipe(util.cleanNodeModules(path.join(import.meta.dirname, '.moduleignore')))
			.pipe(util.cleanNodeModules(path.join(import.meta.dirname, `.moduleignore.${process.platform}`)))
			.pipe(jsFilter)
			.pipe(util.rewriteSourceMappingURL(sourceMappingURLBase))
			.pipe(jsFilter.restore)
			.pipe(createAsar(path.join(process.cwd(), 'node_modules'), [
				'**/*.node',
				'**/@vscode/ripgrep/bin/*',
				'**/node-pty/build/Release/*',
				'**/node-pty/build/Release/conpty/*',
				'**/node-pty/lib/worker/conoutSocketWorker.js',
				'**/node-pty/lib/shared/conout.js',
				'**/*.wasm',
				'**/@vscode/vsce-sign/bin/*',
			], [
				'**/*.mk',
				'!node_modules/vsda/**' // stay compatible with extensions that depend on us shipping `vsda` into ASAR
			], [
				'node_modules/vsda/**' // retain copy of `vsda` in node_modules for internal use
			], 'node_modules.asar'));

		let all = es.merge(
			packageJsonStream,
			productJsonStream,
			license,
			api,
			telemetry,
			sources,
			deps
		);

		let customElectronConfig = {};
		if (platform === 'win32') {
			all = es.merge(all, gulp.src([
				'resources/win32/bower.ico',
				'resources/win32/c.ico',
				'resources/win32/config.ico',
				'resources/win32/cpp.ico',
				'resources/win32/csharp.ico',
				'resources/win32/css.ico',
				'resources/win32/default.ico',
				'resources/win32/go.ico',
				'resources/win32/html.ico',
				'resources/win32/jade.ico',
				'resources/win32/java.ico',
				'resources/win32/javascript.ico',
				'resources/win32/json.ico',
				'resources/win32/less.ico',
				'resources/win32/markdown.ico',
				'resources/win32/php.ico',
				'resources/win32/powershell.ico',
				'resources/win32/python.ico',
				'resources/win32/react.ico',
				'resources/win32/ruby.ico',
				'resources/win32/sass.ico',
				'resources/win32/shell.ico',
				'resources/win32/sql.ico',
				'resources/win32/typescript.ico',
				'resources/win32/vue.ico',
				'resources/win32/xml.ico',
				'resources/win32/yaml.ico',
				'resources/win32/code_70x70.png',
				'resources/win32/code_150x150.png'
			], { base: '.' }));
			if (quality && quality === 'insider') {
				customElectronConfig = {
					createVersionedResources: true,
					productVersionString: `${versionedResourcesFolder}`,
				};
			}
		} else if (platform === 'linux') {
			const policyDest = gulp.src('.build/policies/linux/**', { base: '.build/policies/linux' })
				.pipe(rename(f => f.dirname = `policies/${f.dirname}`));
			all = es.merge(all, gulp.src('resources/linux/code.png', { base: '.' }), policyDest);
		} else if (platform === 'darwin') {
			const shortcut = gulp.src('resources/darwin/bin/code.sh')
				.pipe(replace('@@APPNAME@@', product.applicationName))
				.pipe(rename('bin/code'));
			const policyDest = gulp.src('.build/policies/darwin/**', { base: '.build/policies/darwin' })
				.pipe(rename(f => f.dirname = `policies/${f.dirname}`));
			all = es.merge(all, shortcut, policyDest);
		}

		let result: NodeJS.ReadWriteStream = all
			.pipe(util.skipDirectories())
			.pipe(util.fixWin32DirectoryPermissions())
			.pipe(filter(['**', '!**/.github/**'], { dot: true })) // https://github.com/microsoft/vscode/issues/116523
			.pipe(electron({ ...config, platform, arch: arch === 'armhf' ? 'arm' : arch, ffmpegChromium: false, ...customElectronConfig }))
			.pipe(filter(['**', '!LICENSE', '!version'], { dot: true }));

		if (platform === 'linux') {
			result = es.merge(result, gulp.src('resources/completions/bash/code', { base: '.' })
				.pipe(replace('@@APPNAME@@', product.applicationName))
				.pipe(rename(function (f) { f.basename = product.applicationName; })));

			result = es.merge(result, gulp.src('resources/completions/zsh/_code', { base: '.' })
				.pipe(replace('@@APPNAME@@', product.applicationName))
				.pipe(rename(function (f) { f.basename = '_' + product.applicationName; })));
		}

		if (platform === 'win32') {
			result = es.merge(result, gulp.src('resources/win32/bin/code.js', { base: 'resources/win32', allowEmpty: true }));

			if (quality && quality === 'insider') {
				result = es.merge(result, gulp.src('resources/win32/insider/bin/code.cmd', { base: 'resources/win32/insider' })
					.pipe(replace('@@NAME@@', product.nameShort))
					.pipe(replace('@@VERSIONFOLDER@@', versionedResourcesFolder))
					.pipe(rename(function (f) { f.basename = product.applicationName; })));

				result = es.merge(result, gulp.src('resources/win32/insider/bin/code.sh', { base: 'resources/win32/insider' })
					.pipe(replace('@@NAME@@', product.nameShort))
					.pipe(replace('@@PRODNAME@@', product.nameLong))
					.pipe(replace('@@VERSION@@', version))
					.pipe(replace('@@COMMIT@@', String(commit)))
					.pipe(replace('@@APPNAME@@', product.applicationName))
					.pipe(replace('@@VERSIONFOLDER@@', versionedResourcesFolder))
					.pipe(replace('@@SERVERDATAFOLDER@@', product.serverDataFolderName || '.vscode-remote'))
					.pipe(replace('@@QUALITY@@', quality))
					.pipe(rename(function (f) { f.basename = product.applicationName; f.extname = ''; })));
			} else {
				result = es.merge(result, gulp.src('resources/win32/bin/code.cmd', { base: 'resources/win32' })
					.pipe(replace('@@NAME@@', product.nameShort))
					.pipe(rename(function (f) { f.basename = product.applicationName; })));

				result = es.merge(result, gulp.src('resources/win32/bin/code.sh', { base: 'resources/win32' })
					.pipe(replace('@@NAME@@', product.nameShort))
					.pipe(replace('@@PRODNAME@@', product.nameLong))
					.pipe(replace('@@VERSION@@', version))
					.pipe(replace('@@COMMIT@@', String(commit)))
					.pipe(replace('@@APPNAME@@', product.applicationName))
					.pipe(replace('@@SERVERDATAFOLDER@@', product.serverDataFolderName || '.vscode-remote'))
					.pipe(replace('@@QUALITY@@', String(quality)))
					.pipe(rename(function (f) { f.basename = product.applicationName; f.extname = ''; })));
			}

			result = es.merge(result, gulp.src('resources/win32/VisualElementsManifest.xml', { base: 'resources/win32' })
				.pipe(rename(product.nameShort + '.VisualElementsManifest.xml')));

			result = es.merge(result, gulp.src('.build/policies/win32/**', { base: '.build/policies/win32' })
				.pipe(rename(f => f.dirname = `policies/${f.dirname}`)));

			if (quality === 'stable' || quality === 'insider') {
				result = es.merge(result, gulp.src('.build/win32/appx/**', { base: '.build/win32' }));
				const rawVersion = version.replace(/-\w+$/, '').split('.');
				const appxVersion = `${rawVersion[0]}.0.${rawVersion[1]}.${rawVersion[2]}`;
				result = es.merge(result, gulp.src('resources/win32/appx/AppxManifest.xml', { base: '.' })
					.pipe(replace('@@AppxPackageName@@', product.win32AppUserModelId))
					.pipe(replace('@@AppxPackageVersion@@', appxVersion))
					.pipe(replace('@@AppxPackageDisplayName@@', product.nameLong))
					.pipe(replace('@@AppxPackageDescription@@', product.win32NameVersion))
					.pipe(replace('@@ApplicationIdShort@@', product.win32RegValueName))
					.pipe(replace('@@ApplicationExe@@', product.nameShort + '.exe'))
					.pipe(replace('@@FileExplorerContextMenuID@@', quality === 'stable' ? 'OpenWithCode' : 'OpenWithCodeInsiders'))
					.pipe(replace('@@FileExplorerContextMenuCLSID@@', (product as { win32ContextMenu?: Record<string, { clsid: string }> }).win32ContextMenu![arch].clsid))
					.pipe(replace('@@FileExplorerContextMenuDLL@@', `${quality === 'stable' ? 'code' : 'code_insider'}_explorer_command_${arch}.dll`))
					.pipe(rename(f => f.dirname = `appx/manifest`)));
			}
		} else if (platform === 'linux') {
			result = es.merge(result, gulp.src('resources/linux/bin/code.sh', { base: '.' })
				.pipe(replace('@@PRODNAME@@', product.nameLong))
				.pipe(replace('@@APPNAME@@', product.applicationName))
				.pipe(rename('bin/' + product.applicationName)));
		}

		result = inlineMeta(result, {
			targetPaths: bootstrapEntryPoints,
			packageJsonFn: () => packageJsonContents,
			productJsonFn: () => productJsonContents
		});

		return result.pipe(vfs.dest(destination));
	};
	task.taskName = `package-${platform}-${arch}`;
	return task;
}

function patchWin32DependenciesTask(destinationFolderName: string) {
	const cwd = path.join(path.dirname(root), destinationFolderName);

	return async () => {
		const deps = await glob('**/*.node', { cwd, ignore: 'extensions/node_modules/@parcel/watcher/**' });
		const packageJson = JSON.parse(await fs.promises.readFile(path.join(cwd, versionedResourcesFolder, 'resources', 'app', 'package.json'), 'utf8'));
		const product = JSON.parse(await fs.promises.readFile(path.join(cwd, versionedResourcesFolder, 'resources', 'app', 'product.json'), 'utf8'));
		const baseVersion = packageJson.version.replace(/-.*$/, '');

		await Promise.all(deps.map(async dep => {
			const basename = path.basename(dep);

			await rcedit(path.join(cwd, dep), {
				'file-version': baseVersion,
				'version-string': {
					'CompanyName': 'Microsoft Corporation',
					'FileDescription': product.nameLong,
					'FileVersion': packageJson.version,
					'InternalName': basename,
					'LegalCopyright': 'Copyright (C) 2022 Microsoft. All rights reserved',
					'OriginalFilename': basename,
					'ProductName': product.nameLong,
					'ProductVersion': packageJson.version,
				}
			});
		}));
	};
}

const buildRoot = path.dirname(root);

const BUILD_TARGETS = [
	{ platform: 'win32', arch: 'x64' },
	{ platform: 'win32', arch: 'arm64' },
	{ platform: 'darwin', arch: 'x64', opts: { stats: true } },
	{ platform: 'darwin', arch: 'arm64', opts: { stats: true } },
	{ platform: 'linux', arch: 'x64' },
	{ platform: 'linux', arch: 'armhf' },
	{ platform: 'linux', arch: 'arm64' },
];
BUILD_TARGETS.forEach(buildTarget => {
	const dashed = (str: string) => (str ? `-${str}` : ``);
	const platform = buildTarget.platform;
	const arch = buildTarget.arch;
	const opts = buildTarget.opts;

	const [vscode, vscodeMin] = ['', 'min'].map(minified => {
		const sourceFolderName = `out-vscode${dashed(minified)}`;
		const destinationFolderName = `VSCode${dashed(platform)}${dashed(arch)}`;

		const tasks = [
			compileNativeExtensionsBuildTask,
			util.rimraf(path.join(buildRoot, destinationFolderName)),
			packageTask(platform, arch, sourceFolderName, destinationFolderName, opts)
		];

		if (platform === 'win32') {
			tasks.push(patchWin32DependenciesTask(destinationFolderName));
		}

		const vscodeTaskCI = task.define(`vscode${dashed(platform)}${dashed(arch)}${dashed(minified)}-ci`, task.series(...tasks));
		gulp.task(vscodeTaskCI);

		const vscodeTask = task.define(`vscode${dashed(platform)}${dashed(arch)}${dashed(minified)}`, task.series(
			minified ? compileBuildWithManglingTask : compileBuildWithoutManglingTask,
			cleanExtensionsBuildTask,
			compileNonNativeExtensionsBuildTask,
			compileExtensionMediaBuildTask,
			minified ? minifyVSCodeTask : bundleVSCodeTask,
			vscodeTaskCI
		));
		gulp.task(vscodeTask);

		return vscodeTask;
	});

	if (process.platform === platform && process.arch === arch) {
		gulp.task(task.define('vscode', task.series(vscode)));
		gulp.task(task.define('vscode-min', task.series(vscodeMin)));
	}
});

// #region nls

const innoSetupConfig: Record<string, { codePage: string; defaultInfo?: { name: string; id: string } }> = {
	'zh-cn': { codePage: 'CP936', defaultInfo: { name: 'Simplified Chinese', id: '$0804', } },
	'zh-tw': { codePage: 'CP950', defaultInfo: { name: 'Traditional Chinese', id: '$0404' } },
	'ko': { codePage: 'CP949', defaultInfo: { name: 'Korean', id: '$0412' } },
	'ja': { codePage: 'CP932' },
	'de': { codePage: 'CP1252' },
	'fr': { codePage: 'CP1252' },
	'es': { codePage: 'CP1252' },
	'ru': { codePage: 'CP1251' },
	'it': { codePage: 'CP1252' },
	'pt-br': { codePage: 'CP1252' },
	'hu': { codePage: 'CP1250' },
	'tr': { codePage: 'CP1254' }
};

gulp.task(task.define(
	'vscode-translations-export',
	task.series(
		coreCI,
		compileAllExtensionsBuildTask,
		function () {
			const pathToMetadata = './out-build/nls.metadata.json';
			const pathToExtensions = '.build/extensions/*';
			const pathToSetup = 'build/win32/i18n/messages.en.isl';

			return es.merge(
				gulp.src(pathToMetadata).pipe(i18n.createXlfFilesForCoreBundle()),
				gulp.src(pathToSetup).pipe(i18n.createXlfFilesForIsl()),
				gulp.src(pathToExtensions).pipe(i18n.createXlfFilesForExtensions())
			).pipe(vfs.dest('../vscode-translations-export'));
		}
	)
));

gulp.task('vscode-translations-import', function () {
	const options = minimist(process.argv.slice(2), {
		string: 'location',
		default: {
			location: '../vscode-translations-import'
		}
	});
	return es.merge([...i18n.defaultLanguages, ...i18n.extraLanguages].map(language => {
		const id = language.id;
		return gulp.src(`${options.location}/${id}/vscode-setup/messages.xlf`)
			.pipe(i18n.prepareIslFiles(language, innoSetupConfig[language.id]))
			.pipe(vfs.dest(`./build/win32/i18n`));
	}));
});

// #endregion
```

--------------------------------------------------------------------------------

---[FILE: build/gulpfile.vscode.web.ts]---
Location: vscode-main/build/gulpfile.vscode.web.ts

```typescript
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import gulp from 'gulp';
import * as path from 'path';
import es from 'event-stream';
import * as util from './lib/util.ts';
import { getVersion } from './lib/getVersion.ts';
import * as task from './lib/task.ts';
import * as optimize from './lib/optimize.ts';
import { readISODate } from './lib/date.ts';
import product from '../product.json' with { type: 'json' };
import rename from 'gulp-rename';
import filter from 'gulp-filter';
import { getProductionDependencies } from './lib/dependencies.ts';
import vfs from 'vinyl-fs';
import packageJson from '../package.json' with { type: 'json' };
import { compileBuildWithManglingTask } from './gulpfile.compile.ts';
import * as extensions from './lib/extensions.ts';
import VinylFile from 'vinyl';
import jsonEditor from 'gulp-json-editor';
import buildfile from './buildfile.ts';

const REPO_ROOT = path.dirname(import.meta.dirname);
const BUILD_ROOT = path.dirname(REPO_ROOT);
const WEB_FOLDER = path.join(REPO_ROOT, 'remote', 'web');

const commit = getVersion(REPO_ROOT);
const quality = (product as { quality?: string }).quality;
const version = (quality && quality !== 'stable') ? `${packageJson.version}-${quality}` : packageJson.version;

export const vscodeWebResourceIncludes = [

	// NLS
	'out-build/nls.messages.js',

	// Accessibility Signals
	'out-build/vs/platform/accessibilitySignal/browser/media/*.mp3',

	// Welcome
	'out-build/vs/workbench/contrib/welcomeGettingStarted/common/media/**/*.{svg,png}',

	// Extensions
	'out-build/vs/workbench/contrib/extensions/browser/media/{theme-icon.png,language-icon.svg}',
	'out-build/vs/workbench/services/extensionManagement/common/media/*.{svg,png}',

	// Webview
	'out-build/vs/workbench/contrib/webview/browser/pre/*.{js,html}',

	// Tree Sitter highlights
	'out-build/vs/editor/common/languages/highlights/*.scm',

	// Tree Sitter injections
	'out-build/vs/editor/common/languages/injections/*.scm',

	// Extension Host Worker
	'out-build/vs/workbench/services/extensions/worker/webWorkerExtensionHostIframe.html'
];

const vscodeWebResources = [

	// Includes
	...vscodeWebResourceIncludes,

	// Excludes
	'!out-build/vs/**/{node,electron-browser,electron-main,electron-utility}/**',
	'!out-build/vs/editor/standalone/**',
	'!out-build/vs/workbench/**/*-tb.png',
	'!out-build/vs/code/**/*-dev.html',
	'!**/test/**'
];

const vscodeWebEntryPoints = [
	buildfile.workerEditor,
	buildfile.workerExtensionHost,
	buildfile.workerNotebook,
	buildfile.workerLanguageDetection,
	buildfile.workerLocalFileSearch,
	buildfile.workerOutputLinks,
	buildfile.workerBackgroundTokenization,
	buildfile.keyboardMaps,
	buildfile.workbenchWeb,
	buildfile.entrypoint('vs/workbench/workbench.web.main.internal') // TODO@esm remove line when we stop supporting web-amd-esm-bridge
].flat();

/**
 * @param extensionsRoot The location where extension will be read from
 * @param product The parsed product.json file contents
 */
export const createVSCodeWebFileContentMapper = (extensionsRoot: string, product: typeof import('../product.json')) => {
	return (path: string): ((content: string) => string) | undefined => {
		if (path.endsWith('vs/platform/product/common/product.js')) {
			return content => {
				const productConfiguration = JSON.stringify({
					...product,
					version,
					commit,
					date: readISODate('out-build')
				});
				return content.replace('/*BUILD->INSERT_PRODUCT_CONFIGURATION*/', () => productConfiguration.substr(1, productConfiguration.length - 2) /* without { and }*/);
			};
		} else if (path.endsWith('vs/workbench/services/extensionManagement/browser/builtinExtensionsScannerService.js')) {
			return content => {
				const builtinExtensions = JSON.stringify(extensions.scanBuiltinExtensions(extensionsRoot));
				return content.replace('/*BUILD->INSERT_BUILTIN_EXTENSIONS*/', () => builtinExtensions.substr(1, builtinExtensions.length - 2) /* without [ and ]*/);
			};
		}

		return undefined;
	};
};

const bundleVSCodeWebTask = task.define('bundle-vscode-web', task.series(
	util.rimraf('out-vscode-web'),
	optimize.bundleTask(
		{
			out: 'out-vscode-web',
			esm: {
				src: 'out-build',
				entryPoints: vscodeWebEntryPoints,
				resources: vscodeWebResources,
				fileContentMapper: createVSCodeWebFileContentMapper('.build/web/extensions', product)
			}
		}
	)
));

const minifyVSCodeWebTask = task.define('minify-vscode-web', task.series(
	bundleVSCodeWebTask,
	util.rimraf('out-vscode-web-min'),
	optimize.minifyTask('out-vscode-web', `https://main.vscode-cdn.net/sourcemaps/${commit}/core`)
));
gulp.task(minifyVSCodeWebTask);

function packageTask(sourceFolderName: string, destinationFolderName: string) {
	const destination = path.join(BUILD_ROOT, destinationFolderName);

	return () => {
		const src = gulp.src(sourceFolderName + '/**', { base: '.' })
			.pipe(rename(function (path) { path.dirname = path.dirname!.replace(new RegExp('^' + sourceFolderName), 'out'); }));

		const extensions = gulp.src('.build/web/extensions/**', { base: '.build/web', dot: true });

		const loader = gulp.src('build/loader.min', { base: 'build', dot: true }).pipe(rename('out/vs/loader.js')); // TODO@esm remove line when we stop supporting web-amd-esm-bridge

		const sources = es.merge(src, extensions, loader)
			.pipe(filter(['**', '!**/*.{js,css}.map'], { dot: true }))
			// TODO@esm remove me once we stop supporting our web-esm-bridge
			.pipe(es.through(function (file) {
				if (file.relative === 'out/vs/workbench/workbench.web.main.internal.css') {
					this.emit('data', new VinylFile({
						contents: file.contents,
						path: file.path.replace('workbench.web.main.internal.css', 'workbench.web.main.css'),
						base: file.base
					}));
				}
				this.emit('data', file);
			}));

		const name = product.nameShort;
		const packageJsonStream = gulp.src(['remote/web/package.json'], { base: 'remote/web' })
			.pipe(jsonEditor({ name, version, type: 'module' }));

		const license = gulp.src(['remote/LICENSE'], { base: 'remote', allowEmpty: true });

		const productionDependencies = getProductionDependencies(WEB_FOLDER);
		const dependenciesSrc = productionDependencies.map(d => path.relative(REPO_ROOT, d)).map(d => [`${d}/**`, `!${d}/**/{test,tests}/**`, `!${d}/.bin/**`]).flat();

		const deps = gulp.src(dependenciesSrc, { base: 'remote/web', dot: true })
			.pipe(filter(['**', '!**/package-lock.json']))
			.pipe(util.cleanNodeModules(path.join(import.meta.dirname, '.webignore')));

		const favicon = gulp.src('resources/server/favicon.ico', { base: 'resources/server' });
		const manifest = gulp.src('resources/server/manifest.json', { base: 'resources/server' });
		const pwaicons = es.merge(
			gulp.src('resources/server/code-192.png', { base: 'resources/server' }),
			gulp.src('resources/server/code-512.png', { base: 'resources/server' })
		);

		const all = es.merge(
			packageJsonStream,
			license,
			sources,
			deps,
			favicon,
			manifest,
			pwaicons
		);

		const result = all
			.pipe(util.skipDirectories())
			.pipe(util.fixWin32DirectoryPermissions());

		return result.pipe(vfs.dest(destination));
	};
}

const compileWebExtensionsBuildTask = task.define('compile-web-extensions-build', task.series(
	task.define('clean-web-extensions-build', util.rimraf('.build/web/extensions')),
	task.define('bundle-web-extensions-build', () => extensions.packageAllLocalExtensionsStream(true, false).pipe(gulp.dest('.build/web'))),
	task.define('bundle-marketplace-web-extensions-build', () => extensions.packageMarketplaceExtensionsStream(true).pipe(gulp.dest('.build/web'))),
	task.define('bundle-web-extension-media-build', () => extensions.buildExtensionMedia(false, '.build/web/extensions')),
));
gulp.task(compileWebExtensionsBuildTask);

const dashed = (str: string) => (str ? `-${str}` : ``);

['', 'min'].forEach(minified => {
	const sourceFolderName = `out-vscode-web${dashed(minified)}`;
	const destinationFolderName = `vscode-web`;

	const vscodeWebTaskCI = task.define(`vscode-web${dashed(minified)}-ci`, task.series(
		compileWebExtensionsBuildTask,
		minified ? minifyVSCodeWebTask : bundleVSCodeWebTask,
		util.rimraf(path.join(BUILD_ROOT, destinationFolderName)),
		packageTask(sourceFolderName, destinationFolderName)
	));
	gulp.task(vscodeWebTaskCI);

	const vscodeWebTask = task.define(`vscode-web${dashed(minified)}`, task.series(
		compileBuildWithManglingTask,
		vscodeWebTaskCI
	));
	gulp.task(vscodeWebTask);
});
```

--------------------------------------------------------------------------------

````
