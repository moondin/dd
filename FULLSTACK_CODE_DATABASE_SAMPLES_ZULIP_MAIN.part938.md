---
source_txt: fullstack_samples/zulip-main
converted_utc: 2025-12-18T13:06:14Z
part: 938
parts_total: 1290
---

# FULLSTACK CODE DATABASE SAMPLES zulip-main

## Verbatim Content (Part 938 of 1290)

````text
================================================================================
FULLSTACK SAMPLES CODE DATABASE (VERBATIM) - zulip-main
================================================================================
Generated: December 18, 2025
Source: fullstack_samples/zulip-main
================================================================================

NOTES:
- This output is verbatim because the source is user-owned.
- Large/binary files may be skipped by size/binary detection limits.

================================================================================

---[FILE: 0177_user_message_add_and_index_is_private_flag.py]---
Location: zulip-main/zerver/migrations/0177_user_message_add_and_index_is_private_flag.py
Signals: Django

```python
# Generated by Django 1.11.13 on 2018-06-14 13:39

import bitfield.models
from django.db import migrations, models
from django.db.backends.base.schema import BaseDatabaseSchemaEditor
from django.db.migrations.state import StateApps
from django.db.models import F, Q


def reset_is_private_flag(apps: StateApps, schema_editor: BaseDatabaseSchemaEditor) -> None:
    UserMessage = apps.get_model("zerver", "UserMessage")
    UserProfile = apps.get_model("zerver", "UserProfile")
    user_profile_ids = UserProfile.objects.all().order_by("id").values_list("id", flat=True)
    # We only need to do this because previous migration
    # zerver/migrations/0100_usermessage_remove_is_me_message.py
    # didn't clean the field after removing it.

    total = len(user_profile_ids)
    print("Setting default values for the new flag...", flush=True)
    for i, user_id in enumerate(user_profile_ids, 1):
        while True:
            # Ideally, we'd just do a single database query per user.
            # Unfortunately, Django doesn't use the fancy new index on
            # is_private that we just generated if we do that,
            # resulting in a very slow migration that could take hours
            # on a large server.  We address this issue by doing a bit
            # of hackery to generate the SQL just right (with an
            # `ORDER BY` clause that forces using the new index).
            flag_set_objects = (
                UserMessage.objects.filter(user_profile_id=user_id)
                .extra(where=["flags & 2048 != 0"])
                .order_by("message_id")[0:1000]
            )
            user_message_ids = flag_set_objects.values_list("id", flat=True)
            count = UserMessage.objects.filter(id__in=user_message_ids).update(
                flags=F("flags").bitand(~UserMessage.flags.is_private)
            )
            if count < 1000:
                break

        if i % 50 == 0 or i == total:
            percent = round((i / total) * 100, 2)
            print(f"Processed {i}/{total} {percent}%", flush=True)


class Migration(migrations.Migration):
    atomic = False

    dependencies = [
        ("zerver", "0176_remove_subscription_notifications"),
    ]

    operations = [
        migrations.AlterField(
            model_name="archivedusermessage",
            name="flags",
            field=bitfield.models.BitField(
                [
                    "read",
                    "starred",
                    "collapsed",
                    "mentioned",
                    "wildcard_mentioned",
                    "summarize_in_home",
                    "summarize_in_stream",
                    "force_expand",
                    "force_collapse",
                    "has_alert_word",
                    "historical",
                    "is_private",
                ],
                default=0,
            ),
        ),
        migrations.AlterField(
            model_name="usermessage",
            name="flags",
            field=bitfield.models.BitField(
                [
                    "read",
                    "starred",
                    "collapsed",
                    "mentioned",
                    "wildcard_mentioned",
                    "summarize_in_home",
                    "summarize_in_stream",
                    "force_expand",
                    "force_collapse",
                    "has_alert_word",
                    "historical",
                    "is_private",
                ],
                default=0,
            ),
        ),
        migrations.AddIndex(
            model_name="usermessage",
            index=models.Index(
                "user_profile",
                "message",
                condition=Q(flags__andnz=2048),
                name="zerver_usermessage_is_private_message_id",
            ),
        ),
        migrations.RunPython(
            reset_is_private_flag, reverse_code=migrations.RunPython.noop, elidable=True
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0178_rename_to_emails_restricted_to_domains.py]---
Location: zulip-main/zerver/migrations/0178_rename_to_emails_restricted_to_domains.py
Signals: Django

```python
# Generated by Django 1.11.13 on 2018-07-27 21:47

from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0177_user_message_add_and_index_is_private_flag"),
    ]

    operations = [
        migrations.RenameField(
            model_name="realm",
            old_name="restricted_to_domain",
            new_name="emails_restricted_to_domains",
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0179_rename_to_digest_emails_enabled.py]---
Location: zulip-main/zerver/migrations/0179_rename_to_digest_emails_enabled.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-01 10:59

from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0178_rename_to_emails_restricted_to_domains"),
    ]

    operations = [
        migrations.RenameField(
            model_name="realm",
            old_name="show_digest_email",
            new_name="digest_emails_enabled",
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0180_usermessage_add_active_mobile_push_notification.py]---
Location: zulip-main/zerver/migrations/0180_usermessage_add_active_mobile_push_notification.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-01 23:05

import bitfield.models
from django.db import migrations, models
from django.db.models import Q


class Migration(migrations.Migration):
    atomic = False

    dependencies = [
        ("zerver", "0179_rename_to_digest_emails_enabled"),
    ]

    operations = [
        migrations.AlterField(
            model_name="archivedusermessage",
            name="flags",
            field=bitfield.models.BitField(
                [
                    "read",
                    "starred",
                    "collapsed",
                    "mentioned",
                    "wildcard_mentioned",
                    "summarize_in_home",
                    "summarize_in_stream",
                    "force_expand",
                    "force_collapse",
                    "has_alert_word",
                    "historical",
                    "is_private",
                    "active_mobile_push_notification",
                ],
                default=0,
            ),
        ),
        migrations.AlterField(
            model_name="usermessage",
            name="flags",
            field=bitfield.models.BitField(
                [
                    "read",
                    "starred",
                    "collapsed",
                    "mentioned",
                    "wildcard_mentioned",
                    "summarize_in_home",
                    "summarize_in_stream",
                    "force_expand",
                    "force_collapse",
                    "has_alert_word",
                    "historical",
                    "is_private",
                    "active_mobile_push_notification",
                ],
                default=0,
            ),
        ),
        migrations.AddIndex(
            model_name="usermessage",
            index=models.Index(
                "user_profile",
                "message",
                condition=Q(flags__andnz=4096),
                name="zerver_usermessage_active_mobile_push_notification_id",
            ),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0181_userprofile_change_emojiset.py]---
Location: zulip-main/zerver/migrations/0181_userprofile_change_emojiset.py
Signals: Django

```python
from django.db import migrations, models
from django.db.backends.base.schema import BaseDatabaseSchemaEditor
from django.db.migrations.state import StateApps


def change_emojiset_choice(apps: StateApps, schema_editor: BaseDatabaseSchemaEditor) -> None:
    UserProfile = apps.get_model("zerver", "UserProfile")
    UserProfile.objects.exclude(emojiset__in=["google", "text"]).update(emojiset="google")


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0180_usermessage_add_active_mobile_push_notification"),
    ]

    operations = [
        migrations.RunPython(
            change_emojiset_choice, reverse_code=migrations.RunPython.noop, elidable=True
        ),
        migrations.AlterField(
            model_name="userprofile",
            name="emojiset",
            field=models.CharField(
                choices=[("google", "Google"), ("text", "Plain text")],
                default="google",
                max_length=20,
            ),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0182_set_initial_value_is_private_flag.py]---
Location: zulip-main/zerver/migrations/0182_set_initial_value_is_private_flag.py
Signals: Django

```python
from django.db import migrations
from django.db.backends.base.schema import BaseDatabaseSchemaEditor
from django.db.migrations.state import StateApps
from django.db.models import F


def set_initial_value_of_is_private_flag(
    apps: StateApps, schema_editor: BaseDatabaseSchemaEditor
) -> None:
    UserMessage = apps.get_model("zerver", "UserMessage")
    Message = apps.get_model("zerver", "Message")
    if not Message.objects.exists():
        return

    i = 0
    # Total is only used for the progress bar
    total = Message.objects.filter(recipient__type__in=[1, 3]).count()
    processed = 0

    print("\nStart setting initial value for is_private flag...", flush=True)
    while True:
        range_end = i + 10000
        # Can't use [Recipient.PERSONAL, Recipient.DIRECT_MESSAGE_GROUP] in migration files
        message_ids = list(
            Message.objects.filter(recipient__type__in=[1, 3], id__gt=i, id__lte=range_end)
            .values_list("id", flat=True)
            .order_by("id")
        )
        count = UserMessage.objects.filter(message_id__in=message_ids).update(
            flags=F("flags").bitor(UserMessage.flags.is_private)
        )
        if count == 0 and range_end >= Message.objects.last().id:
            break

        i = range_end
        processed += len(message_ids)
        if total != 0:
            percent = round((processed / total) * 100, 2)
        else:
            percent = 100.00
        print(f"Processed {processed}/{total} {percent}%", flush=True)


class Migration(migrations.Migration):
    atomic = False

    dependencies = [
        ("zerver", "0181_userprofile_change_emojiset"),
    ]

    operations = [
        migrations.RunPython(
            set_initial_value_of_is_private_flag,
            reverse_code=migrations.RunPython.noop,
            elidable=True,
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0183_change_custom_field_name_max_length.py]---
Location: zulip-main/zerver/migrations/0183_change_custom_field_name_max_length.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-16 18:10

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0182_set_initial_value_is_private_flag"),
    ]

    operations = [
        migrations.AlterField(
            model_name="customprofilefield",
            name="name",
            field=models.CharField(max_length=40),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0184_rename_custom_field_types.py]---
Location: zulip-main/zerver/migrations/0184_rename_custom_field_types.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-15 13:41

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0183_change_custom_field_name_max_length"),
    ]

    operations = [
        migrations.AlterField(
            model_name="customprofilefield",
            name="field_type",
            field=models.PositiveSmallIntegerField(
                choices=[
                    (1, "Short text"),
                    (2, "Long text"),
                    (4, "Date picker"),
                    (5, "Link"),
                    (3, "List of options"),
                    (6, "Person picker"),
                ],
                default=1,
            ),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0185_realm_plan_type.py]---
Location: zulip-main/zerver/migrations/0185_realm_plan_type.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-10 21:36
from django.db import migrations, models

SELF_HOSTED = 1


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0184_rename_custom_field_types"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="plan_type",
            # Realm.SELF_HOSTED
            field=models.PositiveSmallIntegerField(default=SELF_HOSTED),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0186_userprofile_starred_message_counts.py]---
Location: zulip-main/zerver/migrations/0186_userprofile_starred_message_counts.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-17 06:06

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0185_realm_plan_type"),
    ]

    operations = [
        migrations.AddField(
            model_name="userprofile",
            name="starred_message_counts",
            field=models.BooleanField(default=False),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0187_userprofile_is_billing_admin.py]---
Location: zulip-main/zerver/migrations/0187_userprofile_is_billing_admin.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-22 05:45

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0186_userprofile_starred_message_counts"),
    ]

    operations = [
        migrations.AddField(
            model_name="userprofile",
            name="is_billing_admin",
            field=models.BooleanField(db_index=True, default=False),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0188_userprofile_enable_login_emails.py]---
Location: zulip-main/zerver/migrations/0188_userprofile_enable_login_emails.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-22 09:57

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0187_userprofile_is_billing_admin"),
    ]

    operations = [
        migrations.AddField(
            model_name="userprofile",
            name="enable_login_emails",
            field=models.BooleanField(default=True),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0189_userprofile_add_some_emojisets.py]---
Location: zulip-main/zerver/migrations/0189_userprofile_add_some_emojisets.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-28 19:01

from django.db import migrations, models
from django.db.backends.base.schema import BaseDatabaseSchemaEditor
from django.db.migrations.state import StateApps


def change_emojiset_choice(apps: StateApps, schema_editor: BaseDatabaseSchemaEditor) -> None:
    UserProfile = apps.get_model("zerver", "UserProfile")
    UserProfile.objects.filter(emojiset="google").update(emojiset="google-blob")


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0188_userprofile_enable_login_emails"),
    ]

    operations = [
        migrations.AlterField(
            model_name="userprofile",
            name="emojiset",
            field=models.CharField(
                choices=[
                    ("google", "Google modern"),
                    ("google-blob", "Google classic"),
                    ("twitter", "Twitter"),
                    ("text", "Plain text"),
                ],
                default="google-blob",
                max_length=20,
            ),
        ),
        migrations.RunPython(
            change_emojiset_choice, reverse_code=migrations.RunPython.noop, elidable=True
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0190_cleanup_pushdevicetoken.py]---
Location: zulip-main/zerver/migrations/0190_cleanup_pushdevicetoken.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-10-10 22:52

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0189_userprofile_add_some_emojisets"),
    ]

    operations = [
        migrations.AlterField(
            model_name="pushdevicetoken",
            name="token",
            field=models.CharField(db_index=True, max_length=4096),
        ),
        migrations.AlterUniqueTogether(
            name="pushdevicetoken",
            unique_together={("user", "kind", "token")},
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0191_realm_seat_limit.py]---
Location: zulip-main/zerver/migrations/0191_realm_seat_limit.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-11-20 04:43

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0190_cleanup_pushdevicetoken"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="seat_limit",
            field=models.PositiveIntegerField(null=True),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0192_customprofilefieldvalue_rendered_value.py]---
Location: zulip-main/zerver/migrations/0192_customprofilefieldvalue_rendered_value.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-11-14 12:15

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0191_realm_seat_limit"),
    ]

    operations = [
        migrations.AddField(
            model_name="customprofilefieldvalue",
            name="rendered_value",
            field=models.TextField(default=None, null=True),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0193_realm_email_address_visibility.py]---
Location: zulip-main/zerver/migrations/0193_realm_email_address_visibility.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-12-06 21:36

from django.db import migrations, models

EMAIL_ADDRESS_VISIBILITY_EVERYONE = 1


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0192_customprofilefieldvalue_rendered_value"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="email_address_visibility",
            field=models.PositiveSmallIntegerField(default=EMAIL_ADDRESS_VISIBILITY_EVERYONE),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0194_userprofile_notification_sound.py]---
Location: zulip-main/zerver/migrations/0194_userprofile_notification_sound.py
Signals: Django

```python
# Generated by Django 1.11.6 on 2018-03-12 03:18

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0193_realm_email_address_visibility"),
    ]

    operations = [
        migrations.AddField(
            model_name="userprofile",
            name="notification_sound",
            field=models.CharField(default="zulip", max_length=20),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0195_realm_first_visible_message_id.py]---
Location: zulip-main/zerver/migrations/0195_realm_first_visible_message_id.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-12-05 14:50

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0194_userprofile_notification_sound"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="first_visible_message_id",
            field=models.IntegerField(default=0),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0196_add_realm_logo_fields.py]---
Location: zulip-main/zerver/migrations/0196_add_realm_logo_fields.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-08-16 00:34

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0195_realm_first_visible_message_id"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="logo_source",
            field=models.CharField(
                choices=[("D", "Default to Zulip"), ("U", "Uploaded by administrator")],
                default="D",
                max_length=1,
            ),
        ),
        migrations.AddField(
            model_name="realm",
            name="logo_version",
            field=models.PositiveSmallIntegerField(default=1),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0197_azure_active_directory_auth.py]---
Location: zulip-main/zerver/migrations/0197_azure_active_directory_auth.py
Signals: Django

```python
# Generated by Django 1.11.14 on 2018-10-11 00:12

import bitfield.models
from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0196_add_realm_logo_fields"),
    ]

    operations = [
        migrations.AlterField(
            model_name="realm",
            name="authentication_methods",
            field=bitfield.models.BitField(
                ["Google", "Email", "GitHub", "LDAP", "Dev", "RemoteUser", "AzureAD"],
                default=2147483647,
            ),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0198_preregistrationuser_invited_as.py]---
Location: zulip-main/zerver/migrations/0198_preregistrationuser_invited_as.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-12-27 17:09

from django.db import migrations, models
from django.db.backends.base.schema import BaseDatabaseSchemaEditor
from django.db.migrations.state import StateApps


def set_initial_value_for_invited_as(
    apps: StateApps, schema_editor: BaseDatabaseSchemaEditor
) -> None:
    PreregistrationUser = apps.get_model("zerver", "PreregistrationUser")
    for user in PreregistrationUser.objects.all().iterator():
        if user.invited_as_admin:
            user.invited_as = 2  # PreregistrationUser.INVITE_AS['REALM_ADMIN']
        else:
            user.invited_as = 1  # PreregistrationUser.INVITE_AS['MEMBER']
        user.save(update_fields=["invited_as"])


def reverse_code(apps: StateApps, schema_editor: BaseDatabaseSchemaEditor) -> None:
    PreregistrationUser = apps.get_model("zerver", "PreregistrationUser")
    for user in PreregistrationUser.objects.all().iterator():
        if user.invited_as == 2:  # PreregistrationUser.INVITE_AS['REALM_ADMIN']
            user.invited_as_admin = True
        else:  # PreregistrationUser.INVITE_AS['MEMBER']
            user.invited_as_admin = False
        user.save(update_fields=["invited_as_admin"])


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0197_azure_active_directory_auth"),
    ]

    operations = [
        migrations.AddField(
            model_name="preregistrationuser",
            name="invited_as",
            field=models.PositiveSmallIntegerField(default=1),
        ),
        migrations.RunPython(
            set_initial_value_for_invited_as,
            reverse_code=reverse_code,
            elidable=True,
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0199_userstatus.py]---
Location: zulip-main/zerver/migrations/0199_userstatus.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-12-17 18:49

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0198_preregistrationuser_invited_as"),
    ]

    operations = [
        migrations.CreateModel(
            name="UserStatus",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True, primary_key=True, serialize=False, verbose_name="ID"
                    ),
                ),
                ("timestamp", models.DateTimeField()),
                ("status", models.PositiveSmallIntegerField(default=1)),
                (
                    "client",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE, to="zerver.Client"
                    ),
                ),
                (
                    "user_profile",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
                    ),
                ),
            ],
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0200_remove_preregistrationuser_invited_as_admin.py]---
Location: zulip-main/zerver/migrations/0200_remove_preregistrationuser_invited_as_admin.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-12-30 10:07

from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0199_userstatus"),
    ]

    operations = [
        migrations.RemoveField(
            model_name="preregistrationuser",
            name="invited_as_admin",
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0201_zoom_video_chat.py]---
Location: zulip-main/zerver/migrations/0201_zoom_video_chat.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2018-12-28 18:00

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0200_remove_preregistrationuser_invited_as_admin"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="zoom_api_key",
            field=models.TextField(default=""),
        ),
        migrations.AddField(
            model_name="realm",
            name="zoom_api_secret",
            field=models.TextField(default=""),
        ),
        migrations.AddField(
            model_name="realm",
            name="zoom_user_id",
            field=models.TextField(default=""),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0202_add_user_status_info.py]---
Location: zulip-main/zerver/migrations/0202_add_user_status_info.py
Signals: Django

```python
# Generated by Django 1.11.18 on 2019-01-19 19:59

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0201_zoom_video_chat"),
    ]

    operations = [
        migrations.AddField(
            model_name="userstatus",
            name="status_text",
            field=models.CharField(default="", max_length=255),
        ),
        migrations.AlterField(
            model_name="userstatus",
            name="status",
            field=models.PositiveSmallIntegerField(default=0),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0203_realm_message_content_allowed_in_email_notifications.py]---
Location: zulip-main/zerver/migrations/0203_realm_message_content_allowed_in_email_notifications.py
Signals: Django

```python
# Generated by Django 1.11.16 on 2019-01-07 11:46

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0202_add_user_status_info"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="message_content_allowed_in_email_notifications",
            field=models.BooleanField(default=True),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0204_remove_realm_billing_fields.py]---
Location: zulip-main/zerver/migrations/0204_remove_realm_billing_fields.py
Signals: Django

```python
# Generated by Django 1.11.18 on 2019-01-31 22:33

from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0203_realm_message_content_allowed_in_email_notifications"),
    ]

    operations = [
        migrations.RemoveField(
            model_name="realm",
            name="has_seat_based_plan",
        ),
        migrations.RemoveField(
            model_name="realm",
            name="seat_limit",
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0205_remove_realmauditlog_requires_billing_update.py]---
Location: zulip-main/zerver/migrations/0205_remove_realmauditlog_requires_billing_update.py
Signals: Django

```python
# Generated by Django 1.11.18 on 2019-02-02 02:49

from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0204_remove_realm_billing_fields"),
    ]

    operations = [
        migrations.RemoveField(
            model_name="realmauditlog",
            name="requires_billing_update",
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0206_stream_rendered_description.py]---
Location: zulip-main/zerver/migrations/0206_stream_rendered_description.py
Signals: Django

```python
from django.db import migrations, models
from django.db.backends.base.schema import BaseDatabaseSchemaEditor
from django.db.migrations.state import StateApps


def render_all_stream_descriptions(
    apps: StateApps, schema_editor: BaseDatabaseSchemaEditor
) -> None:
    # FIXME: Application code should not be imported from migrations.
    from zerver.lib.streams import render_stream_description

    Stream = apps.get_model("zerver", "Stream")
    all_streams = Stream.objects.exclude(description="")
    for stream in all_streams:
        stream.rendered_description = render_stream_description(stream.description, stream.realm)
        stream.save(update_fields=["rendered_description"])


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0205_remove_realmauditlog_requires_billing_update"),
    ]

    operations = [
        migrations.AddField(
            model_name="stream",
            name="rendered_description",
            field=models.TextField(default=""),
        ),
        migrations.RunPython(
            render_all_stream_descriptions, reverse_code=migrations.RunPython.noop, elidable=True
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0207_multiuseinvite_invited_as.py]---
Location: zulip-main/zerver/migrations/0207_multiuseinvite_invited_as.py
Signals: Django

```python
# Generated by Django 1.11.18 on 2019-02-06 21:49

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0206_stream_rendered_description"),
    ]

    operations = [
        migrations.AddField(
            model_name="multiuseinvite",
            name="invited_as",
            field=models.PositiveSmallIntegerField(default=1),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0208_add_realm_night_logo_fields.py]---
Location: zulip-main/zerver/migrations/0208_add_realm_night_logo_fields.py
Signals: Django

```python
# Generated by Django 1.11.18 on 2019-01-15 16:07

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0207_multiuseinvite_invited_as"),
    ]

    operations = [
        migrations.AddField(
            model_name="realm",
            name="night_logo_source",
            field=models.CharField(
                choices=[("D", "Default to Zulip"), ("U", "Uploaded by administrator")],
                default="D",
                max_length=1,
            ),
        ),
        migrations.AddField(
            model_name="realm",
            name="night_logo_version",
            field=models.PositiveSmallIntegerField(default=1),
        ),
    ]
```

--------------------------------------------------------------------------------

---[FILE: 0209_stream_first_message_id.py]---
Location: zulip-main/zerver/migrations/0209_stream_first_message_id.py
Signals: Django

```python
# Generated by Django 1.11.18 on 2019-03-03 13:47

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("zerver", "0208_add_realm_night_logo_fields"),
    ]

    operations = [
        migrations.AddField(
            model_name="stream",
            name="first_message_id",
            field=models.IntegerField(db_index=True, null=True),
        ),
    ]
```

--------------------------------------------------------------------------------

````
